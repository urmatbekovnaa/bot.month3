!function(){"use strict";var e={6199:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(5319),o=n(1635),i=n(5844),s=n(6336),a=n(6513),c=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")},e}();var u,l,d="@firebase/app",p="0.10.2",f=new i.Logger("@firebase/app"),h="[DEFAULT]",m=((u={})[d]="fire-core",u["@firebase/app-compat"]="fire-core-compat",u["@firebase/analytics"]="fire-analytics",u["@firebase/analytics-compat"]="fire-analytics-compat",u["@firebase/app-check"]="fire-app-check",u["@firebase/app-check-compat"]="fire-app-check-compat",u["@firebase/auth"]="fire-auth",u["@firebase/auth-compat"]="fire-auth-compat",u["@firebase/database"]="fire-rtdb",u["@firebase/database-compat"]="fire-rtdb-compat",u["@firebase/functions"]="fire-fn",u["@firebase/functions-compat"]="fire-fn-compat",u["@firebase/installations"]="fire-iid",u["@firebase/installations-compat"]="fire-iid-compat",u["@firebase/messaging"]="fire-fcm",u["@firebase/messaging-compat"]="fire-fcm-compat",u["@firebase/performance"]="fire-perf",u["@firebase/performance-compat"]="fire-perf-compat",u["@firebase/remote-config"]="fire-rc",u["@firebase/remote-config-compat"]="fire-rc-compat",u["@firebase/storage"]="fire-gcs",u["@firebase/storage-compat"]="fire-gcs-compat",u["@firebase/firestore"]="fire-fst",u["@firebase/firestore-compat"]="fire-fst-compat",u["fire-js"]="fire-js",u.firebase="fire-js-all",u),g=new Map,v=new Map,y=new Map;function _(e,t){try{e.container.addComponent(t)}catch(n){f.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function b(e){var t,n,r,i,s=e.name;if(y.has(s))return f.debug("There were multiple attempts to register component ".concat(s,".")),!1;y.set(s,e);try{for(var a=o.__values(g.values()),c=a.next();!c.done;c=a.next()){_(c.value,e)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}try{for(var u=o.__values(v.values()),l=u.next();!l.done;l=u.next()){_(l.value,e)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return!0}function w(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function S(e){return void 0!==e.options}var k=((l={})["no-app"]="No Firebase App '{$appName}' has been created - call initializeApp() first",l["bad-app-name"]="Illegal App name: '{$appName}'",l["duplicate-app"]="Firebase App named '{$appName}' already exists with different options or config",l["app-deleted"]="Firebase App named '{$appName}' already deleted",l["server-app-deleted"]="Firebase Server App has been deleted",l["no-options"]="Need to provide options, when not being deployed to hosting via source.",l["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",l["invalid-log-argument"]="First argument to `onLog` must be null or a function.",l["idb-open"]="Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",l["idb-get"]="Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",l["idb-set"]="Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",l["idb-delete"]="Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",l["finalization-registry-not-supported"]="FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",l["invalid-server-app-environment"]="FirebaseServerApp is not for use in browser environments.",l),E=new s.ErrorFactory("app","Firebase",k),I=function(){function e(e,t,n){var i=this;this._isDeleted=!1,this._options=o.__assign({},e),this._config=o.__assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.Component("app",(function(){return i}),"PUBLIC"))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(e){this._isDeleted=e},enumerable:!1,configurable:!0}),e.prototype.checkDestroyed=function(){if(this.isDeleted)throw E.create("app-deleted",{appName:this._name})},e}(),x=function(e){function t(t,n,r,i){var s=this,a=void 0!==n.automaticDataCollectionEnabled&&n.automaticDataCollectionEnabled,c={name:r,automaticDataCollectionEnabled:a};if(void 0!==t.apiKey)s=e.call(this,t,c,i)||this;else{var u=t;s=e.call(this,u.options,c,i)||this}return s._serverConfig=o.__assign({automaticDataCollectionEnabled:a},n),s._finalizationRegistry=new FinalizationRegistry((function(){s.automaticCleanup()})),s._refCount=0,s.incRefCount(s._serverConfig.releaseOnDeref),s._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,D(d,p,"serverapp"),s}return o.__extends(t,e),t.prototype.toJSON=function(){},Object.defineProperty(t.prototype,"refCount",{get:function(){return this._refCount},enumerable:!1,configurable:!0}),t.prototype.incRefCount=function(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))},t.prototype.decRefCount=function(){return this.isDeleted?0:--this._refCount},t.prototype.automaticCleanup=function(){C(this)},Object.defineProperty(t.prototype,"settings",{get:function(){return this.checkDestroyed(),this._serverConfig},enumerable:!1,configurable:!0}),t.prototype.checkDestroyed=function(){if(this.isDeleted)throw E.create("server-app-deleted")},t}(I);function T(e,t){var n,i;void 0===t&&(t={});var a=e;"object"!=typeof t&&(t={name:t});var c=o.__assign({name:h,automaticDataCollectionEnabled:!1},t),u=c.name;if("string"!=typeof u||!u)throw E.create("bad-app-name",{appName:String(u)});if(a||(a=s.getDefaultAppConfig()),!a)throw E.create("no-options");var l=g.get(u);if(l){if(s.deepEqual(a,l.options)&&s.deepEqual(c,l.config))return l;throw E.create("duplicate-app",{appName:u})}var d=new r.ComponentContainer(u);try{for(var p=o.__values(y.values()),f=p.next();!f.done;f=p.next()){var m=f.value;d.addComponent(m)}}catch(e){n={error:e}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}var v=new I(a,c,d);return g.set(u,v),v}function C(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return t=!1,n=e.name,g.has(n)?(t=!0,g.delete(n)):v.has(n)&&e.decRefCount()<=0&&(v.delete(n),t=!0),t?[4,Promise.all(e.container.getProviders().map((function(e){return e.delete()})))]:[3,2];case 1:r.sent(),e.isDeleted=!0,r.label=2;case 2:return[2]}}))}))}function D(e,t,n){var o,i=null!==(o=m[e])&&void 0!==o?o:e;n&&(i+="-".concat(n));var s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){var c=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&c.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&c.push("and"),a&&c.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void f.warn(c.join(" "))}b(new r.Component("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var O="firebase-heartbeat-database",R=1,M="firebase-heartbeat-store",A=null;function P(){return A||(A=a.openDB(O,R,{upgrade:function(e,t){if(0===t)try{e.createObjectStore(M)}catch(e){console.warn(e)}}}).catch((function(e){throw E.create("idb-open",{originalErrorMessage:e.message})}))),A}function L(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,P()];case 1:return t=o.sent(),[4,(n=t.transaction(M)).objectStore(M).get(j(e))];case 2:return r=o.sent(),[4,n.done];case 3:return o.sent(),[2,r];case 4:return(i=o.sent())instanceof s.FirebaseError?f.warn(i.message):(a=E.create("idb-get",{originalErrorMessage:null==i?void 0:i.message}),f.warn(a.message)),[3,5];case 5:return[2]}}))}))}function N(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,P()];case 1:return n=o.sent(),r=n.transaction(M,"readwrite"),[4,r.objectStore(M).put(t,j(e))];case 2:return o.sent(),[4,r.done];case 3:return o.sent(),[3,5];case 4:return(i=o.sent())instanceof s.FirebaseError?f.warn(i.message):(a=E.create("idb-set",{originalErrorMessage:null==i?void 0:i.message}),f.warn(a.message)),[3,5];case 5:return[2]}}))}))}function j(e){return"".concat(e.name,"!").concat(e.options.appId)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F=function(){function e(e){var t=this;this.container=e,this._heartbeatsCache=null;var n=this.container.getProvider("app").getImmediate();this._storage=new U(n),this._heartbeatsCachePromise=this._storage.read().then((function(e){return t._heartbeatsCache=e,e}))}return e.prototype.triggerHeartbeat=function(){var e,t;return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s;return o.__generator(this,(function(o){switch(o.label){case 0:return n=this.container.getProvider("platform-logger").getImmediate(),r=n.getPlatformInfoString(),i=B(),null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)?[3,2]:(s=this,[4,this._heartbeatsCachePromise]);case 1:if(s._heartbeatsCache=o.sent(),null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return[2];o.label=2;case 2:return this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((function(e){return e.date===i}))?[2]:(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),[2,this._storage.overwrite(this._heartbeatsCache)])}}))}))},e.prototype.getHeartbeatsHeader=function(){var e;return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a;return o.__generator(this,(function(c){switch(c.label){case 0:return null!==this._heartbeatsCache?[3,2]:[4,this._heartbeatsCachePromise];case 1:c.sent(),c.label=2;case 2:return null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length?[2,""]:(t=B(),n=function(e,t){var n,r;void 0===t&&(t=1024);var i=[],s=e.slice(),a=function(e){var n=i.find((function(t){return t.agent===e.agent}));if(n){if(n.dates.push(e.date),W(i)>t)return n.dates.pop(),"break"}else if(i.push({agent:e.agent,dates:[e.date]}),W(i)>t)return i.pop(),"break";s=s.slice(1)};try{for(var c=o.__values(e),u=c.next();!u.done;u=c.next()){if("break"===a(u.value))break}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return{heartbeatsToSend:i,unsentEntries:s}}(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=s.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,[4,this._storage.overwrite(this._heartbeatsCache)]):[3,4]);case 3:return c.sent(),[3,5];case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache),c.label=5;case 5:return[2,a]}}))}))},e}();function B(){return(new Date).toISOString().substring(0,10)}var $,U=function(){function e(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return e.prototype.runIndexedDBEnvironmentCheck=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return s.isIndexedDBAvailable()?[2,s.validateIndexedDBOpenable().then((function(){return!0})).catch((function(){return!1}))]:[2,!1]}))}))},e.prototype.read=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return t.sent()?[3,2]:[2,{heartbeats:[]}];case 2:return[4,L(this.app)];case 3:return(null==(e=t.sent())?void 0:e.heartbeats)?[2,e]:[2,{heartbeats:[]}];case 4:return[2]}}))}))},e.prototype.overwrite=function(e){var t;return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return r.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return n=r.sent(),[2,N(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})]}}))}))},e.prototype.add=function(e){var t;return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return r.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return n=r.sent(),[2,N(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:o.__spreadArray(o.__spreadArray([],o.__read(n.heartbeats),!1),o.__read(e.heartbeats),!1)})]}}))}))},e}();function W(e){return s.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$="node",b(new r.Component("platform-logger",(function(e){return new c(e)}),"PRIVATE")),b(new r.Component("heartbeat",(function(e){return new F(e)}),"PRIVATE")),D(d,p,$),D(d,p,"cjs5"),D("fire-js",""),Object.defineProperty(t,"FirebaseError",{enumerable:!0,get:function(){return s.FirebaseError}}),t.SDK_VERSION="10.11.1",t._DEFAULT_ENTRY_NAME=h,t._addComponent=_,t._addOrOverwriteComponent=function(e,t){e.container.addOrOverwriteComponent(t)},t._apps=g,t._clearComponents=function(){y.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t._components=y,t._getProvider=w,t._isFirebaseApp=S,t._isFirebaseServerApp=function(e){return void 0!==e.settings},t._registerComponent=b,t._removeServiceInstance=function(e,t,n){void 0===n&&(n=h),w(e,t).clearInstance(n)},t._serverApps=v,t.deleteApp=C,t.getApp=function(e){void 0===e&&(e=h);var t=g.get(e);if(!t&&e===h&&s.getDefaultAppConfig())return T();if(!t)throw E.create("no-app",{appName:e});return t},t.getApps=function(){return Array.from(g.values())},t.initializeApp=T,t.initializeServerApp=function(e,t){var n,i,a;if(s.isBrowser())throw E.create("invalid-server-app-environment");void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),a=S(e)?e.options:e;var c=o.__assign(o.__assign({},t),a);if(void 0!==c.releaseOnDeref&&delete c.releaseOnDeref,void 0!==t.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw E.create("finalization-registry-not-supported",{});var u,l=""+(u=JSON.stringify(c),o.__spreadArray([],o.__read(u),!1).reduce((function(e,t){return Math.imul(31,e)+t.charCodeAt(0)|0}),0)),d=v.get(l);if(d)return d.incRefCount(t.releaseOnDeref),d;var p=new r.ComponentContainer(l);try{for(var f=o.__values(y.values()),h=f.next();!h.done;h=f.next()){var m=h.value;p.addComponent(m)}}catch(e){n={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}var g=new x(a,t,l,p);return v.set(l,g),g},t.onLog=function(e,t){if(null!==e&&"function"!=typeof e)throw E.create("invalid-log-argument");i.setUserLogHandler(e,t)},t.registerVersion=D,t.setLogLevel=function(e){i.setLogLevel(e)}},5319:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1635),o=n(6336),i=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),s="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new o.Deferred;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}try{for(var o=r.__values(this.instancesDeferred.entries()),i=o.next();!i.done;i=o.next()){var a=r.__read(i.value,2),c=a[0],u=a[1],l=this.normalizeInstanceIdentifier(c);try{var d=this.getOrInitializeService({instanceIdentifier:l});u.resolve(d)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=s),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(r.__spreadArray(r.__spreadArray([],r.__read(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),!1),r.__read(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()}))),!1))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=s),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=s),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var o=e.options,i=void 0===o?{}:o,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error("".concat(this.name,"(").concat(s,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a=this.getOrInitializeService({instanceIdentifier:s,options:i});try{for(var c=r.__values(this.instancesDeferred.entries()),u=c.next();!u.done;u=c.next()){var l=r.__read(u.value,2),d=l[0],p=l[1];s===this.normalizeInstanceIdentifier(d)&&p.resolve(a)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);var i=this.instances.get(r);return i&&e(i,r),function(){o.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,o,i=this.onInitCallbacks.get(t);if(i)try{for(var s=r.__values(i),a=s.next();!a.done;a=s.next()){var c=a.value;try{c(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,o=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===s?void 0:t),options:o}),this.instances.set(n,i),this.instancesOptions.set(n,o),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(e){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=s),this.component?this.component.multipleInstances?e:s:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var c=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=i,t.ComponentContainer=c,t.Provider=a},1489:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(6199),i=n(5319),s=n(1635),a=n(6336),c=n(2463),u="@firebase/installations",l="0.6.6",d=1e4,p="w:".concat(l),f="FIS_v2",h="https://firebaseinstallations.googleapis.com/v1",m=36e5,g=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),v=new a.ErrorFactory("installations","Installations",g);function y(e){return e instanceof a.FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(e){var t=e.projectId;return"".concat(h,"/projects/").concat(t,"/installations")}function b(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function w(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r;return s.__generator(this,(function(o){switch(o.label){case 0:return[4,t.json()];case 1:return n=o.sent(),r=n.error,[2,v.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function S(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function k(e,t){var n=t.refreshToken,r=S(e);return r.append("Authorization",function(e){return"".concat(f," ").concat(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function E(e){return s.__awaiter(this,void 0,void 0,(function(){var t;return s.__generator(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function I(e,t){var n=e.appConfig,r=e.heartbeatServiceProvider,o=t.fid;return s.__awaiter(this,void 0,void 0,(function(){var e,t,i,a,c,u,l,d;return s.__generator(this,(function(s){switch(s.label){case 0:return e=_(n),t=S(n),(i=r.getImmediate({optional:!0}))?[4,i.getHeartbeatsHeader()]:[3,2];case 1:(a=s.sent())&&t.append("x-firebase-client",a),s.label=2;case 2:return c={fid:o,authVersion:f,appId:n.appId,sdkVersion:p},u={method:"POST",headers:t,body:JSON.stringify(c)},[4,E((function(){return fetch(e,u)}))];case 3:return(l=s.sent()).ok?[4,l.json()]:[3,5];case 4:return d=s.sent(),[2,{fid:d.fid||o,registrationStatus:2,refreshToken:d.refreshToken,authToken:b(d.authToken)}];case 5:return[4,w("Create Installation",l)];case 6:throw s.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var T=/^[cdef][\w-]{21}$/,C="";function D(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){var t=(n=e,btoa(String.fromCharCode.apply(String,s.__spreadArray([],s.__read(n),!1))).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return T.test(t)?t:C}catch(e){return C}}function O(e){return"".concat(e.appName,"!").concat(e.appId)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R=new Map;function M(e,t){var n=O(e);A(n,t),function(e,t){var n=L();n&&n.postMessage({key:e,fid:t});N()}(n,t)}function A(e,t){var n,r,o=R.get(e);if(o)try{for(var i=s.__values(o),a=i.next();!a.done;a=i.next()){(0,a.value)(t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}var P=null;function L(){return!P&&"BroadcastChannel"in self&&((P=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){A(e.data.key,e.data.fid)}),P}function N(){0===R.size&&P&&(P.close(),P=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j="firebase-installations-database",F=1,B="firebase-installations-store",$=null;function U(){return $||($=c.openDB(j,F,{upgrade:function(e,t){if(0===t)e.createObjectStore(B)}})),$}function W(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r,o,i,a;return s.__generator(this,(function(s){switch(s.label){case 0:return n=O(e),[4,U()];case 1:return r=s.sent(),o=r.transaction(B,"readwrite"),[4,(i=o.objectStore(B)).get(n)];case 2:return a=s.sent(),[4,i.put(t,n)];case 3:return s.sent(),[4,o.done];case 4:return s.sent(),a&&a.fid===t.fid||M(e,t.fid),[2,t]}}))}))}function H(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n,r;return s.__generator(this,(function(o){switch(o.label){case 0:return t=O(e),[4,U()];case 1:return n=o.sent(),[4,(r=n.transaction(B,"readwrite")).objectStore(B).delete(t)];case 2:return o.sent(),[4,r.done];case 3:return o.sent(),[2]}}))}))}function z(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r,o,i,a,c;return s.__generator(this,(function(s){switch(s.label){case 0:return n=O(e),[4,U()];case 1:return r=s.sent(),o=r.transaction(B,"readwrite"),[4,(i=o.objectStore(B)).get(n)];case 2:return a=s.sent(),void 0!==(c=t(a))?[3,4]:[4,i.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,i.put(c,n)];case 5:s.sent(),s.label=6;case 6:return[4,o.done];case 7:return s.sent(),!c||a&&a.fid===c.fid||M(e,c.fid),[2,c]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n,r;return s.__generator(this,(function(o){switch(o.label){case 0:return[4,z(e.appConfig,(function(n){var r=function(e){var t=e||{fid:D(),registrationStatus:0};return G(t)}(n),o=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(v.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r;return s.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,7]),[4,I(e,t)];case 1:return n=o.sent(),[2,W(e.appConfig,n)];case 2:return y(r=o.sent())&&409===r.customData.serverCode?[4,H(e.appConfig)]:[3,4];case 3:return o.sent(),[3,6];case 4:return[4,W(e.appConfig,{fid:t.fid,registrationStatus:0})];case 5:o.sent(),o.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:V(e)}:{installationEntry:t}}(e,r);return t=o.registrationPromise,o.installationEntry}))];case 1:return(n=o.sent()).fid!==C?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=o.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function V(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n,r,o;return s.__generator(this,(function(i){switch(i.label){case 0:return[4,K(e.appConfig)];case 1:t=i.sent(),i.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,x(100)];case 3:return i.sent(),[4,K(e.appConfig)];case 4:return t=i.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,q(e)];case 6:return n=i.sent(),r=n.installationEntry,(o=n.registrationPromise)?[2,o]:[2,r];case 7:return[2,t]}}))}))}function K(e){return z(e,(function(e){if(!e)throw v.create("installation-not-found");return G(e)}))}function G(e){return 1===(t=e).registrationStatus&&t.registrationTime+d<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function J(e,t){var n=e.appConfig,r=e.heartbeatServiceProvider;return s.__awaiter(this,void 0,void 0,(function(){var e,o,i,a,c,u,l,d;return s.__generator(this,(function(s){switch(s.label){case 0:return e=function(e,t){var n=t.fid;return"".concat(_(e),"/").concat(n,"/authTokens:generate")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,t),o=k(n,t),(i=r.getImmediate({optional:!0}))?[4,i.getHeartbeatsHeader()]:[3,2];case 1:(a=s.sent())&&o.append("x-firebase-client",a),s.label=2;case 2:return c={installation:{sdkVersion:p,appId:n.appId}},u={method:"POST",headers:o,body:JSON.stringify(c)},[4,E((function(){return fetch(e,u)}))];case 3:return(l=s.sent()).ok?[4,l.json()]:[3,5];case 4:return d=s.sent(),[2,b(d)];case 5:return[4,w("Generate Auth Token",l)];case 6:throw s.sent()}}))}))}function Y(e,t){return void 0===t&&(t=!1),s.__awaiter(this,void 0,void 0,(function(){var n,r,o;return s.__generator(this,(function(i){switch(i.label){case 0:return[4,z(e.appConfig,(function(r){if(!Z(r))throw v.create("not-registered");var o=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+m}(e)}(o))return r;if(1===o.requestStatus)return n=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r;return s.__generator(this,(function(o){switch(o.label){case 0:return[4,X(e.appConfig)];case 1:n=o.sent(),o.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,x(100)];case 3:return o.sent(),[4,X(e.appConfig)];case 4:return n=o.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Y(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw v.create("app-offline");var i=function(e){var t={requestStatus:1,requestTime:Date.now()};return s.__assign(s.__assign({},e),{authToken:t})}(r);return n=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r,o;return s.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,8]),[4,J(e,t)];case 1:return n=i.sent(),o=s.__assign(s.__assign({},t),{authToken:n}),[4,W(e.appConfig,o)];case 2:return i.sent(),[2,n];case 3:return!y(r=i.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,H(e.appConfig)];case 4:return i.sent(),[3,7];case 5:return o=s.__assign(s.__assign({},t),{authToken:{requestStatus:0}}),[4,W(e.appConfig,o)];case 6:i.sent(),i.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,i),i}))];case 1:return r=i.sent(),n?[4,n]:[3,3];case 2:return o=i.sent(),[3,4];case 3:o=r.authToken,i.label=4;case 4:return[2,o]}}))}))}function X(e){return z(e,(function(e){if(!Z(e))throw v.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+d<Date.now()?s.__assign(s.__assign({},e),{authToken:{requestStatus:0}}):e}))}function Z(e){return void 0!==e&&2===e.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Q(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n,r,o;return s.__generator(this,(function(i){switch(i.label){case 0:return[4,q(t=e)];case 1:return n=i.sent(),r=n.installationEntry,(o=n.registrationPromise)?o.catch(console.error):Y(t).catch(console.error),[2,r.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(e,t){return void 0===t&&(t=!1),s.__awaiter(this,void 0,void 0,(function(){var n;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,te(n=e)];case 1:return r.sent(),[4,Y(n,t)];case 2:return[2,r.sent().token]}}))}))}function te(e){return s.__awaiter(this,void 0,void 0,(function(){var t;return s.__generator(this,(function(n){switch(n.label){case 0:return[4,q(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r,o,i;return s.__generator(this,(function(s){switch(s.label){case 0:return n=function(e,t){var n=t.fid;return"".concat(_(e),"/").concat(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t),r=k(e,t),o={method:"DELETE",headers:r},[4,E((function(){return fetch(n,o)}))];case 1:return(i=s.sent()).ok?[3,3]:[4,w("Delete Installation",i)];case 2:throw s.sent();case 3:return[2]}}))}))}function re(e){return v.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe="installations",ie=function(e){var t=e.getProvider("app").getImmediate(),n=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t,n;if(!e||!e.options)throw re("App Configuration");if(!e.name)throw re("App Name");try{for(var r=s.__values(["projectId","apiKey","appId"]),o=r.next();!o.done;o=r.next()){var i=o.value;if(!e.options[i])throw re(i)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:o._getProvider(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},se=function(e){var t=e.getProvider("app").getImmediate(),n=o._getProvider(t,oe).getImmediate();return{getId:function(){return Q(n)},getToken:function(e){return ee(n,e)}}};o._registerComponent(new i.Component(oe,ie,"PUBLIC")),o._registerComponent(new i.Component("installations-internal",se,"PRIVATE")),o.registerVersion(u,l),o.registerVersion(u,l,"cjs5"),t.deleteInstallations=function(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,z(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw v.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw v.create("app-offline");case 3:return[4,ne(t,n)];case 4:return r.sent(),[4,H(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.getId=Q,t.getInstallations=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return void 0===e&&(e=o.getApp()),o._getProvider(e,"installations").getImmediate()},t.getToken=ee,t.onIdChange=function(e,t){var n=e.appConfig;return function(e,t){L();var n=O(e),r=R.get(n);r||(r=new Set,R.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=O(e),r=R.get(n);r&&(r.delete(t),0===r.size&&R.delete(n),N())}(n,t)}}},5844:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n(1635),s=[];
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.LogLevel=void 0,(o=t.LogLevel||(t.LogLevel={}))[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";var a={debug:t.LogLevel.DEBUG,verbose:t.LogLevel.VERBOSE,info:t.LogLevel.INFO,warn:t.LogLevel.WARN,error:t.LogLevel.ERROR,silent:t.LogLevel.SILENT},c=t.LogLevel.INFO,u=((r={})[t.LogLevel.DEBUG]="log",r[t.LogLevel.VERBOSE]="log",r[t.LogLevel.INFO]="info",r[t.LogLevel.WARN]="warn",r[t.LogLevel.ERROR]="error",r),l=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var o=(new Date).toISOString(),s=u[t];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));console[s].apply(console,i.__spreadArray(["[".concat(o,"]  ").concat(e.name,":")],n,!1))}},d=function(){function e(e){this.name=e,this._logLevel=c,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in t.LogLevel))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,i.__spreadArray([this,t.LogLevel.DEBUG],e,!1)),this._logHandler.apply(this,i.__spreadArray([this,t.LogLevel.DEBUG],e,!1))},e.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,i.__spreadArray([this,t.LogLevel.VERBOSE],e,!1)),this._logHandler.apply(this,i.__spreadArray([this,t.LogLevel.VERBOSE],e,!1))},e.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,i.__spreadArray([this,t.LogLevel.INFO],e,!1)),this._logHandler.apply(this,i.__spreadArray([this,t.LogLevel.INFO],e,!1))},e.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,i.__spreadArray([this,t.LogLevel.WARN],e,!1)),this._logHandler.apply(this,i.__spreadArray([this,t.LogLevel.WARN],e,!1))},e.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,i.__spreadArray([this,t.LogLevel.ERROR],e,!1)),this._logHandler.apply(this,i.__spreadArray([this,t.LogLevel.ERROR],e,!1))},e}();t.Logger=d,t.setLogLevel=function(e){s.forEach((function(t){t.setLogLevel(e)}))},t.setUserLogHandler=function(e,n){for(var r=function(r){var o=null;n&&n.level&&(o=a[n.level]),r.userLogHandler=null===e?null:function(n,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");r>=(null!=o?o:n.logLevel)&&e({level:t.LogLevel[r].toLowerCase(),message:a,args:i,type:n.name})}},o=0,i=s;o<i.length;o++){r(i[o])}}},9790:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n(1489);var r,o,i=n(5319),s=n(1635),a=n(4718),c=n(6336),u=n(6199),l="/firebase-messaging-sw.js",d="/firebase-cloud-messaging-push-scope",p="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",f="https://fcmregistrations.googleapis.com/v1",h="google.c.a.c_id",m="google.c.a.c_l",g="google.c.a.ts";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function v(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,s.__spreadArray([],s.__read(t),!1))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(r||(r={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(o||(o={}));var _="fcm_token_details_db",b=5,w="fcm_token_object_Store";function S(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n,r,o=this;return s.__generator(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=i.sent(),n=t.map((function(e){return e.name})),!n.includes(_))return[2,null];i.label=2;case 2:return r=null,[4,a.openDB(_,b,{upgrade:function(t,n,i,a){return s.__awaiter(o,void 0,void 0,(function(){var o,i,c,u;return s.__generator(this,(function(s){switch(s.label){case 0:return n<2?[2]:t.objectStoreNames.contains(w)?[4,(o=a.objectStore(w)).index("fcmSenderId").get(e)]:[2];case 1:return i=s.sent(),[4,o.clear()];case 2:if(s.sent(),!i)return[2];if(2===n){if(!(c=i).auth||!c.p256dh||!c.endpoint)return[2];r={token:c.fcmToken,createTime:null!==(u=c.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:"string"==typeof c.vapidKey?c.vapidKey:v(c.vapidKey)}}}else(3===n||4===n)&&(r={token:(c=i).fcmToken,createTime:c.createTime,subscriptionOptions:{auth:v(c.auth),p256dh:v(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:v(c.vapidKey)}});return[2]}}))}))}})];case 3:return i.sent().close(),[4,a.deleteDB(_)];case 4:return i.sent(),[4,a.deleteDB("fcm_vapid_details_db")];case 5:return i.sent(),[4,a.deleteDB("undefined")];case 6:return i.sent(),[2,k(r)?r:null]}}))}))}function k(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E,I="firebase-messaging-database",x=1,T="firebase-messaging-store",C=null;function D(){return C||(C=a.openDB(I,x,{upgrade:function(e,t){if(0===t)e.createObjectStore(T)}})),C}function O(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n,r;return s.__generator(this,(function(o){switch(o.label){case 0:return t=A(e),[4,D()];case 1:return[4,o.sent().transaction(T).objectStore(T).get(t)];case 2:return(n=o.sent())?[2,n]:[3,3];case 3:return[4,S(e.appConfig.senderId)];case 4:return(r=o.sent())?[4,R(e,r)]:[3,6];case 5:return o.sent(),[2,r];case 6:return[2]}}))}))}function R(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r,o;return s.__generator(this,(function(i){switch(i.label){case 0:return n=A(e),[4,D()];case 1:return r=i.sent(),[4,(o=r.transaction(T,"readwrite")).objectStore(T).put(t,n)];case 2:return i.sent(),[4,o.done];case 3:return i.sent(),[2,t]}}))}))}function M(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n,r;return s.__generator(this,(function(o){switch(o.label){case 0:return t=A(e),[4,D()];case 1:return n=o.sent(),[4,(r=n.transaction(T,"readwrite")).objectStore(T).delete(t)];case 2:return o.sent(),[4,r.done];case 3:return o.sent(),[2]}}))}))}function A(e){return e.appConfig.appId}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P=((E={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',E["only-available-in-window"]="This method is available in a Window context.",E["only-available-in-sw"]="This method is available in a service worker context.",E["permission-default"]="The notification permission was not granted and dismissed instead.",E["permission-blocked"]="The notification permission was not granted and blocked instead.",E["unsupported-browser"]="This browser doesn't support the API's required to use the Firebase SDK.",E["indexed-db-unsupported"]="This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",E["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",E["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",E["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",E["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",E["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",E["token-update-no-token"]="FCM returned no token when updating the user to push.",E["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",E["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",E["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",E["invalid-vapid-key"]="The public VAPID key must be a string.",E["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",E),L=new c.ErrorFactory("messaging","Messaging",P);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function N(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r,o,i,a,c;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,$(e)];case 1:n=s.sent(),r=U(t),o={method:"POST",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(B(e.appConfig),o)];case 3:return[4,s.sent().json()];case 4:return i=s.sent(),[3,6];case 5:throw a=s.sent(),L.create("token-subscribe-failed",{errorInfo:null==a?void 0:a.toString()});case 6:if(i.error)throw c=i.error.message,L.create("token-subscribe-failed",{errorInfo:c});if(!i.token)throw L.create("token-subscribe-no-token");return[2,i.token]}}))}))}function j(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r,o,i,a,c;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,$(e)];case 1:n=s.sent(),r=U(t.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch("".concat(B(e.appConfig),"/").concat(t.token),o)];case 3:return[4,s.sent().json()];case 4:return i=s.sent(),[3,6];case 5:throw a=s.sent(),L.create("token-update-failed",{errorInfo:null==a?void 0:a.toString()});case 6:if(i.error)throw c=i.error.message,L.create("token-update-failed",{errorInfo:c});if(!i.token)throw L.create("token-update-no-token");return[2,i.token]}}))}))}function F(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r,o,i,a;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,$(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch("".concat(B(e.appConfig),"/").concat(t),r)];case 3:return[4,s.sent().json()];case 4:if((o=s.sent()).error)throw i=o.error.message,L.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw a=s.sent(),L.create("token-unsubscribe-failed",{errorInfo:null==a?void 0:a.toString()});case 6:return[2]}}))}))}function B(e){var t=e.projectId;return"".concat(f,"/projects/").concat(t,"/registrations")}function $(e){var t=e.appConfig,n=e.installations;return s.__awaiter(this,void 0,void 0,(function(){var e;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(e)})]}}))}))}function U(e){var t=e.p256dh,n=e.auth,r=e.endpoint,o=e.vapidKey,i={web:{endpoint:r,auth:n,p256dh:t}};return o!==p&&(i.web.applicationPubKey=o),i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W=6048e5;function H(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n,r,o;return s.__generator(this,(function(i){switch(i.label){case 0:return[4,K(e.swRegistration,e.vapidKey)];case 1:return t=i.sent(),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:v(t.getKey("auth")),p256dh:v(t.getKey("p256dh"))},[4,O(e.firebaseDependencies)];case 2:return(r=i.sent())?[3,3]:[2,V(e.firebaseDependencies,n)];case 3:if(s=r.subscriptionOptions,c=(a=n).vapidKey===s.vapidKey,u=a.endpoint===s.endpoint,l=a.auth===s.auth,d=a.p256dh===s.p256dh,c&&u&&l&&d)return[3,8];i.label=4;case 4:return i.trys.push([4,6,,7]),[4,F(e.firebaseDependencies,r.token)];case 5:return i.sent(),[3,7];case 6:return o=i.sent(),console.warn(o),[3,7];case 7:return[2,V(e.firebaseDependencies,n)];case 8:return Date.now()>=r.createTime+W?[2,q(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n})]:[2,r.token];case 9:return[2]}var s,a,c,u,l,d;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function z(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,O(e.firebaseDependencies)];case 1:return(t=r.sent())?[4,F(e.firebaseDependencies,t.token)]:[3,4];case 2:return r.sent(),[4,M(e.firebaseDependencies)];case 3:r.sent(),r.label=4;case 4:return[4,e.swRegistration.pushManager.getSubscription()];case 5:return(n=r.sent())?[2,n.unsubscribe()]:[2,!0]}}))}))}function q(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r;return s.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,j(e.firebaseDependencies,t)];case 1:return n=o.sent(),r=s.__assign(s.__assign({},t),{token:n,createTime:Date.now()}),[4,R(e.firebaseDependencies,r)];case 2:return o.sent(),[2,n];case 3:throw o.sent();case 4:return[2]}}))}))}function V(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r;return s.__generator(this,(function(o){switch(o.label){case 0:return[4,N(e,t)];case 1:return n=o.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,R(e,r)];case 2:return o.sent(),[2,r.token]}}))}))}function K(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:y(t)})]}}))}))}function G(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var o=t.notification.image;o&&(e.notification.image=o);var i=t.notification.icon;i&&(e.notification.icon=i)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,r,o,i,s;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};var a=null!==(o=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==o?o:null===(i=t.notification)||void 0===i?void 0:i.click_action;a&&(e.fcmOptions.link=a);var c=null===(s=t.fcmOptions)||void 0===s?void 0:s.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),t}function J(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e){return L.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
J("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),J("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var X=function(){function e(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var r=function(e){var t,n;if(!e||!e.options)throw Y("App Configuration Object");if(!e.name)throw Y("App Name");var r=e.options;try{for(var o=s.__values(["projectId","apiKey","appId","messagingSenderId"]),i=o.next();!i.done;i=o.next()){var a=i.value;if(!r[a])throw Y(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}return e.prototype._delete=function(){return Promise.resolve()},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n;return s.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=e,[4,navigator.serviceWorker.register(l,{scope:d})];case 1:return t.swRegistration=r.sent(),e.swRegistration.update().catch((function(){})),[3,3];case 2:throw n=r.sent(),L.create("failed-service-worker-registration",{browserErrorMessage:null==n?void 0:n.message});case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e,t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){switch(n.label){case 0:return t||e.swRegistration?[3,2]:[4,Z(e)];case 1:n.sent(),n.label=2;case 2:if(!t&&e.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw L.create("invalid-sw-registration");return e.swRegistration=t,[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(e,t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){return t?e.vapidKey=t:e.vapidKey||(e.vapidKey=p),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e,t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){switch(n.label){case 0:if(!navigator)throw L.create("only-available-in-window");return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:n.sent(),n.label=2;case 2:if("granted"!==Notification.permission)throw L.create("permission-blocked");return[4,ee(e,null==t?void 0:t.vapidKey)];case 3:return n.sent(),[4,Q(e,null==t?void 0:t.serviceWorkerRegistration)];case 4:return n.sent(),[2,H(e)]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e,t,n){return s.__awaiter(this,void 0,void 0,(function(){var r;return s.__generator(this,(function(i){switch(i.label){case 0:return r=function(e){switch(e){case o.NOTIFICATION_CLICKED:return"notification_open";case o.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t),[4,e.firebaseDependencies.analyticsProvider.get()];case 1:return i.sent().logEvent(r,{message_id:n[h],message_name:n[m],message_time:n[g],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))}function re(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r;return s.__generator(this,(function(i){switch(i.label){case 0:return(n=t.data).isFirebaseMessaging?(e.onMessageHandler&&n.messageType===o.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(G(n)):e.onMessageHandler.next(G(n))),r=n.data,"object"==typeof(s=r)&&s&&h in s&&"1"===r["google.c.a.e"]?[4,ne(e,n.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}var s}))}))}var oe="@firebase/messaging",ie="0.12.8",se=function(e){var t=new X(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(function(e){return re(t,e)})),t},ae=function(e){var t=e.getProvider("messaging").getImmediate();return{getToken:function(e){return te(t,e)}}};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ce(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,c.validateIndexedDBOpenable()];case 1:return e.sent(),[3,3];case 2:return e.sent(),[2,!1];case 3:return[2,"undefined"!=typeof window&&c.isIndexedDBAvailable()&&c.areCookiesEnabled()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */u._registerComponent(new i.Component("messaging",se,"PUBLIC")),u._registerComponent(new i.Component("messaging-internal",ae,"PRIVATE")),u.registerVersion(oe,ie),u.registerVersion(oe,ie,"cjs5"),t.deleteToken=function(e){return function(e){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:if(!navigator)throw L.create("only-available-in-window");return e.swRegistration?[3,2]:[4,Z(e)];case 1:t.sent(),t.label=2;case 2:return[2,z(e)]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e=c.getModularInstance(e))},t.getMessaging=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return void 0===e&&(e=u.getApp()),ce().then((function(e){if(!e)throw L.create("unsupported-browser")}),(function(e){throw L.create("indexed-db-unsupported")})),u._getProvider(c.getModularInstance(e),"messaging").getImmediate()},t.getToken=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){return[2,te(e=c.getModularInstance(e),t)]}))}))},t.isSupported=ce,t.onMessage=function(e,t){return function(e,t){if(!navigator)throw L.create("only-available-in-window");return e.onMessageHandler=t,function(){e.onMessageHandler=null}}(e=c.getModularInstance(e),t)}},6336:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw i(t)},i=function(e){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const o=e[t],i=t+1<e.length,s=i?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,u=o>>2,l=(3&o)<<4|s>>4;let d=(15&s)<<2|c>>6,p=63&c;a||(p=64,i||(d=64)),r.push(n[u],n[l],n[d],n[p])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const o=n[e.charAt(t++)],i=t<e.length?n[e.charAt(t)]:0;++t;const s=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==o||null==i||null==s||null==a)throw new c;const u=o<<2|i>>4;if(r.push(u),64!==s){const e=i<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u=function(e){const t=s(e);return a.encodeByteArray(t,!0)},l=function(e){return u(e).replace(/\./g,"")},d=function(e){try{return a.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=p(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function f(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h=()=>{try{return f().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&d(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},m=e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function v(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}class _ extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b.prototype.create)}}class b{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],i=o?function(e,t){return e.replace(w,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(o,n):"Error",s=`${this.serviceName}: ${i} (${r}).`;return new _(r,s,n)}}const w=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e){return JSON.parse(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const k=function(e){let t={},n={},r={},o="";try{const i=e.split(".");t=S(d(i[0])||""),n=S(d(i[1])||""),o=i[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:o}};function E(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=x),void 0===r.error&&(r.error=x),void 0===r.complete&&(r.complete=x);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function x(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(e,t){return`${e} failed: ${t} argument `}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const C=144e5;t.CONSTANTS=r,t.DecodeBase64StringError=c,t.Deferred=g,t.ErrorFactory=b,t.FirebaseError=_,t.MAX_VALUE_MILLIS=C,t.RANDOM_FACTOR=.5,t.Sha1=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let r,o,i=this.chain_[0],s=this.chain_[1],a=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(r=c^s&(a^c),o=1518500249):(r=s^a^c,o=1859775393):e<60?(r=s&a|c&(s|a),o=2400959708):(r=s^a^c,o=3395469782);const t=(i<<5|i>>>27)+r+u+o+n[e]&4294967295;u=c,c=a,a=4294967295&(s<<30|s>>>2),s=i,i=t}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const o=this.buf_;let i=this.inbuf_;for(;r<t;){if(0===i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(o[i]=e.charCodeAt(r),++i,++r,i===this.blockSize){this.compress_(o),i=0;break}}else for(;r<t;)if(o[i]=e[r],++i,++r,i===this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}},t.areCookiesEnabled=function(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.assert=o,t.assertionError=i,t.async=function(e,t){return(...n)=>{Promise.resolve(!0).then((()=>{e(...n)})).catch((e=>{t&&t(e)}))}},t.base64=a,t.base64Decode=d,t.base64Encode=u,t.base64urlEncodeWithoutPadding=l,t.calculateBackoffMillis=function(e,t=1e3,n=2){const r=t*Math.pow(n,e),o=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(C,r+o)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.contains=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(i)),""].join(".")},t.createSubscribe=function(e,t){const n=new I(e,t);return n.subscribe.bind(n)},t.decode=k,t.deepCopy=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return p(void 0,e)},t.deepEqual=function e(t,n){if(t===n)return!0;const r=Object.keys(t),o=Object.keys(n);for(const i of r){if(!o.includes(i))return!1;const r=t[i],s=n[i];if(E(r)&&E(s)){if(!e(r,s))return!1}else if(r!==s)return!1}for(const e of o)if(!r.includes(e))return!1;return!0},t.deepExtend=p,t.errorPrefix=T,t.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)},t.getDefaultAppConfig=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},t.getDefaultEmulatorHost=m,t.getDefaultEmulatorHostnameAndPort=e=>{const t=m(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},t.getDefaults=h,t.getExperimentalSetting=e=>{var t;return null===(t=h())||void 0===t?void 0:t[`_${e}`]},t.getGlobal=f,t.getModularInstance=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return e&&e._delegate?e._delegate:e},t.getUA=v,t.isAdmin=function(e){const t=k(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isBrowserExtension=function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},t.isElectron=function(){return v().indexOf("Electron/")>=0},t.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){const e=v();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){try{return"object"==typeof indexedDB}catch(e){return!1}},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())},t.isNode=y,t.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!y()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return v().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){const t=k(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){const t=k(e).claims,n=Math.floor((new Date).getTime()/1e3);let r=0,o=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),o=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},t.issuedAtTime=function(e){const t=k(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=S,t.map=function(e,t,n){const r={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r},t.ordinal=function(e){return Number.isFinite(e)?e+function(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20)return"th";const n=e%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(e):`${e}`},t.promiseWithTimeout=function(e,t=2e3){const n=new g;return setTimeout((()=>n.reject("timeout!")),t),e.then(n.resolve,n.reject),n.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.querystring=function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate.");i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.validateArgCount=function(e,t,n,r){let o;if(r<t?o="at least "+t:r>n&&(o=0===n?"none":"no more than "+n),o){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")}},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(T(e,t)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(T(e,t)+"must be a valid context object.")},t.validateIndexedDBOpenable=function(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))},t.validateNamespace=function(e,t,n){if((!n||t)&&"string"!=typeof t)throw new Error(T(e,"namespace")+"must be a valid firebase namespace.")}},1797:function(e,t,n){n.r(t),n.d(t,{Breadcrumbs:function(){return ji},BrowserClient:function(){return No},BrowserProfilingIntegration:function(){return wh},BrowserTracing:function(){return jf},Dedupe:function(){return $i},Feedback:function(){return _p},FunctionToString:function(){return Qt},GlobalHandlers:function(){return Ki},HttpContext:function(){return Qi},Hub:function(){return Je},InboundFilters:function(){return on},Integrations:function(){return kh},LinkedErrors:function(){return ns},ModuleMetadata:function(){return rr},Replay:function(){return cd},ReplayCanvas:function(){return Bd},SDK_VERSION:function(){return Ve},SEMANTIC_ATTRIBUTE_SENTRY_OP:function(){return zr},SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:function(){return qr},SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:function(){return Hr},SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:function(){return Wr},Scope:function(){return ze},TryCatch:function(){return ss},WINDOW:function(){return _o},addBreadcrumb:function(){return St},addEventProcessor:function(){return Ar},addGlobalEventProcessor:function(){return he},addIntegration:function(){return Kt},addTracingExtensions:function(){return yo},breadcrumbsIntegration:function(){return Ni},browserApiErrorsIntegration:function(){return is},browserProfilingIntegration:function(){return bh},browserTracingIntegration:function(){return Of},captureConsoleIntegration:function(){return Wp},captureEvent:function(){return bt},captureException:function(){return yt},captureMessage:function(){return _t},captureSession:function(){return Wt},captureUserFeedback:function(){return ys},chromeStackLineParser:function(){return Jo},close:function(){return Pt},configureScope:function(){return wt},contextLinesIntegration:function(){return qp},continueTrace:function(){return kn},createTransport:function(){return $r},createUserFeedbackEnvelope:function(){return Lo},debugIntegration:function(){return Kp},dedupeIntegration:function(){return Jp},defaultIntegrations:function(){return ds},defaultRequestInstrumentationOptions:function(){return Ef},defaultStackLineParsers:function(){return ii},defaultStackParser:function(){return si},endSession:function(){return $t},eventFromException:function(){return Oo},eventFromMessage:function(){return Ro},exceptionFromError:function(){return Io},extraErrorDataIntegration:function(){return tf},extractTraceparentData:function(){return An},feedbackIntegration:function(){return yp},flush:function(){return At},forceLoad:function(){return ms},functionToStringIntegration:function(){return Zt},geckoStackLineParser:function(){return Zo},getActiveSpan:function(){return Sn},getActiveTransaction:function(){return Mn},getClient:function(){return Nt},getCurrentHub:function(){return Ze},getCurrentScope:function(){return Ft},getDefaultIntegrations:function(){return ps},getHubFromCarrier:function(){return rt},getReplay:function(){return ld},getSpanStatusFromHttpCode:function(){return Dn},globalHandlersIntegration:function(){return Vi},httpClientIntegration:function(){return Lp},httpContextIntegration:function(){return Zi},inboundFiltersIntegration:function(){return rn},init:function(){return fs},instrumentOutgoingRequests:function(){return If},isInitialized:function(){return jt},lastEventId:function(){return Lt},linkedErrorsIntegration:function(){return ts},makeBrowserOfflineTransport:function(){return Gf},makeFetchTransport:function(){return Wo},makeMain:function(){return Xe},makeMultiplexedTransport:function(){return Ir},makeXHRTransport:function(){return zo},metrics:function(){return _r},moduleMetadataIntegration:function(){return nr},onLoad:function(){return gs},onProfilingStartRouteTransaction:function(){return vh},opera10StackLineParser:function(){return ni},opera11StackLineParser:function(){return oi},parameterize:function(){return Nn},replayCanvasIntegration:function(){return Fd},replayIntegration:function(){return ad},reportingObserverIntegration:function(){return Mp},rewriteFramesIntegration:function(){return Cp},sendFeedback:function(){return Yd},sessionTimingIntegration:function(){return wp},setContext:function(){return kt},setCurrentClient:function(){return Ln},setExtra:function(){return It},setExtras:function(){return Et},setHttpStatus:function(){return Rn},setMeasurement:function(){return Pn},setTag:function(){return Tt},setTags:function(){return xt},setUser:function(){return Ct},showReportDialog:function(){return hs},spanStatusfromHttpCode:function(){return On},startBrowserTracingNavigationSpan:function(){return Mf},startBrowserTracingPageLoadSpan:function(){return Rf},startInactiveSpan:function(){return wn},startSession:function(){return Bt},startSpan:function(){return _n},startSpanManual:function(){return bn},startTransaction:function(){return Mt},trace:function(){return yn},winjsStackLineParser:function(){return ei},withActiveSpan:function(){return Rt},withIsolationScope:function(){return Ot},withScope:function(){return Dt},wrap:function(){return vs}});var r={};n.r(r),n.d(r,{FunctionToString:function(){return Qt},InboundFilters:function(){return on},LinkedErrors:function(){return hn}});var o={};n.r(o),n.d(o,{Breadcrumbs:function(){return ji},Dedupe:function(){return $i},GlobalHandlers:function(){return Ki},HttpContext:function(){return Qi},LinkedErrors:function(){return ns},TryCatch:function(){return ss}});const i=Object.prototype.toString;function s(e){switch(i.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return v(e,Error)}}function a(e,t){return i.call(e)===`[object ${t}]`}function c(e){return a(e,"ErrorEvent")}function u(e){return a(e,"DOMError")}function l(e){return a(e,"String")}function d(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function p(e){return null===e||d(e)||"object"!=typeof e&&"function"!=typeof e}function f(e){return a(e,"Object")}function h(e){return"undefined"!=typeof Event&&v(e,Event)}function m(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function g(e){return"number"==typeof e&&e!=e}function v(e,t){try{return e instanceof t}catch(e){return!1}}function y(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}
// Copyright (c) 2014-2022 Denis Pushkarev
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// The above copyright notice and this permission notice shall be included in
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
function _(e){return e&&e.Math==Math?e:void 0}const b="object"==typeof globalThis&&_(globalThis)||"object"==typeof window&&_(window)||"object"==typeof self&&_(self)||"object"==typeof n.g&&_(n.g)||function(){return this}()||{};function w(){return b}function S(e,t,n){const r=n||b,o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}const k=w(),E=80;function I(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let i=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||E;for(;n&&i++<r&&(u=x(n,l),!("html"===u||i>1&&s+o.length*c+u.length>=d));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function x(e,t){const n=e,r=[];let o,i,s,a,c;if(!n||!n.tagName)return"";if(k.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&l(o))for(i=o.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const d=["aria-label","type","name","title","alt"];for(c=0;c<d.length;c++)s=d[c],a=n.getAttribute(s),a&&r.push(`[${s}="${a}"]`);return r.join("")}function T(){try{return k.document.location.href}catch(e){return""}}function C(e){return k.document&&k.document.querySelector?k.document.querySelector(e):null}function D(e){if(!k.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const O="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,R=["debug","info","warn","error","log","assert","trace"],M={};function A(e){if(!("console"in b))return e();const t=b.console,n={},r=Object.keys(M);r.forEach((e=>{const r=M[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const P=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return O?R.forEach((n=>{t[n]=(...t)=>{e&&A((()=>{b.console[n](`Sentry Logger [${n}]:`,...t)}))}})):R.forEach((e=>{t[e]=()=>{}})),t}();function L(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function N(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function j(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{y(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function F(e,t,n=!1){return!!l(e)&&(a(t,"RegExp")?t.test(e):!!l(t)&&(n?e===t:e.includes(t)))}function B(e,t=[],n=!1){return t.some((t=>F(e,t,n)))}function $(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&W(o,r),e[t]=o}function U(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){O&&P.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function W(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,U(e,"__sentry_original__",t)}catch(e){}}function H(e){return e.__sentry_original__}function z(e){if(s(e))return{message:e.message,name:e.name,stack:e.stack,...V(e)};if(h(e)){const t={type:e.type,target:q(e.target),currentTarget:q(e.currentTarget),...V(e)};return"undefined"!=typeof CustomEvent&&v(e,CustomEvent)&&(t.detail=e.detail),t}return e}function q(e){try{return t=e,"undefined"!=typeof Element&&v(t,Element)?I(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function V(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function K(e){return G(e,new Map)}function G(e,t){if(function(e){if(!f(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=G(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(G(e,t))})),r}return e}const J="production",Y="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function X(){const e=b,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Z(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Q(e){const{message:t,event_id:n}=e;if(t)return t;const r=Z(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ee(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function te(e,t){const n=Z(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function ne(e){if(e&&e.__sentry_captured__)return!0;try{U(e,"__sentry_captured__",!0)}catch(e){}return!1}function re(e){return Array.isArray(e)?e:[e]}const oe=1e3;function ie(){return Date.now()/oe}const se=function(){const{performance:e}=b;if(!e||!e.now)return ie;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/oe}();let ae;const ce=(()=>{const{performance:e}=b;if(!e||!e.now)return void(ae="none");const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,s=e.timing&&e.timing.navigationStart,a="number"==typeof s?Math.abs(s+n-r):t;return i||a<t?o<=a?(ae="timeOrigin",e.timeOrigin):(ae="navigationStart",s):(ae="dateNow",r)})();var ue;function le(e){return new pe((t=>{t(e)}))}function de(e){return new pe(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(ue||(ue={}));class pe{constructor(e){pe.prototype.__init.call(this),pe.prototype.__init2.call(this),pe.prototype.__init3.call(this),pe.prototype.__init4.call(this),this._state=ue.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new pe(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new pe(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(ue.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(ue.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===ue.PENDING&&(m(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===ue.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===ue.RESOLVED&&e[1](this._value),this._state===ue.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function fe(){return S("globalEventProcessors",(()=>[]))}function he(e){fe().push(e)}function me(e,t,n,r=0){return new pe(((o,i)=>{const s=e[r];if(null===t||"function"!=typeof s)o(t);else{const a=s({...t},n);Y&&s.id&&null===a&&P.log(`Event processor "${s.id}" dropped event`),m(a)?a.then((t=>me(e,t,n,r+1).then(o))).then(null,i):me(e,a,n,r+1).then(o).then(null,i)}}))}function ge(e){const t=se(),n={sid:X(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return K({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&ve(n,e),n}function ve(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||se(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:X()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ye(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),ve(e,n)}function _e(e){return e.transaction}const be="baggage",we="sentry-",Se=/^sentry-/,ke=8192;function Ee(e){if(!l(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=xe(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=xe(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(Se)){e[t.slice(we.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Ie(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,i=0===r?o:`${e},${o}`;return i.length>ke?(O&&P.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):i}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${we}${t}`]=n),e)),{}))}function xe(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const Te=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Ce(e){if(!e)return;const t=e.match(Te);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function De(e,t){const n=Ce(e),r=Ee(t),{traceId:o,parentSpanId:i,parentSampled:s}=n||{};return n?{traceId:o||X(),parentSpanId:i||X().substring(16),spanId:X().substring(16),sampled:s,dsc:r||{}}:{traceId:o||X(),spanId:X().substring(16)}}function Oe(e=X(),t=X().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}const Re=1;function Me(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,tags:a,origin:c}=Ne(e);return K({data:r,op:o,parent_span_id:i,span_id:t,status:s,tags:a,trace_id:n,origin:c})}function Ae(e){const{traceId:t,spanId:n}=e.spanContext();return Oe(t,n,je(e))}function Pe(e){return"number"==typeof e?Le(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Le(e.getTime()):se()}function Le(e){return e>9999999999?e/1e3:e}function Ne(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function je(e){const{traceFlags:t}=e.spanContext();return Boolean(t&Re)}function Fe(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},s=K({environment:r.environment||J,release:r.release,user_segment:i,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",s),s}function Be(e){const t=Nt();if(!t)return{};const n=Fe(Ne(e).trace_id||"",t,Ft()),r=_e(e);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:i,source:s}=r.metadata;null!=i&&(n.sample_rate=`${i}`);const a=Ne(r);return s&&"url"!==s&&(n.transaction=a.description),n.sampled=String(je(r)),t.emit&&t.emit("createDsc",n),n}function $e(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t,c=K(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=K(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=K(o);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=K(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});s&&(e.level=s);a&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:Me(t),...e.contexts};const n=_e(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Be(t),...e.sdkProcessingMetadata};const r=Ne(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?re(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function Ue(e,t){const{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:f,span:h}=t;We(e,"extra",n),We(e,"tags",r),We(e,"user",o),We(e,"contexts",i),We(e,"sdkProcessingMetadata",a),s&&(e.level=s),f&&(e.transactionName=f),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function We(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let He;class ze{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=qe()}static clone(e){return e?e.clone():new ze}clone(){const e=new ze;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&ve(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof ze){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(f(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=qe(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:ie(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:i,_level:s,_fingerprint:a,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:i,level:s,fingerprint:a||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){$e(e,this.getScopeData());return me([...n,...fe(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:X();if(!this._client)return P.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:X();if(!this._client)return P.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:X();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(P.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function qe(){return{traceId:X(),spanId:X().substring(16)}}const Ve="7.112.2",Ke=parseFloat(Ve),Ge=100;class Je{constructor(e,t,n,r=Ke){let o,i;this._version=r,t?o=t:(o=new ze,o.setClient(e)),n?i=n:(i=new ze,i.setClient(e)),this._stack=[{scope:o}],e&&this.bindClient(e),this._isolationScope=i}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return m(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:X(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:X(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:X();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=Ge}=r.getOptions&&r.getOptions()||{};if(i<=0)return;const s={timestamp:ie(),...e},a=o?A((()=>o(s,t))):s;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,i))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Xe(this);try{e(this)}finally{Xe(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Y&&P.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(Y&&!n){this.getClient()?P.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):P.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&ye(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=J}=n&&n.getOptions()||{},{userAgent:i}=b.navigator||{},s=ge({release:r,environment:o,user:t.getUser(),...i&&{userAgent:i},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&ve(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=Ye().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);Y&&P.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Ye(){return b.__SENTRY__=b.__SENTRY__||{extensions:{},hub:void 0},b}function Xe(e){const t=Ye(),n=rt(t);return ot(t,e),n}function Ze(){const e=Ye();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return et(e)}function Qe(){return Ze().getIsolationScope()}function et(e=Ye()){return nt(e)&&!rt(e).isOlderThan(Ke)||ot(e,new Je),rt(e)}function tt(e,t={}){const n=Ye();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function nt(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function rt(e){return S("hub",(()=>new Je),e)}function ot(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}const it=50,st=/\(error: (.*)\)/,at=/captureMessage|captureException/;function ct(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const i=st.test(n)?n.replace(st,"$1"):n;if(!i.match(/\S*Error: /)){for(const e of t){const t=e(i);if(t){r.push(t);break}}if(r.length>=it)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),at.test(t[t.length-1].function||"")&&(t.pop(),at.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,it).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const ut="<anonymous>";function lt(e){try{return e&&"function"==typeof e&&e.name||ut}catch(e){return ut}}function dt(e,t=100,n=1/0){try{return ft("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function pt(e,t=3,n=102400){const r=dt(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?pt(e,t-1,n):r;var o}function ft(e,t,r=1/0,o=1/0,i=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[s,a]=i;if(null==t||["number","boolean","string"].includes(typeof t)&&!g(t))return t;const c=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==n.g&&t===n.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(y(t))return"[VueViewModel]";if(f(r=t)&&"nativeEvent"in r&&"preventDefault"in r&&"stopPropagation"in r)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${lt(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const o=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(o)?`[HTMLElement: ${o}]`:`[object ${o}]`}catch(e){return`**non-serializable** (${e})`}var r}(e,t);if(!c.startsWith("[object "))return c;if(t.__sentry_skip_normalization__)return t;const u="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:r;if(0===u)return c.replace("object ","");if(s(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return ft("",l.toJSON(),u-1,o,i)}catch(e){}const d=Array.isArray(t)?[]:{};let p=0;const h=z(t);for(const e in h){if(!Object.prototype.hasOwnProperty.call(h,e))continue;if(p>=o){d[e]="[MaxProperties ~]";break}const t=h[e];d[e]=ft(e,t,u-1,o,i),p++}return a(t),d}function ht(e,t,n,r,o,i){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||X(),timestamp:t.timestamp||ie()},u=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:J);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=L(e.message,i));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=L(s.value,i));const a=e.request;a&&a.url&&(a.url=L(a.url,i))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),void 0===t.type&&function(e,t){const n=b._sentryDebugIds;if(!n)return;let r;const o=mt.get(t);o?r=o:(r=new Map,mt.set(t,r));const i=Object.keys(n).reduce(((e,o)=>{let i;const s=r.get(o);s?i=s:(i=t(o),r.set(o,i));for(let t=i.length-1;t>=0;t--){const r=i[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=i[e.filename])}))}))}catch(e){}}(c,e.stackParser);const l=function(e,t){if(!t)return e;const n=e?e.clone():new ze;return n.update(t),n}(r,n.captureContext);n.mechanism&&te(c,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=(He||(He=new ze),He).getScopeData();if(i){Ue(p,i.getScopeData())}if(l){Ue(p,l.getScopeData())}const f=[...n.attachments||[],...p.attachments];f.length&&(n.attachments=f),$e(c,p);return me([...d,...fe(),...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof s&&s>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:dt(e.data,t,n)}})))},...e.user&&{user:dt(e.user,t,n)},...e.contexts&&{contexts:dt(e.contexts,t,n)},...e.extra&&{extra:dt(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=dt(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=Ne(e).data;return r&&(e.data=dt(r,t,n)),e})));return r}(e,s,a):e)))}const mt=new WeakMap;function gt(e){if(e)return function(e){return e instanceof ze||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>vt.includes(e)))}(e)?{captureContext:e}:e}const vt=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function yt(e,t){return Ze().captureException(e,gt(t))}function _t(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return Ze().captureMessage(e,n,r)}function bt(e,t){return Ze().captureEvent(e,t)}function wt(e){Ze().configureScope(e)}function St(e,t){Ze().addBreadcrumb(e,t)}function kt(e,t){Ze().setContext(e,t)}function Et(e){Ze().setExtras(e)}function It(e,t){Ze().setExtra(e,t)}function xt(e){Ze().setTags(e)}function Tt(e,t){Ze().setTag(e,t)}function Ct(e){Ze().setUser(e)}function Dt(...e){const t=Ze();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function Ot(e){return tt((()=>e(Qe())))}function Rt(e,t){return Dt((n=>(n.setSpan(e),t(n))))}function Mt(e,t){return Ze().startTransaction({...e},t)}async function At(e){const t=Nt();return t?t.flush(e):(Y&&P.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function Pt(e){const t=Nt();return t?t.close(e):(Y&&P.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Lt(){return Ze().lastEventId()}function Nt(){return Ze().getClient()}function jt(){return!!Nt()}function Ft(){return Ze().getScope()}function Bt(e){const t=Nt(),n=Qe(),r=Ft(),{release:o,environment:i=J}=t&&t.getOptions()||{},{userAgent:s}=b.navigator||{},a=ge({release:o,environment:i,user:r.getUser()||n.getUser(),...s&&{userAgent:s},...e}),c=n.getSession();return c&&"ok"===c.status&&ve(c,{status:"exited"}),$t(),n.setSession(a),r.setSession(a),a}function $t(){const e=Qe(),t=Ft(),n=t.getSession()||e.getSession();n&&ye(n),Ut(),e.setSession(),t.setSession()}function Ut(){const e=Qe(),t=Ft(),n=Nt(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Wt(e=!1){e?$t():Ut()}const Ht=[];function zt(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?re(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),i=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==i){const[e]=o.splice(i,1);o.push(e)}return o}function qt(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Vt(e,t,n){if(n[t.name])Y&&P.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Ht.indexOf(t.name)&&(t.setupOnce(he,Ze),Ht.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}Y&&P.log(`Integration installed: ${t.name}`)}}function Kt(e){const t=Nt();t&&t.addIntegration?t.addIntegration(e):Y&&P.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)}function Gt(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}let Jt;const Yt="FunctionToString",Xt=new WeakMap,Zt=()=>({name:Yt,setupOnce(){Jt=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=H(this),n=Xt.has(Nt())&&void 0!==t?t:this;return Jt.apply(n,e)}}catch(e){}},setup(e){Xt.set(e,!0)}}),Qt=Gt(Yt,Zt),en=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],tn=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],nn="InboundFilters",rn=(e={})=>({name:nn,setupOnce(){},processEvent(t,n,r){const o=r.getOptions(),i=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:en],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:tn],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return Y&&P.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Q(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));Y&&0===t.length&&P.error(`Could not extract message for event ${Q(e)}`);return t}(e).some((e=>B(e,t)))}(e,t.ignoreErrors))return Y&&P.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Q(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&B(n,t)}(e,t.ignoreTransactions))return Y&&P.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Q(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=sn(e);return!!n&&B(n,t)}(e,t.denyUrls))return Y&&P.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Q(e)}.\nUrl: ${sn(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=sn(e);return!n||B(n,t)}(e,t.allowUrls))return Y&&P.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Q(e)}.\nUrl: ${sn(e)}`),!0;return!1}(t,i)?null:t}}),on=Gt(nn,rn);function sn(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Y&&P.error(`Cannot extract url for event ${Q(e)}`),null}}function an(e,t,n=250,r,o,i,s){if(!(i.exception&&i.exception.values&&s&&v(s.originalException,Error)))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var c,u;a&&(i.exception.values=(c=cn(e,t,o,s.originalException,r,i.exception.values,a,0),u=n,c.map((e=>(e.value&&(e.value=L(e.value,u)),e)))))}function cn(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(v(r[o],Error)){un(s,a);const i=e(t,r[o]),u=c.length;ln(i,o,u,a),c=cn(e,t,n,r[o],o,[i,...c],i,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,i)=>{if(v(r,Error)){un(s,a);const u=e(t,r),l=c.length;ln(u,`errors[${i}]`,l,a),c=cn(e,t,n,r,o,[u,...c],u,l)}})),c}function un(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function ln(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function dn(e,t){return e(t.stack||"",1)}function pn(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=dn(e,t);return r.length&&(n.stacktrace={frames:r}),n}const fn="LinkedErrors",hn=Gt(fn,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:fn,setupOnce(){},preprocessEvent(e,r,o){const i=o.getOptions();an(pn,i.stackParser,i.maxValueLength,n,t,e,r)}}})),mn=r;function gn(e,t,n=(()=>{})){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(m(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function vn(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Nt(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function yn(e,t,n=(()=>{}),r=(()=>{})){const o=Ze(),i=Ft(),s=i.getSpan(),a=In(e),c=En(o,{parentSpan:s,spanContext:a,forceTransaction:!1,scope:i});return i.setSpan(c),gn((()=>t(c)),(e=>{c&&c.setStatus("internal_error"),n(e,c)}),(()=>{c&&c.end(),i.setSpan(s),r()}))}function _n(e,t){const n=In(e);return tt((()=>Dt(e.scope,(r=>{const o=Ze(),i=r.getSpan(),s=e.onlyIfParent&&!i?void 0:En(o,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return gn((()=>t(s)),(()=>{if(s){const{status:e}=Ne(s);e&&"ok"!==e||s.setStatus("internal_error")}}),(()=>s&&s.end()))}))))}function bn(e,t){const n=In(e);return tt((()=>Dt(e.scope,(r=>{const o=Ze(),i=r.getSpan(),s=e.onlyIfParent&&!i?void 0:En(o,{parentSpan:i,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function a(){s&&s.end()}return gn((()=>t(s,a)),(()=>{if(s&&s.isRecording()){const{status:e}=Ne(s);e&&"ok"!==e||s.setStatus("internal_error")}}))}))))}function wn(e){if(!vn())return;const t=In(e),n=Ze(),r=e.scope?e.scope.getSpan():Sn();if(e.onlyIfParent&&!r)return;const o=(e.scope||Ft()).clone();return En(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function Sn(){return Ft().getSpan()}const kn=({sentryTrace:e,baggage:t},n)=>{const r=Ft(),{traceparentData:o,dynamicSamplingContext:i,propagationContext:s}=function(e,t){const n=Ce(e),r=Ee(t),{traceId:o,parentSpanId:i,parentSampled:s}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:o||X(),parentSpanId:i||X().substring(16),spanId:X().substring(16),sampled:s,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:o||X(),spanId:X().substring(16)}}}(e,t);r.setPropagationContext(s),Y&&o&&P.log(`[Tracing] Continuing trace ${o.traceId}.`);const a={...o,metadata:K({dynamicSamplingContext:i})};return n?tt((()=>n(a))):a};function En(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:o}){if(!vn())return;const i=Qe();let s;if(t&&!r)s=t.startChild(n);else if(t){const r=Be(t),{traceId:o,spanId:i}=t.spanContext(),a=je(t);s=e.startTransaction({traceId:o,parentSpanId:i,parentSampled:a,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:a,sampled:c}={...i.getPropagationContext(),...o.getPropagationContext()};s=e.startTransaction({traceId:t,parentSpanId:a,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return o.setSpan(s),function(e,t,n){e&&(U(e,Tn,n),U(e,xn,t))}(s,o,i),s}function In(e){if(e.startTime){const t={...e};return t.startTimestamp=Pe(e.startTime),delete t.startTime,t}return e}const xn="_sentryScope",Tn="_sentryIsolationScope";var Cn;function Dn(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}!function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(Cn||(Cn={}));const On=Dn;function Rn(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=Dn(t);"unknown_error"!==n&&e.setStatus(n)}function Mn(e){return(e||Ze()).getScope().getTransaction()}const An=Ce;function Pn(e,t,n){const r=Mn();r&&r.setMeasurement(e,t,n)}function Ln(e){const t=Ze().getStackTop();t.client=e,t.scope.setClient(e)}function Nn(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const jn=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Fn(e,t=!1){const{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${s}`}function Bn(e){const t=jn.exec(e);if(!t)return void A((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",i,s="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return $n({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function $n(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Un(e){const t="string"==typeof e?Bn(e):$n(e);if(t&&function(e){if(!O)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(P.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(P.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(P.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(P.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}function Wn(e,t=[]){return[e,t]}function Hn(e,t){const[n,r]=e;return[n,[...r,t]]}function zn(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function qn(e,t){return(t||new TextEncoder).encode(e)}function Vn(e,t){const[n,r]=e;let o=JSON.stringify(n);function i(e){"string"==typeof o?o="string"==typeof e?o+e:[qn(o,t),e]:o.push("string"==typeof e?qn(e,t):e)}for(const e of r){const[t,n]=e;if(i(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(dt(n))}i(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function Kn(e,t){const n="string"==typeof e.data?qn(e.data,t):e.data;return[K({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const Gn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Jn(e){return Gn[e]}function Yn(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Xn(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Fn(r)},...o&&{trace:K({...o})}}}const Zn=new Map,Qn=new Set;function er(e,t){return function(e){if(b._sentryModuleMetadata)for(const t of Object.keys(b._sentryModuleMetadata)){const n=b._sentryModuleMetadata[t];if(Qn.has(t))continue;Qn.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){Zn.set(e.filename,n);break}}}(e),Zn.get(t)}const tr="ModuleMetadata",nr=()=>({name:tr,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{zn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent(e,t,n){return function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=er(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e}}),rr=Gt(tr,nr),or="c",ir="g",sr="s",ar="d";function cr(e){return e.replace(/[^\w\-./]+/gi,"")}const ur=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function lr(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of ur)if(e===t)return n;return e}(t)),"")}const dr={[or]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[ir]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[ar]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[sr]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};let pr;function fr(e){return pr?pr.get(e):void 0}function hr(e){const t=fr(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(K(r));return n}class mr{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},i=se()){const s=Math.floor(i),a=t.replace(/[^\w\-.]+/gi,"_");const c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[cr(n)]=lr(String(e[n])));return t}(o),u=function(e){return e.replace(/[^\w]+/gi,"_")}(r),l=function(e,t,n,r){return`${e}${t}${n}${Object.entries(K(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,a,u,c);let d=this._buckets.get(l);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<s&&(d.timestamp=s)):(d={metric:new dr[e](n),timestamp:s,metricType:e,name:a,unit:u,tags:c},this._buckets.set(l,d));!function(e,t,n,r,o,i){const s=Sn();if(s){const a=fr(s)||new Map,c=`${e}:${t}@${r}`,u=a.get(i);if(u){const[,e]=u;a.set(i,[c,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else a.set(i,[c,{min:n,max:n,count:1,sum:n,tags:o}]);pr||(pr=new WeakMap),pr.set(s,a)}}(e,a,"string"==typeof n?d.metric.weight-p:n,u,o,l)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const gr="MetricsAggregator",vr=()=>({name:gr,setupOnce(){},setup(e){e.metricsAggregator=new mr(e)}});function yr(e,t,n,r={}){const o=Nt(),i=Ft();if(o){if(!o.metricsAggregator)return void(Y&&P.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:s,tags:a,timestamp:c}=r,{release:u,environment:l}=o.getOptions(),d=i.getTransaction(),p={};u&&(p.release=u),l&&(p.environment=l),d&&(p.transaction=Ne(d).description||""),Y&&P.log(`Adding value of ${n} to ${e} metric ${t}`),o.metricsAggregator.add(e,t,n,s,{...p,...a},c)}}const _r={increment:function(e,t=1,n){yr("c",e,t,n)},distribution:function(e,t,n){yr("d",e,t,n)},set:function(e,t,n){yr("s",e,t,n)},gauge:function(e,t,n){yr("g",e,t,n)},MetricsAggregator:Gt(gr,vr),metricsAggregatorIntegration:vr},br="7";function wr(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Sr(e,t){return n={sentry_key:e.publicKey,sentry_version:br,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function kr(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${wr(e)}${e.projectId}/envelope/`}(e)}?${Sr(e,r)}`}function Er(e,t){let n;return zn(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Ir(e,t){return n=>{const r=e(n),o={};function i(t,r){const i=r?`${t}:${r}`:t;if(!o[i]){const s=Bn(t);if(!s)return;const a=kr(s);o[i]=r?function(e,t){return n=>{const r=e(n);return{send:async e=>{const n=Er(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)},flush:e=>r.flush(e)}}}(e,r)({...n,url:a}):e({...n,url:a})}return o[i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return Er(e,n)}}).map((e=>"string"==typeof e?i(e,void 0):i(e.dsn,e.release))).filter((e=>!!e));return 0===n.length&&n.push(r),(await Promise.all(n.map((t=>t.send(e)))))[0]},flush:async function(e){const t=[...Object.keys(o).map((e=>o[e])),r];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}}class xr extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Tr(e,t,n,r){const o=Yn(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const s=Xn(e,o,r,t);delete e.sdkProcessingMetadata;return Wn(s,[[{type:i},e]])}function Cr(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=Fn(t));const i=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Wn(o,[i])}const Dr="Not capturing exception because it's already been captured.";class Or{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Un(e.dsn):Y&&P.warn("No DSN provided, client will not send events."),this._dsn){const t=kr(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(ne(e))return void(Y&&P.log(Dr));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const i=d(e)?e:String(e),s=p(e)?this.eventFromMessage(i,t,n):this.eventFromException(e,n);return this._process(s.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&ne(t.originalException))return void(Y&&P.log(Dr));let r=t&&t.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,o||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?Y&&P.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ve(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):le(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Y&&P.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];Vt(this,e,this._integrations),t||qt(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=Tr(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Hn(n,Kn(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=Yn(n);return Wn({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Fn(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;Y&&P.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(e){Y&&P.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=Cr(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&Vt(e,t,n)})),n}(this,e),qt(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(ve(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new pe((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=Qe()){const o=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),ht(o,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:i,dsc:s}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:i},...e.contexts};const a=s||Fe(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Y){const t=e;"log"===t.logLevel?P.log(t.message):P.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,i=Mr(e),s=Rr(e),a=e.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),de(new xr(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const u="replay_event"===a?"replay":a,l=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,l).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,e),new xr("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(Rr(t)&&r)return r(t,n);if(Mr(t)&&o)return o(t,n);return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(m(e))return e.then((e=>{if(!f(e)&&null!==e)throw new xr(n);return e}),(e=>{throw new xr(`${t} rejected with ${e}`)}));if(!f(e)&&null!==e)throw new xr(n);return e}(o,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",u,e),new xr(`${c} returned \`null\`, will not send event.`,"log");const o=n&&n.getSession();!i&&o&&this._updateSessionFromEvent(o,r);const s=r.transaction_info;if(i&&s&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...s,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof xr)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new xr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Y&&P.error("Error while sending event:",e)}));Y&&P.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function Rr(e){return void 0===e.type}function Mr(e){return"transaction"===e.type}function Ar(e){const t=Nt();t&&t.addEventProcessor&&t.addEventProcessor(e)}function Pr(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return de(new xr("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new pe(((n,r)=>{let o=t.length;if(!o)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{le(e).then((()=>{--o||(clearTimeout(i),n(!0))}),r)}))}))}}}const Lr=6e4;function Nr(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?Lr:r-t}function jr(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function Fr(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},i=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,n,,,i]=e.split(":",5),s=parseInt(t,10),a=1e3*(isNaN(s)?60:s);if(n)for(const e of n.split(";"))"metric_bucket"===e&&i&&!i.split(";").includes("custom")||(o[e]=r+a);else o.all=r+a}else s?o.all=r+Nr(s,r):429===t&&(o.all=r+6e4);return o}const Br=30;function $r(e,t,n=Pr(e.bufferSize||Br)){let r={};function o(o){const i=[];if(zn(o,((t,n)=>{const o=Jn(n);if(jr(r,o)){const r=Ur(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else i.push(t)})),0===i.length)return le();const s=Wn(o[0],i),a=t=>{zn(s,((n,r)=>{const o=Ur(n,r);e.recordDroppedEvent(t,Jn(r),o)}))};return n.add((()=>t({body:Vn(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Y&&P.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=Fr(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof xr)return Y&&P.error("Skipped sending event because buffer is full."),a("queue_overflow"),le();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function Ur(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}const Wr="sentry.source",Hr="sentry.sample_rate",zr="sentry.op",qr="sentry.origin",Vr={},Kr={};function Gr(e,t){Vr[e]=Vr[e]||[],Vr[e].push(t)}function Jr(e,t){Kr[e]||(t(),Kr[e]=!0)}function Yr(e,t){const n=e&&Vr[e];if(n)for(const r of n)try{r(t)}catch(t){O&&P.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${lt(r)}\nError:`,t)}}let Xr=null;function Zr(e){const t="error";Gr(t,e),Jr(t,Qr)}function Qr(){Xr=b.onerror,b.onerror=function(e,t,n,r,o){return Yr("error",{column:r,error:o,line:n,msg:e,url:t}),!(!Xr||Xr.__SENTRY_LOADER__)&&Xr.apply(this,arguments)},b.onerror.__SENTRY_INSTRUMENTED__=!0}let eo=null;function to(e){const t="unhandledrejection";Gr(t,e),Jr(t,no)}function no(){eo=b.onunhandledrejection,b.onunhandledrejection=function(e){return Yr("unhandledrejection",e),!(eo&&!eo.__SENTRY_LOADER__)||eo.apply(this,arguments)},b.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let ro=!1;function oo(){const e=Mn();if(e){const t="internal_error";Y&&P.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}oo.tag="sentry_tracingErrorCallback";class io{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class so{constructor(e={}){this._traceId=e.traceId||X(),this._spanId=e.spanId||X().substring(16),this._startTime=e.startTimestamp||se(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[qr]:e.origin||"manual",[zr]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[zr]}set op(e){this.setAttribute(zr,e)}get origin(){return this._attributes[qr]}set origin(e){this.setAttribute(qr,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?Re:0}}startChild(e){const t=new so({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=_e(this);if(t.transaction=n,Y&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${Ne(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;P.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return Rn(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=_e(this);if(Y&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&P.log(e.replace("Starting","Finishing"))}this._endTime=Pe(e)}toTraceparent(){return Ae(this)}toContext(){return K({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return Me(this)}getSpanJSON(){return K({data:this._getData(),description:this._name,op:this._attributes[zr],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[qr],_metrics_summary:hr(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class ao extends so{constructor(e,t){super(e),this._contexts={},this._hub=t||Ze(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Wr]&&{source:this._attributes[Wr]},...this._attributes[Hr]&&{sampleRate:this._attributes[Hr]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(Wr,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new io(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=Pe(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return K({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return Be(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(Y&&P.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return Y&&P.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&Ne(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>Ne(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:o}={scope:(i=this)[xn],isolationScope:i[Tn]};var i;const{metadata:s}=this,{source:a}=s,c={contexts:{...this._contexts,trace:Me(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...s,capturedSpanScope:r,capturedSpanIsolationScope:o,...K({dynamicSamplingContext:Be(this)})},_metrics_summary:hr(this),...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(Y&&P.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),Y&&P.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const co={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},uo=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class lo extends io{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===Ne(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class po extends ao{constructor(e,t,n=co.idleTimeout,r=co.finalTimeout,o=co.heartbeatInterval,i=!1,s=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=o,this._onScope=i,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=uo[4],this._autoFinishAllowed=!s,i&&(Y&&P.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),s||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=uo[3],this.end())}),this._finalTimeout)}end(e){const t=Pe(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){Y&&P.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;Ne(e).timestamp||(e.setStatus("cancelled"),e.end(t),Y&&P.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=Ne(e),o=n&&n<t,i=(this._finalTimeout+this._idleTimeout)/1e3,s=r&&n&&r-n<i;if(Y){const t=JSON.stringify(e,void 0,2);o?s||P.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):P.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return o&&s})),Y&&P.log("[Tracing] flushing IdleTransaction")}else Y&&P.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new lo(t,n,this.spanContext().spanId,e),Y&&P.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=uo[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(Y&&P.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=uo[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),Y&&P.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,Y&&P.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(Y&&P.log(`[Tracing] popActivity ${e}`),delete this.activities[e],Y&&P.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=se();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=uo[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(Y&&P.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=uo[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){Y&&P.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function fo(e,t,n){if(!vn(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(Hr,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(Hr,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(Hr,Number(r))):(r=1,e.setAttribute(Hr,r)),ho(r)?r?(e.sampled=Math.random()<r,e.sampled?(Y&&P.log(`[Tracing] starting ${e.op} transaction - ${Ne(e).description}`),e):(Y&&P.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(Y&&P.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(Y&&P.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function ho(e){return g(e)||"number"!=typeof e&&"boolean"!=typeof e?(Y&&P.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(Y&&P.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function mo(){const e=this.getScope().getSpan();return e?{"sentry-trace":Ae(e)}:{}}function go(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},o=r.instrumenter||"sentry",i=e.instrumenter||"sentry";o!==i&&(Y&&P.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${o}\` instrumenter.\nThe transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),e.sampled=!1);let s=new ao(e,this);return s=fo(s,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),s.isRecording()&&s.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",s),s}function vo(e,t,n,r,o,i,s,a=!1){const c=e.getClient(),u=c&&c.getOptions()||{};let l=new po(t,e,n,r,s,o,a);return l=fo(l,u,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...i}),l.isRecording()&&l.initSpanRecorder(u._experiments&&u._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",l),l}function yo(){const e=Ye();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=go),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=mo),ro||(ro=!0,Zr(oo),to(oo)))}const _o=b;let bo=0;function wo(){return bo>0}function So(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(H(e))return e}catch(t){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const o=r.map((e=>So(e,t)));return e.apply(this,o)}catch(e){throw bo++,setTimeout((()=>{bo--})),Dt((n=>{n.addEventProcessor((e=>(t.mechanism&&(ee(e,void 0,void 0),te(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),yt(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}W(r,e),U(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch(e){}return r}var ko=n(8341);const Eo="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Io(e,t){const n=To(e,t),r={type:t&&t.name,value:Do(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function xo(e,t){return{exception:{values:[Io(e,t)]}}}function To(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Co.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const Co=/Minified React error #\d+;/i;function Do(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Oo(e,t,n,r){const o=Mo(e,t,n&&n.syntheticException||void 0,r);return te(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),le(o)}function Ro(e,t,n="info",r,o){const i=Ao(e,t,r&&r.syntheticException||void 0,o);return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),le(i)}function Mo(e,t,n,r,o){let i;if(c(t)&&t.error){return xo(e,t.error)}if(u(t)||a(t,"DOMException")){const o=t;if("stack"in t)i=xo(e,t);else{const t=o.name||(u(o)?"DOMError":"DOMException"),s=o.message?`${t}: ${o.message}`:t;i=Ao(e,s,n,r),ee(i,s)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}if(s(t))return xo(e,t);if(f(t)||h(t)){return i=function(e,t,n,r){const o=Nt(),i=o&&o.getOptions().normalizeDepth,s={exception:{values:[{type:h(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Po(t,{isUnhandledRejection:r})}]},extra:{__serialized__:pt(t,i)}};if(n){const t=To(e,n);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,n,o),te(i,{synthetic:!0}),i}return i=Ao(e,t,n,r),ee(i,`${t}`,void 0),te(i,{synthetic:!0}),i}function Ao(e,t,n,r){const o={};if(r&&n){const r=To(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(d(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function Po(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(z(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return L(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:L(r,t)}return""}(e),r=t?"promise rejection":"exception";if(c(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(h(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Lo(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Fn(r)}},i=function(e){return[{type:"user_report"},e]}(e);return Wn(o,[i])}class No extends Or{constructor(e){!function(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:Ve}))),version:Ve}),e._metadata=o}(e,"browser",["browser"],_o.SENTRY_SDK_SOURCE||(0,ko.e)()),super(e),e.sendClientReports&&_o.document&&_o.document.addEventListener("visibilitychange",(()=>{"hidden"===_o.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Oo(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return Ro(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Eo&&P.warn("SDK not enabled, will not capture user feedback."));const t=Lo(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Eo&&P.log("No outcomes to send"));if(!this._dsn)return void(Eo&&P.log("No dsn provided, will not send outcomes"));Eo&&P.log("Sending outcomes:",e);const t=(n=e,Wn((r=this._options.tunnel&&Fn(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||ie(),discarded_events:n}]]));var n,r,o;this._sendEnvelope(t)}}const jo=w();function Fo(){if(!("fetch"in jo))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Bo(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function $o(){if("string"==typeof EdgeRuntime)return!0;if(!Fo())return!1;if(Bo(jo.fetch))return!0;let e=!1;const t=jo.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Bo(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){O&&P.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}let Uo;function Wo(e,t=function(){if(Uo)return Uo;if(Bo(_o.fetch))return Uo=_o.fetch.bind(_o);const e=_o.document;let t=_o.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){Eo&&P.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Uo=t.bind(_o)}()){let n=0,r=0;return $r(e,(function(o){const i=o.body.length;n+=i,r++;const s={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(n-=i,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Uo=void 0,n-=i,r--,de(e)}}))}const Ho=4;function zo(e){return $r(e,(function(t){return new pe(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{o.readyState===Ho&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const qo="?";function Vo(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const Ko=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Go=/\((\S*)(?::(\d+))(?::(\d+))\)/,Jo=[30,e=>{const t=Ko.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Go.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=ai(t[1]||qo,t[2]);return Vo(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],Yo=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Xo=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Zo=[50,e=>{const t=Yo.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Xo.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||qo;return[n,e]=ai(n,e),Vo(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],Qo=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ei=[40,e=>{const t=Qo.exec(e);return t?Vo(t[2],t[1]||qo,+t[3],t[4]?+t[4]:void 0):void 0}],ti=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ni=[10,e=>{const t=ti.exec(e);return t?Vo(t[2],t[3]||qo,+t[1]):void 0}],ri=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,oi=[20,e=>{const t=ri.exec(e);return t?Vo(t[5],t[3]||t[4]||qo,+t[1],+t[2]):void 0}],ii=[Jo,Zo,ei],si=ct(...ii),ai=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:qo,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},ci=w();const ui=b;let li;function di(e){const t="history";Gr(t,e),Jr(t,pi)}function pi(){if(!function(){const e=ci.chrome,t=e&&e.app&&e.app.runtime,n="history"in ci&&!!ci.history.pushState&&!!ci.history.replaceState;return!t&&n}())return;const e=ui.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=li,t=String(n);li=t;Yr("history",{from:e,to:t})}return e.apply(this,t)}}ui.onpopstate=function(...t){const n=ui.location.href,r=li;li=n;if(Yr("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},$(ui.history,"pushState",t),$(ui.history,"replaceState",t)}function fi(e){const t="console";Gr(t,e),Jr(t,hi)}function hi(){"console"in b&&R.forEach((function(e){e in b.console&&$(b.console,e,(function(t){return M[e]=t,function(...t){Yr("console",{args:t,level:e});const n=M[e];n&&n.apply(b.console,t)}}))}))}const mi=b,gi=1e3;let vi,yi,_i;function bi(e){Gr("dom",e),Jr("dom",wi)}function wi(){if(!mi.document)return;const e=Yr.bind(null,"dom"),t=Si(e,!0);mi.document.addEventListener("click",t,!1),mi.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=mi[t]&&mi[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&($(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,i=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},s=i[n]=i[n]||{refCount:0};if(!s.handler){const r=Si(e);s.handler=r,t.call(this,n,r,o)}s.refCount++}catch(e){}return t.call(this,n,r,o)}})),$(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},i=o[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function Si(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;U(n,"_sentryCaptured",!0),r&&!r._sentryId&&U(r,"_sentryId",X());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==yi)return!1;try{if(!e.target||e.target._sentryId!==_i)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),yi=n.type,_i=r?r._sentryId:void 0}clearTimeout(vi),vi=mi.setTimeout((()=>{_i=void 0,yi=void 0}),gi)}}const ki=b,Ei="__sentry_xhr_v3__";function Ii(e){Gr("xhr",e),Jr("xhr",xi)}function xi(){if(!ki.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;$(e,"open",(function(e){return function(...t){const n=Date.now(),r=l(t[0])?t[0].toUpperCase():void 0,o=function(e){if(l(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[Ei]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[Ei];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Yr("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?$(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),$(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[Ei];return o&&l(n)&&l(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),$(e,"send",(function(e){return function(...t){const n=this[Ei];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return Yr("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function Ti(e){const t="fetch";Gr(t,e),Jr(t,Ci)}function Ci(){$o()&&$(b,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Oi(t),method:Di(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Oi(t),method:Di(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Yr("fetch",{...o}),e.apply(b,t).then((e=>(Yr("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Yr("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function Di(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Oi(e){return"string"==typeof e?e:e?Di(e,"url")?e.url:e.toString?e.toString():"":""}const Ri=["fatal","error","warning","log","info","debug"];function Mi(e){return"warn"===e?"warning":Ri.includes(e)?e:"log"}function Ai(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const Pi=1024,Li="Breadcrumbs",Ni=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Li,setupOnce(){},setup(e){t.console&&fi(function(e){return function(t){if(Nt()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Mi(t.level),message:j(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${j(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}St(n,{input:t.args,level:t.level})}}(e)),t.dom&&bi(function(e,t){return function(n){if(Nt()!==e)return;let r,o,i="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>Pi&&(Eo&&P.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=Pi),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=I(t,{keyAttrs:i,maxStringLength:s}),o=D(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),St(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Ii(function(e){return function(t){if(Nt()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[Ei];if(!n||!r||!o)return;const{method:i,url:s,status_code:a,body:c}=o;St({category:"xhr",data:{method:i,url:s,status_code:a},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&Ti(function(e){return function(t){if(Nt()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){St({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;St({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&di(function(e){return function(t){if(Nt()!==e)return;let n=t.from,r=t.to;const o=Ai(_o.location.href);let i=n?Ai(n):void 0;const s=Ai(r);i&&i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),St({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Nt()===e&&St({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Q(t)},{event:t})}}(e))}}},ji=Gt(Li,Ni);const Fi="Dedupe",Bi=()=>{let e;return{name:Fi,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Wi(e,t))return!1;if(!Ui(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Hi(t),r=Hi(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Wi(e,t))return!1;if(!Ui(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Eo&&P.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},$i=Gt(Fi,Bi);function Ui(e,t){let n=zi(e),r=zi(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function Wi(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Hi(e){return e.exception&&e.exception.values&&e.exception.values[0]}function zi(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const qi="GlobalHandlers",Vi=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:qi,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){Zr((t=>{const{stackParser:n,attachStacktrace:r}=Yi();if(Nt()!==e||wo())return;const{msg:o,url:i,line:s,column:a,error:u}=t,d=void 0===u&&l(o)?function(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=c(e)?e.message:e,s="Error";const a=i.match(o);a&&(s=a[1],i=a[2]);const u={exception:{values:[{type:s,value:i}]}};return Gi(u,t,n,r)}(o,i,s,a):Gi(Mo(n,u||o,void 0,r,!1),i,s,a);d.level="error",bt(d,{originalException:u,mechanism:{handled:!1,type:"onerror"}})}))}(e),Ji("onerror")),t.onunhandledrejection&&(!function(e){to((t=>{const{stackParser:n,attachStacktrace:r}=Yi();if(Nt()!==e||wo())return;const o=function(e){if(p(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),i=p(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Mo(n,o,void 0,r,!0);i.level="error",bt(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Ji("onunhandledrejection"))}}},Ki=Gt(qi,Vi);function Gi(e,t,n,r){const o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,d=isNaN(parseInt(n,10))?void 0:n,p=l(t)&&t.length>0?t:T();return 0===c.length&&c.push({colno:u,filename:p,function:"?",in_app:!0,lineno:d}),e}function Ji(e){Eo&&P.log(`Global Handler attached: ${e}`)}function Yi(){const e=Nt();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Xi="HttpContext",Zi=()=>({name:Xi,setupOnce(){},preprocessEvent(e){if(!_o.navigator&&!_o.location&&!_o.document)return;const t=e.request&&e.request.url||_o.location&&_o.location.href,{referrer:n}=_o.document||{},{userAgent:r}=_o.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:o};e.request=i}}),Qi=Gt(Xi,Zi),es="LinkedErrors",ts=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:es,setupOnce(){},preprocessEvent(e,r,o){const i=o.getOptions();an(Io,i.stackParser,i.maxValueLength,n,t,e,r)}}},ns=Gt(es,ts),rs=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],os="TryCatch",is=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:os,setupOnce(){t.setTimeout&&$(_o,"setTimeout",as),t.setInterval&&$(_o,"setInterval",as),t.requestAnimationFrame&&$(_o,"requestAnimationFrame",cs),t.XMLHttpRequest&&"XMLHttpRequest"in _o&&$(XMLHttpRequest.prototype,"send",us);const e=t.eventTarget;if(e){(Array.isArray(e)?e:rs).forEach(ls)}}}},ss=Gt(os,is);function as(e){return function(...t){const n=t[0];return t[0]=So(n,{mechanism:{data:{function:lt(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function cs(e){return function(t){return e.apply(this,[So(t,{mechanism:{data:{function:"requestAnimationFrame",handler:lt(e)},handled:!1,type:"instrument"}})])}}function us(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&$(n,e,(function(t){const n={mechanism:{data:{function:e,handler:lt(t)},handled:!1,type:"instrument"}},r=H(t);return r&&(n.mechanism.data.handler=lt(r)),So(t,n)}))})),e.apply(this,t)}}function ls(e){const t=_o,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&($(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=So(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:lt(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,So(r,{mechanism:{data:{function:"addEventListener",handler:lt(r),target:e},handled:!1,type:"instrument"}}),o])}})),$(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const ds=[rn(),Zt(),is(),Ni(),Vi(),ts(),Bi(),Zi()];function ps(e){return[...ds]}function fs(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=ps()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),_o.SENTRY_RELEASE&&_o.SENTRY_RELEASE.id&&(e.release=_o.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||si,Array.isArray(n)?ct(...n):n),integrations:zt(e),transport:e.transport||(Fo()?Wo:zo)};var n;!function(e,t){!0===t.debug&&(Y?P.enable():A((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Ft().update(t.initialScope);const n=new e(t);Ln(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}(No,t),e.autoSessionTracking&&function(){if(void 0===_o.document)return void(Eo&&P.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Bt({ignoreDuration:!0}),Wt(),di((({from:e,to:t})=>{void 0!==e&&e!==t&&(Bt({ignoreDuration:!0}),Wt())}))}()}const hs=(e={},t=Ze())=>{if(!_o.document)return void(Eo&&P.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),o=e.dsn||n&&n.getDsn();if(!o)return void(Eo&&P.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const i=_o.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=function(e,t){const n=Un(e);if(!n)return"";const r=`${wr(n)}embed/error-page/`;let o=`dsn=${Fn(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(o,e),e.onLoad&&(i.onload=e.onLoad);const{onClose:s}=e;if(s){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{s()}finally{_o.removeEventListener("message",e)}};_o.addEventListener("message",e)}const a=_o.document.head||_o.document.body;a?a.appendChild(i):Eo&&P.error("Not injecting report dialog. No injection point found in HTML")};function ms(){}function gs(e){e()}function vs(e){return So(e)()}function ys(e){const t=Nt();t&&t.captureUserFeedback(e)}function _s(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function bs(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),o=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return ws(e)===ws(t)}(e,o)}function ws(e){return"/"===e[e.length-1]?e.slice(0,-1):e}var Ss=n(6284);function ks(){return"undefined"!=typeof window&&(!(0,Ss.wD)()||void 0!==b.process&&"renderer"===b.process.type)}const Es="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Is=(e,t,n)=>{let r,o;return i=>{t.value>=0&&(i||n)&&(o=t.value-(r||0),(o||void 0===r)&&(r=t.value,t.delta=o,e(t)))}},xs=b,Ts=()=>xs.__WEB_VITALS_POLYFILL__?xs.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=xs.performance.timing,t=xs.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):xs.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Cs=()=>{const e=Ts();return e&&e.activationStart||0},Ds=(e,t)=>{const n=Ts();let r="navigate";return n&&(r=xs.document&&xs.document.prerendering||Cs()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Os=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Rs=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==xs.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};xs.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},Ms=e=>{const t=Ds("CLS",0);let n,r=0,o=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const i=o[0],s=o[o.length-1];r&&0!==o.length&&e.startTime-s.startTime<1e3&&e.startTime-i.startTime<5e3?(r+=e.value,o.push(e)):(r=e.value,o=[e]),r>t.value&&(t.value=r,t.entries=o,n&&n())}}))},s=Os("layout-shift",i);if(s){n=Is(e,t);const r=()=>{i(s.takeRecords()),n(!0)};return Rs(r),r}};
/*
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let As=-1;const Ps=()=>(As<0&&(xs.document&&xs.document.visibilityState&&(As="hidden"!==xs.document.visibilityState||xs.document.prerendering?1/0:0),Rs((({timeStamp:e})=>{As=e}),!0)),{get firstHiddenTime(){return As}}),Ls=e=>{const t=Ps(),n=Ds("FID");let r;const o=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},i=e=>{e.forEach(o)},s=Os("first-input",i);r=Is(e,n),s&&Rs((()=>{i(s.takeRecords()),s.disconnect()}),!0)};let Ns=0,js=1/0,Fs=0;const Bs=e=>{e.forEach((e=>{e.interactionId&&(js=Math.min(js,e.interactionId),Fs=Math.max(Fs,e.interactionId),Ns=Fs?(Fs-js)/7+1:0)}))};let $s;const Us=()=>{"interactionCount"in performance||$s||($s=Os("event",Bs,{type:"event",buffered:!0,durationThreshold:0}))},Ws=()=>$s?Ns:performance.interactionCount||0,Hs=[],zs={},qs=e=>{const t=Hs[Hs.length-1],n=zs[e.interactionId];if(n||Hs.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};zs[t.id]=t,Hs.push(t)}Hs.sort(((e,t)=>t.latency-e.latency)),Hs.splice(10).forEach((e=>{delete zs[e.id]}))}},Vs=(e,t)=>{t=t||{},Us();const n=Ds("INP");let r;const o=e=>{e.forEach((e=>{if(e.interactionId&&qs(e),"first-input"===e.entryType){!Hs.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&qs(e)}}));const t=(()=>{const e=Math.min(Hs.length-1,Math.floor(Ws()/50));return Hs[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},i=Os("event",o,{durationThreshold:t.durationThreshold||40});r=Is(e,n,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),Rs((()=>{o(i.takeRecords()),n.value<0&&Ws()>0&&(n.value=0,n.entries=[]),r(!0)})))},Ks={},Gs=e=>{const t=Ps(),n=Ds("LCP");let r;const o=e=>{const o=e[e.length-1];if(o){const e=Math.max(o.startTime-Cs(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[o],r())}},i=Os("largest-contentful-paint",o);if(i){r=Is(e,n);const t=()=>{Ks[n.id]||(o(i.takeRecords()),i.disconnect(),Ks[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{xs.document&&addEventListener(e,t,{once:!0,capture:!0})})),Rs(t,!0),t}},Js=e=>{xs.document&&(xs.document.prerendering?addEventListener("prerenderingchange",(()=>Js(e)),!0):"complete"!==xs.document.readyState?addEventListener("load",(()=>Js(e)),!0):setTimeout(e,0))},Ys=(e,t)=>{t=t||{};const n=Ds("TTFB"),r=Is(e,n,t.reportAllChanges);Js((()=>{const e=Ts();if(e){if(n.value=Math.max(e.responseStart-Cs(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))},Xs={},Zs={};let Qs,ea,ta,na,ra;function oa(e,t=!1){return pa("lcp",e,ua,ta,t)}function ia(e,t){return fa(e,t),Zs[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);Os(e,(t=>{sa(e,{entries:t})}),t)}(e),Zs[e]=!0),ha(e,t)}function sa(e,t){const n=Xs[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){Es&&P.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${lt(r)}\nError:`,t)}}function aa(){return Ms((e=>{sa("cls",{metric:e}),Qs=e}))}function ca(){return Ls((e=>{sa("fid",{metric:e}),ea=e}))}function ua(){return Gs((e=>{sa("lcp",{metric:e}),ta=e}))}function la(){return Ys((e=>{sa("ttfb",{metric:e}),na=e}))}function da(){return Vs((e=>{sa("inp",{metric:e}),ra=e}))}function pa(e,t,n,r,o=!1){let i;return fa(e,t),Zs[e]||(i=n(),Zs[e]=!0),r&&t({metric:r}),ha(e,t,o?i:void 0)}function fa(e,t){Xs[e]=Xs[e]||[],Xs[e].push(t)}function ha(e,t,n){return()=>{n&&n();const r=Xs[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}const ma=b,ga="sentryReplaySession",va="replay_event",ya="Unable to send Replay",_a=15e4,ba=5e3,wa=2e7,Sa=36e5;function ka(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}var Ea;function Ia(e){const t=ka([e,"optionalAccess",e=>e.host]);return Boolean(ka([t,"optionalAccess",e=>e.shadowRoot])===e)}function xa(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Ta(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Ca).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function Ca(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=Ta(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Ea||(Ea={}));class Da{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=ka([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Oa({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function Ra({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Ma(e){return e.toLowerCase()}function Aa(e){return e.toUpperCase()}const Pa="__rrweb_original__";function La(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Ma(t):null}function Na(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let ja=1;const Fa=new RegExp("[^a-z0-9-_:]"),Ba=-2;function $a(){return ja++}let Ua,Wa;const Ha=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,za=/^(?:[a-z+]+:)?\/\//i,qa=/^www\..*/i,Va=/^(data:)([^,]*),(.*)/i;function Ka(e,t){return(e||"").replace(Ha,((e,n,r,o,i,s)=>{const a=r||i||s,c=n||o||"";if(!a)return e;if(za.test(a)||qa.test(a))return`url(${c}${a}${c})`;if(Va.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const u=t.split("/"),l=a.split("/");u.pop();for(const e of l)"."!==e&&(".."===e?u.pop():u.push(e));return`url(${c}${u.join("/")}${c})`}))}const Ga=/^[^ \t\n\r\u000c]+/,Ja=/^[, \t\n\r\u000c]+/;function Ya(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Xa(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Za(){const e=document.createElement("a");return e.href="",e.href}function Qa(e,t,n,r,o,i){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Ya(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(Ja),!(n>=t.length);){let i=r(Ga);if(","===i.slice(-1))i=Ya(e,i.substring(0,i.length-1)),o.push(i);else{let r="";i=Ya(e,i);let s=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((i+r).trim());break}if(s)")"===e&&(s=!1);else{if(","===e){n+=1,o.push((i+r).trim());break}"("===e&&(s=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?Ka(r,Za()):"object"===t&&"data"===n?Ya(e,r):"function"==typeof i?i(n,r,o):r:Ya(e,r):r}function ec(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function tc(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:tc(e.parentNode,t,n,r+1):-1}function nc(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function rc(e,t,n,r,o,i){try{const s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;if("INPUT"===s.tagName){const e=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(i){if(c=tc(s,nc(r,o)),c<0)return!0;a=tc(s,nc(t,n),c>=0?c:1/0)}else{if(a=tc(s,nc(t,n)),a<0)return!1;c=tc(s,nc(r,o),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!i}catch(e){}return!!i}function oc(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:h={},maskTextFn:m,maskInputFn:g,dataURLOptions:v={},inlineImages:y,recordCanvas:_,keepIframeSrcFn:b,newlyAddedElement:w=!1}=t,S=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Ea.Document,childNodes:[],compatMode:e.compatMode}:{type:Ea.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ea.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:h=!1,rootId:m,maskAllText:g,maskTextClass:v,unmaskTextClass:y,maskTextSelector:_,unmaskTextSelector:b}=t,w=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,i),S=function(e){if(e instanceof HTMLFormElement)return"form";const t=Ma(e.tagName);return Fa.test(t)?"div":t}(e);let k={};const E=e.attributes.length;for(let t=0;t<E;t++){const r=e.attributes[t];r.name&&!ec(S,r.name,r.value)&&(k[r.name]=Qa(n,S,Ma(r.name),r.value,e,c))}if("link"===S&&s){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=Ta(t)),r&&(delete k.rel,delete k.href,k._cssText=Ka(r,t.href))}if("style"===S&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=Ta(e.sheet);t&&(k._cssText=Ka(t,Za()))}if("input"===S||"textarea"===S||"select"===S||"option"===S){const t=e,n=La(t),r=Na(t,Aa(S),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=rc(t,v,_,y,b,Oa({type:n,tagName:Aa(S),maskInputOptions:a}));k.value=Ra({isMasked:e,element:t,value:r,maskInputFn:u})}o&&(k.checked=o)}"option"===S&&(e.selected&&!a.select?k.selected=!0:delete k.selected);if("canvas"===S&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,i=Pa in o?o[Pa]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(k.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(l.type,l.quality)&&(k.rr_dataURL=t)}if("img"===S&&d){Ua||(Ua=n.createElement("canvas"),Wa=Ua.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const o=()=>{t.removeEventListener("load",o);try{Ua.width=t.naturalWidth,Ua.height=t.naturalHeight,Wa.drawImage(t,0,0),k.rr_dataURL=Ua.toDataURL(l.type,l.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?k.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==S&&"video"!==S||(k.rr_mediaState=e.paused?"paused":"played",k.rr_mediaCurrentTime=e.currentTime);h||(e.scrollLeft&&(k.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(k.rr_scrollTop=e.scrollTop));if(w){const{width:t,height:n}=e.getBoundingClientRect();k={class:k.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==S||f(k.src)||(e.contentDocument||(k.rr_src=k.src),delete k.src);let I;try{customElements.get(S)&&(I=!0)}catch(e){}return{type:Ea.Element,tagName:S,attributes:k,childNodes:[],isSVG:Xa(e)||void 0,needBlock:w,rootId:m,isCustom:I}}(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:f,maskAttributeFn:c,maskInputOptions:h,maskInputFn:g,dataURLOptions:v,inlineImages:y,recordCanvas:_,keepIframeSrcFn:b,newlyAddedElement:w,rootId:S,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const f="STYLE"===d||void 0,h="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(f&&p){try{e.nextSibling||e.previousSibling||ka([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=Ta(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=Ka(p,Za())}h&&(p="SCRIPT_PLACEHOLDER");const g=rc(e,r,i,o,s,n);f||h||m||!p||!g||(p=a?a(p):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||g)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=Ra({isMasked:rc(e,r,i,o,s,Oa({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:u})}return{type:Ea.Text,textContent:p||"",isStyle:f,rootId:l}}(e,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:h,maskInputFn:g,rootId:S});case e.CDATA_SECTION_NODE:return{type:Ea.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:Ea.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function ic(e){return null==e?"":e.toLowerCase()}function sc(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:f=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:y,dataURLOptions:_={},inlineImages:b=!1,recordCanvas:w=!1,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:E=5e3,onStylesheetLoad:I,stylesheetLoadTimeout:x=5e3,keepIframeSrcFn:T=(()=>!1),newlyAddedElement:C=!1}=t;let{preserveWhiteSpace:D=!0}=t;const O=oc(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,dataURLOptions:_,inlineImages:b,recordCanvas:w,keepIframeSrcFn:T,newlyAddedElement:C});if(!O)return console.warn(e,"not serialized"),null;let R;R=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===Ea.Comment)return!0;if(e.type===Ea.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(ic(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===ic(e.attributes.name)||"icon"===ic(e.attributes.rel)||"apple-touch-icon"===ic(e.attributes.rel)||"shortcut icon"===ic(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&ic(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(ic(e.attributes.property).match(/^(og|twitter|fb):/)||ic(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===ic(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===ic(e.attributes.name)||"googlebot"===ic(e.attributes.name)||"bingbot"===ic(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===ic(e.attributes.name)||"generator"===ic(e.attributes.name)||"framework"===ic(e.attributes.name)||"publisher"===ic(e.attributes.name)||"progid"===ic(e.attributes.name)||ic(e.attributes.property).match(/^article:/)||ic(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===ic(e.attributes.name)||"yandex-verification"===ic(e.attributes.name)||"csrf-token"===ic(e.attributes.name)||"p:domain_verify"===ic(e.attributes.name)||"verify-v1"===ic(e.attributes.name)||"verification"===ic(e.attributes.name)||"shopify-checkout-api-token"===ic(e.attributes.name)))return!0}}return!1}(O,y)&&(D||O.type!==Ea.Text||O.isStyle||O.textContent.replace(/^\s+|\s+$/gm,"").length)?$a():Ba;const M=Object.assign(O,{id:R});if(r.add(e,M),R===Ba)return null;S&&S(e);let A=!p;if(M.type===Ea.Element){A=A&&!M.needBlock,delete M.needBlock;const t=e.shadowRoot;t&&xa(t)&&(M.isShadowHost=!0)}if((M.type===Ea.Document||M.type===Ea.Element)&&A){y.headWhitespace&&M.type===Ea.Element&&"head"===M.tagName&&(D=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:y,dataURLOptions:_,inlineImages:b,recordCanvas:w,preserveWhiteSpace:D,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:I,stylesheetLoadTimeout:x,keepIframeSrcFn:T};for(const n of Array.from(e.childNodes)){const e=sc(n,t);e&&M.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=sc(n,t);r&&(xa(e.shadowRoot)&&(r.isShadow=!0),M.childNodes.push(r))}}return e.parentNode&&Ia(e.parentNode)&&xa(e.parentNode)&&(M.isShadow=!0),M.type===Ea.Element&&"iframe"===M.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,i=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=setTimeout((()=>{i||(t(),i=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),i=!0,t()}))}const s="about:blank";if(r.location.href!==s||e.src===s||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&k){const n=sc(t,{doc:t,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:y,dataURLOptions:_,inlineImages:b,recordCanvas:w,preserveWhiteSpace:D,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:I,stylesheetLoadTimeout:x,keepIframeSrcFn:T});n&&k(e,n)}}),E),M.type===Ea.Element&&"link"===M.tagName&&"stylesheet"===M.attributes.rel&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const i=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(i),o=!0,t()}))}(e,(()=>{if(I){const t=sc(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:y,dataURLOptions:_,inlineImages:b,recordCanvas:w,preserveWhiteSpace:D,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:I,stylesheetLoadTimeout:x,keepIframeSrcFn:T});t&&I(e,t)}}),x),M}function ac(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function cc(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const uc="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let lc={map:{},getId(){return console.error(uc),-1},getNode(){return console.error(uc),null},removeNodeFromMap(){console.error(uc)},has(){return console.error(uc),!1},reset(){console.error(uc)}};function dc(e,t,n={}){let r=null,o=0;return function(...i){const s=Date.now();o||!1!==n.leading||(o=s);const a=t-(s-o),c=this;a<=0||a>t?(r&&(clearTimeout(r),r=null),o=s,e.apply(c,i)):r||!1===n.trailing||(r=setTimeout((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,i)}),a))}}function pc(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>pc(e,t,i||{},!0)}function fc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(lc=new Proxy(lc,{get(e,t,n){return"map"===t&&console.error(uc),Reflect.get(e,t,n)}}));let hc,mc=Date.now;function gc(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:ac([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||ac([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||ac([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:ac([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||ac([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||ac([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function vc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function yc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function _c(e,t,n,r,o){if(!e)return!1;const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!i)return!1;const s=nc(t,n);if(!o){const e=r&&i.matches(r);return s(i)&&!e}const a=tc(i,s);let c=-1;return!(a<0)&&(r&&(c=tc(i,nc(null,r))),a>-1&&c<0||a<c)}function bc(e,t){return t.getId(e)===Ba}function wc(e,t){if(Ia(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||wc(e.parentNode,t))}function Sc(e){return Boolean(e.changedTouches)}function kc(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Ec(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Ic(e){return Boolean(ac([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(mc=()=>(new Date).getTime());class xc{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();
// The MIT License (MIT)
// Copyright (c) 2012-2018 various contributors (see AUTHORS)
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// The above copyright notice and this permission notice shall be included in all
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Tc(e){let t=null;return ac([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Cc(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Tc(n);)n=t;return n}(e);return t.contains(n)}function Dc(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Cc(e))}function Oc(...e){return function(){if(hc)return hc;const e=window.document;let t=window.requestAnimationFrame;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(t=r.requestAnimationFrame),e.head.removeChild(n)}catch(e){}return hc=t.bind(window)}()(...e)}var Rc=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Rc||{}),Mc=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Mc||{}),Ac=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Ac||{}),Pc=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Pc||{});function Lc(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function Nc(e){return"__ln"in e}class jc{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Lc([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Nc(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Nc(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Fc=(e,t)=>`${e}@${t}`;class Bc{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new jc,r=e=>{let t=e,n=Ba;for(;n===Ba;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!Dc(o))return;const i=Ia(o.parentNode)?this.mirror.getId(Tc(o)):this.mirror.getId(o.parentNode),s=r(o);if(-1===i||-1===s)return n.addNode(o);const a=sc(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{kc(e,this.mirror)&&this.iframeManager.addIframe(e),Ec(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Ic(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:i,nextId:s,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Uc(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)Hc(this.droppedSet,e)||Uc(this.removes,e,this.mirror)?Hc(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),o(e.value)}const s={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(bc(e.target,this.mirror))return;let t;try{t=document.implementation.createHTMLDocument()}catch(e){t=this.doc}switch(e.type){case"characterData":{const t=e.target.textContent;_c(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:rc(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,o=e.target.getAttribute(r);if("value"===r){const t=La(n),r=n.tagName;o=Na(n,r,t);const i=Oa({maskInputOptions:this.maskInputOptions,tagName:r,type:t});o=Ra({isMasked:rc(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:n,value:o,maskInputFn:this.maskInputFn})}if(_c(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===e.oldValue)return;let i=this.attributes.find((t=>t.node===e.target));if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(o)){if(n.contentDocument)return;r="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!ec(n.tagName,r)&&(i.attributes[r]=Qa(this.doc,Ma(n.tagName),Ma(r),o,n,this.maskAttributeFn),"style"===r)){const r=t.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),o=n.style.getPropertyPriority(e);t!==r.style.getPropertyValue(e)||o!==r.style.getPropertyPriority(e)?i.styleDiff[e]=""===o?t:[t,o]:i._unchangedStyles[e]=[t,o]}for(const e of Array.from(r.style))""===n.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}break}case"childList":if(_c(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=Ia(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);_c(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||bc(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?($c(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||wc(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Fc(n,r)]?$c(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!Ia(e.target)||!xa(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(bc(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Fc(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);_c(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),Ic(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function $c(e,t){e.delete(t),t.childNodes.forEach((t=>$c(e,t)))}function Uc(e,t,n){return 0!==e.length&&Wc(e,t,n)}function Wc(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||Wc(e,r,n)}function Hc(e,t){return 0!==e.size&&zc(e,t)}function zc(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||zc(e,n))}let qc;function Vc(e){qc=e}function Kc(){qc=void 0}const Gc=e=>{if(!qc)return e;return(...t)=>{try{return e(...t)}catch(e){if(qc&&!0===qc(e))return()=>{};throw e}}};function Jc(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const Yc=[];function Xc(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Zc(e,t){const n=new Bc;Yc.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=Jc([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const i=new r(Gc((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function Qc({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(!1===s.mouseInteraction)return()=>{};const a=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,c=[];let u=null;return Object.keys(Ac).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((s=>{let a=Ma(s);const l=(t=>s=>{const a=Xc(s);if(_c(a,r,o,i,!0))return;let c=null,l=t;if("pointerType"in s){switch(s.pointerType){case"mouse":c=Pc.Mouse;break;case"touch":c=Pc.Touch;break;case"pen":c=Pc.Pen}c===Pc.Touch?Ac[t]===Ac.MouseDown?l="TouchStart":Ac[t]===Ac.MouseUp&&(l="TouchEnd"):Pc.Pen}else Sc(s)&&(c=Pc.Touch);null!==c?(u=c,(l.startsWith("Touch")&&c===Pc.Touch||l.startsWith("Mouse")&&c===Pc.Mouse)&&(c=null)):Ac[t]===Ac.Click&&(c=u,u=null);const d=Sc(s)?s.changedTouches[0]:s;if(!d)return;const p=n.getId(a),{clientX:f,clientY:h}=d;Gc(e)({type:Ac[l],id:p,x:f,y:h,...null!==c&&{pointerType:c}})})(s);if(window.PointerEvent)switch(Ac[s]){case Ac.MouseDown:case Ac.MouseUp:a=a.replace("mouse","pointer");break;case Ac.TouchStart:case Ac.TouchEnd:return}c.push(cc(a,l,t))})),Gc((()=>{c.forEach((e=>e()))}))}function eu({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){return cc("scroll",Gc(dc(Gc((s=>{const a=Xc(s);if(!a||_c(a,r,o,i,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=gc(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),s.scroll||100)),t)}const tu=["INPUT","TEXTAREA","SELECT"],nu=new WeakMap;function ru({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:m}){function g(e){let n=Xc(e);const l=e.isTrusted,g=n&&Aa(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||tu.indexOf(g)<0||_c(n,r,o,i,!0))return;const y=n;if(y.classList.contains(s)||a&&y.matches(a))return;const _=La(n);let b=Na(y,g,_),w=!1;const S=Oa({maskInputOptions:c,tagName:g,type:_}),k=rc(n,p,h,f,m,S);"radio"!==_&&"checkbox"!==_||(w=n.checked),b=Ra({isMasked:k,element:n,value:b,maskInputFn:u}),v(n,d?{text:b,isChecked:w,userTriggered:l}:{text:b,isChecked:w});const E=n.name;"radio"===_&&E&&w&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach((e=>{if(e!==n){const t=Ra({isMasked:k,element:e,value:Na(e,g,_),maskInputFn:u});v(e,d?{text:t,isChecked:!w,userTriggered:!1}:{text:t,isChecked:!w})}}))}function v(t,r){const o=nu.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){nu.set(t,r);const o=n.getId(t);Gc(e)({...r,id:o})}}const y=("last"===l.input?["change"]:["input","change"]).map((e=>cc(e,Gc(g),t))),_=t.defaultView;if(!_)return()=>{y.forEach((e=>e()))};const b=_.Object.getOwnPropertyDescriptor(_.HTMLInputElement.prototype,"value"),w=[[_.HTMLInputElement.prototype,"value"],[_.HTMLInputElement.prototype,"checked"],[_.HTMLSelectElement.prototype,"value"],[_.HTMLTextAreaElement.prototype,"value"],[_.HTMLSelectElement.prototype,"selectedIndex"],[_.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&y.push(...w.map((e=>pc(e[0],e[1],{set(){Gc(g)({target:this,isTrusted:!1})}},!1,_)))),Gc((()=>{y.forEach((e=>e()))}))}function ou(e){return function(e,t){if(cu("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||cu("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||cu("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||cu("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function iu(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function su({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?Jc([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Jc([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),i=Jc([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Jc([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&i?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return Jc([i,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Jc([i,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),Gc((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))):()=>{}}function au(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=Zc(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let s,a=[];const c=dc(Gc((t=>{const n=Date.now()-s;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],s=null})),i),u=Gc(dc(Gc((e=>{const t=Xc(e),{clientX:n,clientY:o}=Sc(e)?e.changedTouches[0]:e;s||(s=mc()),a.push({x:n,y:o,id:r.getId(t),timeOffset:mc()-s}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?Mc.Drag:e instanceof MouseEvent?Mc.MouseMove:Mc.TouchMove)})),o,{trailing:!1})),l=[cc("mousemove",u,n),cc("touchmove",u,n),cc("drag",u,n)];return Gc((()=>{l.forEach((e=>e()))}))}(e),i=Qc(e),s=eu(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return cc("resize",Gc(dc(Gc((()=>{const t=vc(),o=yc();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=ru(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){const a=Gc((s=>dc(Gc((i=>{const a=Xc(i);if(!a||_c(a,t,n,r,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;e({type:s,id:o.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})})),i.media||500))),c=[cc("play",a(0),s),cc("pause",a(1),s),cc("seeked",a(2),s),cc("volumechange",a(3),s),cc("ratechange",a(4),s)];return Gc((()=>{c.forEach((e=>e()))}))}(e),l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:Gc(((r,o,i)=>{const[s,a]=i,{id:c,styleId:u}=iu(o,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:s,index:a}]}),r.apply(o,i)}))});const i=r.CSSStyleSheet.prototype.deleteRule;let s,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:Gc(((r,o,i)=>{const[s]=i,{id:a,styleId:c}=iu(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:s}]}),r.apply(o,i)}))}),r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:Gc(((r,o,i)=>{const[s]=i,{id:a,styleId:c}=iu(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:s}),r.apply(o,i)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Gc(((r,o,i)=>{const[s]=i,{id:a,styleId:c}=iu(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:s}),r.apply(o,i)}))}));const c={};uu("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(uu("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),uu("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),uu("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,o])=>{u[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(u[r].insertRule,{apply:Gc(((r,o,i)=>{const[s,a]=i,{id:c,styleId:u}=iu(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:s,index:[...ou(o),a||0]}]}),r.apply(o,i)}))}),o.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:Gc(((r,o,i)=>{const[s]=i,{id:a,styleId:c}=iu(o.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...ou(o),s]}]}),r.apply(o,i)}))})})),Gc((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}))}(e,{win:n}),d=su(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:Gc(((o,s,a)=>{const[c,u,l]=a;if(n.has(c))return i.apply(s,[c,u,l]);const{id:d,styleId:p}=iu(Jc([s,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:u,priority:l},index:ou(s.parentRule)}),o.apply(s,a)}))});const s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:Gc(((o,i,a)=>{const[c]=a;if(n.has(c))return s.apply(i,[c]);const{id:u,styleId:l}=iu(Jc([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(u&&-1!==u||l&&-1!==l)&&e({id:u,styleId:l,remove:{property:c},index:ou(i.parentRule)}),o.apply(i,a)}))}),Gc((()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s}))}(e,{win:n}),f=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const s=fc(t.fonts,"add",(function(t){return function(n){return setTimeout(Gc((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=i})),r.push(s),Gc((()=>{r.forEach((e=>e()))}))}(e):()=>{},h=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e;let a=!0;const c=Gc((()=>{const e=t.getSelection();if(!e||a&&Jc([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],u=e.rangeCount||0;for(let t=0;t<u;t++){const s=e.getRangeAt(t),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=s;_c(a,r,o,i,!0)||_c(l,r,o,i,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}s({ranges:c})}));return c(),cc("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?fc(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return Gc((()=>{Yc.forEach((e=>e.reset())),r.disconnect(),o(),i(),s(),a(),c(),u(),l(),d(),p(),f(),h(),m(),g.forEach((e=>e()))}))}function cu(e){return void 0!==window[e]}function uu(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class lu{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let s=o.get(t);return s||(s=this.generateIdFn(),o.set(t,s),i.set(s,t)),s}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function du(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}class pu{constructor(){this.crossOriginIframeMirror=new lu($a),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class fu{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new lu($a),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new lu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),du([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case Rc.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Rc.IncrementalSnapshot,data:{source:Mc.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Rc.Meta:case Rc.Load:case Rc.DomContentLoaded:return!1;case Rc.Plugin:return t;case Rc.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Rc.IncrementalSnapshot:switch(t.data.source){case Mc.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Mc.Drag:case Mc.TouchMove:case Mc.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Mc.ViewportResize:return!1;case Mc.MediaInteraction:case Mc.MouseInteraction:case Mc.Scroll:case Mc.CanvasMutation:case Mc.Input:return this.replaceIds(t.data,e,["id"]),t;case Mc.StyleSheetRule:case Mc.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Mc.Font:return t;case Mc.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Mc.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),du([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Ea.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class hu{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class mu{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!xa(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Zc({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(eu({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(su({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(fc(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&Dc(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class gu{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class vu{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new xc,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:Ca(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class yu{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){Oc((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function _u(e){const t=e;return t.timestamp=mc(),t}let bu;const wu=new Da;function Su(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:f=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:v,maskAttributeFn:y,maskInputFn:_,maskTextFn:b,maxCanvasSize:w=null,packFn:S,sampling:k={},dataURLOptions:E={},mousemoveWait:I,recordCanvas:x=!1,recordCrossOriginIframes:T=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:D=!1,collectFonts:O=!1,inlineImages:R=!1,plugins:M,keepIframeSrcFn:A=(()=>!1),ignoreCSSAttributes:P=new Set([]),errorHandler:L,onMutation:N,getCanvasManager:j}=e;Vc(L);const F=!T||window.parent===window;let B=!1;if(!F)try{window.parent.document&&(B=!1)}catch(e){B=!0}if(F&&!t)throw new Error("emit function is required");void 0!==I&&void 0===k.mousemove&&(k.mousemove=I),wu.reset();const $=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},U=!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===v,headMetaDescKeywords:"all"===v}:v||{};let W;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let H=0;const z=e=>{for(const t of M||[])t.eventProcessor&&(e=t.eventProcessor(e));return S&&!B&&(e=S(e)),e},q=(e,o)=>{if(!_s([Yc,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||e.type===Rc.FullSnapshot||e.type===Rc.IncrementalSnapshot&&e.data.source===Mc.Mutation||Yc.forEach((e=>e.unfreeze())),F)_s([t,"optionalCall",t=>t(z(e),o)]);else if(B){const t={type:"rrweb",event:z(e),origin:window.location.origin,isCheckout:o};window.parent.postMessage(t,"*")}if(e.type===Rc.FullSnapshot)W=e,H=0;else if(e.type===Rc.IncrementalSnapshot){if(e.data.source===Mc.Mutation&&e.data.isAttachIframe)return;H++;const t=r&&H>=r,o=n&&W&&e.timestamp-W.timestamp>n;(t||o)&&ee(!0)}},V=e=>{q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.Mutation,...e}}))},K=e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.Scroll,...e}})),G=e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.CanvasMutation,...e}})),J=new vu({mutationCb:V,adoptedStyleSheetCb:e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.AdoptedStyleSheet,...e}}))}),Y="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new pu:new fu({mirror:wu,mutationCb:V,stylesheetManager:J,recordCrossOriginIframes:T,wrappedEmit:q});for(const e of M||[])e.getMirror&&e.getMirror({nodeMirror:wu,crossOriginIframeMirror:Y.crossOriginIframeMirror,crossOriginIframeStyleMirror:Y.crossOriginIframeStyleMirror});const X=new yu,Z=function(e,t){try{return e?e(t):new gu}catch(e){return console.warn("Unable to initialize CanvasManager"),new gu}}(j,{mirror:wu,win:window,mutationCb:e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.CanvasMutation,...e}})),recordCanvas:x,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:w,sampling:k.canvas,dataURLOptions:E,errorHandler:L}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new hu:new mu({mutationCb:V,scrollCb:K,bypassOptions:{onMutation:N,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:h,maskInputOptions:$,dataURLOptions:E,maskAttributeFn:y,maskTextFn:b,maskInputFn:_,recordCanvas:x,inlineImages:R,sampling:k,slimDOMOptions:U,iframeManager:Y,stylesheetManager:J,canvasManager:Z,keepIframeSrcFn:A,processedNodeManager:X},mirror:wu}),ee=(e=!1)=>{q(_u({type:Rc.Meta,data:{href:window.location.href,width:yc(),height:vc()}}),e),J.reset(),Q.init(),Yc.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new Da,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:f=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOM:y=!1,dataURLOptions:_,preserveWhiteSpace:b,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:x=(()=>!1)}=t||{};return sc(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===h?{}:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===y,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===y?{}:y,dataURLOptions:_,inlineImages:p,recordCanvas:f,preserveWhiteSpace:b,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:x,newlyAddedElement:!1})}(document,{mirror:wu,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:h,maskAllInputs:$,maskAttributeFn:y,maskInputFn:_,maskTextFn:b,slimDOM:U,dataURLOptions:E,recordCanvas:x,inlineImages:R,onSerialize:e=>{kc(e,wu)&&Y.addIframe(e),Ec(e,wu)&&J.trackLinkElement(e),Ic(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{Y.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{J.attachLinkElement(e,t)},keepIframeSrcFn:A});if(!t)return console.warn("Failed to snapshot the document");q(_u({type:Rc.FullSnapshot,data:{node:t,initialOffset:gc(window)}})),Yc.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&J.adoptStyleSheets(document.adoptedStyleSheets,wu.getId(document))};bu=ee;try{const e=[],t=e=>Gc(au)({onMutation:N,mutationCb:V,mousemoveCb:(e,t)=>q(_u({type:Rc.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.MouseInteraction,...e}})),scrollCb:K,viewportResizeCb:e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.ViewportResize,...e}})),inputCb:e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.Input,...e}})),mediaInteractionCb:e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.MediaInteraction,...e}})),styleSheetRuleCb:e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.StyleSheetRule,...e}})),styleDeclarationCb:e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.StyleDeclaration,...e}})),canvasMutationCb:G,fontCb:e=>q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.Font,...e}})),selectionCb:e=>{q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.Selection,...e}}))},customElementCb:e=>{q(_u({type:Rc.IncrementalSnapshot,data:{source:Mc.CustomElement,...e}}))},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,maskInputOptions:$,inlineStylesheet:h,sampling:k,recordCanvas:x,inlineImages:R,userTriggeredOnInput:D,collectFonts:O,doc:e,maskAttributeFn:y,maskInputFn:_,maskTextFn:b,keepIframeSrcFn:A,blockSelector:i,unblockSelector:s,slimDOMOptions:U,dataURLOptions:E,mirror:wu,iframeManager:Y,stylesheetManager:J,shadowDomManager:Q,processedNodeManager:X,canvasManager:Z,ignoreCSSAttributes:P,plugins:_s([M,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>q(_u({type:Rc.Plugin,data:{plugin:e.name,payload:t}}))})))])||[]},{});Y.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{ee(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(cc("DOMContentLoaded",(()=>{q(_u({type:Rc.DomContentLoaded,data:{}})),"DOMContentLoaded"===C&&n()}))),e.push(cc("load",(()=>{q(_u({type:Rc.Load,data:{}})),"load"===C&&n()}),window))),()=>{e.forEach((e=>e())),X.destroy(),bu=void 0,Kc()}}catch(e){console.warn(e)}}Su.mirror=wu,Su.takeFullSnapshot=function(e){if(!bu)throw new Error("please take full snapshot after start recording");bu(e)};const ku=3;function Eu(e){return e>9999999999?e:1e3*e}function Iu(e){return e>9999999999?e/1e3:e}function xu(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:Rc.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:dt(t,10,1e3)}}),"console"===t.category))))}const Tu="button,a";function Cu(e){return e.closest(Tu)||e}function Du(e){const t=Ou(e);return t&&t instanceof Element?Cu(t):t}function Ou(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let Ru;function Mu(e){return Ru||(Ru=[],$(ma,"open",(function(e){return function(...t){if(Ru)try{Ru.forEach((e=>e()))}catch(e){}return e.apply(ma,t)}}))),Ru.push(e),()=>{const t=Ru?Ru.indexOf(e):-1;t>-1&&Ru.splice(t,1)}}class Au{constructor(e,t,n=xu){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=Mu((()=>{this._lastMutation=Lu()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!Pu.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:Iu(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Iu(e)}registerScroll(e=Date.now()){this._lastScroll=Iu(e)}registerClick(e){const t=Cu(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=Lu();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:i,clickBreadcrumb:s}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.slowClickDetected",data:{...s.data,url:ma.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:i||1}};this._addBreadcrumbEvent(t,o)}else if(i>1){const e={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.multiClick",data:{...s.data,url:ma.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const Pu=["A","BUTTON","INPUT"];function Lu(){return Date.now()/1e3}function Nu(e,t){try{if(!function(e){return e.type===ku}(t))return;const{source:n}=t.data;if(n===Mc.Mutation&&e.registerMutation(t.timestamp),n===Mc.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===Mc.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=Su.mirror.getNode(r);o instanceof HTMLElement&&n===Ac.Click&&e.registerClick(o)}}catch(e){}}function ju(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Fu;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Fu||(Fu={}));const Bu=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function $u(e){const t={};for(const n in e)if(Bu.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const Uu=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?Du(e.event):Ou(e.event),n=I(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return ju({category:`ui.${e.name}`,...Wu(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||function(e,t,n){e.handleClick(t,n)}(e.clickDetector,n,Du(t.event)),xu(e,n)};function Wu(e,t){const n=Su.mirror.getId(e),r=n&&Su.mirror.getNode(n),o=r&&Su.mirror.getMeta(r),i=o&&function(e){return e.type===Fu.Element}(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map((e=>e.type===Fu.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:$u(i.attributes)}}:{}}}function Hu(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(s)||!i)return null;const a=t||r||o,c=1===i.length;if(!a&&c)return null;const u=I(s,{maxStringLength:200})||"<unknown>",l=Wu(s,u);return ju({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}(t);n&&xu(e,n)}const zu={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:Vu(i),end:Vu(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,i=Vu(o);return{type:n,name:r,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:f,transferSize:h,type:m}=e;if(0===o)return null;return{type:`${t}.${m}`,start:Vu(f),end:Vu(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:i,redirectCount:p}}}};function qu(e){return zu[e.entryType]?zu[e.entryType](e):null}function Vu(e){return((ce||ma.performance.timeOrigin)+e)/1e3}function Ku(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(ia(e,n))})),r.push(oa((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,o=e.value,i=Vu(o);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:o,size:o,nodeId:r?Su.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const Gu="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ju='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Yu(e,t){Gu&&(P.info(e),t&&Zu(e))}function Xu(e,t){Gu&&(P.info(e),t&&setTimeout((()=>{Zu(e)}),0))}function Zu(e){St({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Qu extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class el{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>wa)throw new Qu;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Eu(e):null}}class tl{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Yu("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const i=({data:t})=>{const s=t;if(s.method===e&&s.id===n){if(this._worker.removeEventListener("message",i),!s.success)return Gu&&P.error("[Replay]",s.response),void o(new Error("Error in compression worker"));r(s.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class nl{constructor(e){this._worker=new tl(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Eu(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>wa?Promise.reject(new Qu):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Gu&&P.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class rl{constructor(e){this._fallback=new el,this._compression=new nl(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void Yu("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){Gu&&P.warn("[Replay] Failed to add events when switching buffers.",e)}}}function ol({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob([Ju]);return URL.createObjectURL(e)}();return""}();if(!t)return;Yu("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new rl(n)}catch(e){Yu("[Replay] Failed to create compression worker")}}(t);if(e)return e}return Yu("[Replay] Using simple buffer"),new el}function il(){try{return"sessionStorage"in ma&&!!ma.sessionStorage}catch(e){return!1}}function sl(e){!function(){if(!il())return;try{ma.sessionStorage.removeItem(ga)}catch(e){}}(),e.session=void 0}function al(e){return void 0!==e&&Math.random()<e}function cl(e){const t=Date.now();return{id:e.id||X(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function ul(e){if(il())try{ma.sessionStorage.setItem(ga,JSON.stringify(e))}catch(e){}}function ll({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return al(e)?"session":!!t&&"buffer"}(e,t),i=cl({sampled:o,previousSessionId:r});return n&&ul(i),i}function dl(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function pl(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return dl(e.started,t,r)||dl(e.lastActivity,n,r)}function fl(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!pl(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function hl({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},o){const i=o.stickySession&&function(e){if(!il())return null;try{const t=ma.sessionStorage.getItem(ga);if(!t)return null;const n=JSON.parse(t);return Xu("[Replay] Loading existing session",e),cl(n)}catch(e){return null}}(e);return i?fl(i,{sessionIdleExpire:t,maxReplayDuration:n})?(Xu("[Replay] Session in sessionStorage is expired, creating new one..."),ll(o,{previousSessionId:i.id})):i:(Xu("[Replay] Creating new session",e),ll(o,{previousSessionId:r}))}function ml(e,t,n){return!!vl(e,t)&&(gl(e,t,n),!0)}async function gl(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===Rc.Custom}(e))return t(e)}catch(e){return Gu&&P.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Qu?"addEventSizeExceeded":"addEvent";Gu&&P.error(t),await e.stop({reason:n});const r=Nt();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function vl(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Eu(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Yu(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function yl(e){return!e.type}function _l(e){return"transaction"===e.type}function bl(e){return"feedback"===e.type}function wl(e){const t=function(){const e=Nt();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!yl(n)&&!_l(n))return;const o=r&&r.statusCode;t&&(!o||o<200||o>=300)||(_l(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function Sl(e){return t=>{e.isEnabled()&&yl(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){xu(e,ju({category:"replay.hydrate-error"}))}}(e,t)}}function kl(e,t=!1){const n=t?wl(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!yl(t)&&!_l(t)&&!bl(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(bl(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:Rc.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return Gu&&P.log("[Replay] Ignoring error from rrweb internals",t),null;const o=function(e,t){return"buffer"===e.recordingMode&&t.message!==ya&&!(!t.exception||t.type)&&al(e.getOptions().errorSampleRate)}(e,t);return(o||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function El(e,t){return t.map((({type:t,start:n,end:r,name:o,data:i})=>{const s=e.throttledAddEvent({type:Rc.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:i}}});return"string"==typeof s?Promise.resolve(null):s}))}function Il(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(El(e,[n]),!1))))}}function xl(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Gu||!e.getOptions()._experiments.traceInternals)&&bs(t,Nt())}(e,t.name)||e.addUpdate((()=>(El(e,[t]),!0))))}function Tl(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,o=r[Ei];if(!t||!n||!o)return null;const{method:i,url:s,status_code:a}=o;return void 0===s?null:{type:"resource.xhr",name:s,start:t/1e3,end:n/1e3,data:{method:i,statusCode:a}}}(t);xl(e,n)}}function Cl(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Nl(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function Dl(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Ol(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Nl(e)];if(!e)return[void 0]}catch(t){return Gu&&P.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Gu&&P.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Rl(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Ml(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:K({method:i,statusCode:s,request:a,response:c})}}function Al(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Pl(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:i}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>_a,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,_a);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,i&&i.length>0&&(r._meta={warnings:i}),r}function Ll(e,t){return Object.keys(e).reduce(((n,r)=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=e[r]),n}),{})}function Nl(e){return new URLSearchParams(e).toString()}function jl(e,t){const n=function(e,t=ma.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(ma.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return B(n,t)}async function Fl(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=e.data,d=jl(s,n.networkDetailAllowUrls)&&!jl(s,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Ul(e[0],t);if(2===e.length)return Ul(e[1],t);return{}}(n,t):{};if(!e)return Pl(o,r,void 0);const i=Bl(n),[s,a]=Ol(i),c=Pl(o,r,s);if(a)return Rl(c,a);return c}(n,t.input,u):Al(u),f=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},o,i){if(!e&&void 0!==i)return Al(i);const s=o?$l(o.headers,r):{};if(!o||!t&&void 0!==i)return Pl(s,i,void 0);const[a,c]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Gu&&P.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return Gu&&P.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(o),u=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:o,headers:i}){try{const s=e&&e.length&&void 0===r?Cl(e,n):r;return o?Pl(i,s,t?e:void 0):Al(s)}catch(e){return Gu&&P.warn("[Replay] Failed to serialize response body",e),Pl(i,r,void 0)}}(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:i,captureDetails:e,headers:s});if(c)return Rl(u,c);return u}(d,n,t.response,l);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:p,response:f}}(e,t,n),o=Ml("resource.fetch",r);xl(n.replay,o)}catch(e){Gu&&P.error("[Replay] Failed to capture fetch breadcrumb",e)}}function Bl(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function $l(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Ul(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?$l(n,t):Array.isArray(n)?{}:Ll(n,t):{}}async function Wl(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!a||!jl(c,n.networkDetailAllowUrls)||jl(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:l,request:Al(d),response:Al(p)}}const f=a[Ei],h=f?Ll(f.request_headers,n.networkRequestHeaders):{},m=Ll(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(a),n.networkResponseHeaders),[g,v]=n.networkCaptureBodies?Ol(s):[void 0],[y,_]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Gu&&P.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Gu&&P.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Gu&&P.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(a):[void 0],b=Pl(h,d,g),w=Pl(m,p,y);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:l,request:v?Rl(b,v):b,response:_?Rl(w,_):w}}(e,t,n),o=Ml("resource.xhr",r);xl(n.replay,o)}catch(e){Gu&&P.error("[Replay] Failed to capture xhr breadcrumb",e)}}function Hl(e,t,n){const{xhr:r,input:o}=t;if(!r)return;const i=Cl(o,n.textEncoder),s=r.getResponseHeader("content-length")?Dl(r.getResponseHeader("content-length")):function(e,t,n){try{return Cl("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==i&&(e.data.request_body_size=i),void 0!==s&&(e.data.response_body_size=s)}function zl(e){const t=Nt();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(Hl(t,n,e),Wl(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:o}=t,i=Cl(r?Bl(r):void 0,n.textEncoder),s=o?Dl(o.headers.get("content-length")):void 0;void 0!==i&&(e.data.request_body_size=i),void 0!==s&&(e.data.response_body_size=s)}(t,n,e),Fl(t,n,e))}catch(e){Gu&&P.warn("Error when enriching network breadcrumb")}}(c,e,t))):(Ti(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:o}=e;if(!n)return null;const{method:i,url:s}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:s,data:{method:i,statusCode:o?o.status:void 0}}}(t);xl(e,n)}}(e)),Ii(Tl(e)))}catch(e){}}let ql=null;const Vl=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(ql===t||!t)return null;if(ql=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return ju(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>ba?(n=!0,`${e.slice(0,ba)}…`):e;if("object"==typeof e)try{const t=dt(e,7);return JSON.stringify(t).length>ba?(n=!0,`${JSON.stringify(t,null,2).slice(0,ba)}…`):t}catch(e){}return e}));return ju({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return ju(t)}(t);n&&xu(e,n)};function Kl(e){return!(!e||!e.on)}function Gl(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Jl(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(Gu&&P.warn("[Replay] Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&Nu(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!ml(e,n,o))return!0;if(!o)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;ml(e,function(e){const t=e.getOptions();return{type:Rc.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(Yu(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&ul(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function Yl({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){const s=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=Nt(),p=Ft(),f=d&&d.getTransport(),h=d&&d.getDsn();if(!(d&&f&&h&&i.sampled))return;const m={type:va,replay_start_timestamp:l/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,o);const i=await ht(e.getOptions(),r,o,t,e,Qe());if(!i)return null;i.platform=i.platform||"javascript";const s=e.getSdkMetadata&&e.getSdkMetadata(),{name:a,version:c}=s&&s.sdk||{};return i.sdk={...i.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},i}({scope:p,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),void Yu("An event processor returned `null`, will not send event.");delete g.sdkProcessingMetadata;const v=function(e,t,n,r){return Wn(Xn(e,Yn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,s,h,d.getOptions().tunnel);let y;try{y=await f.send(v)}catch(e){const t=new Error(ya);try{t.cause=e}catch(e){}throw t}if(!y)return y;if("number"==typeof y.statusCode&&(y.statusCode<200||y.statusCode>=300))throw new Xl(y.statusCode);const _=Fr({},y);if(jr(_,"replay"))throw new Zl(_);return y}class Xl extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Zl extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Ql(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await Yl(e),!0}catch(n){if(n instanceof Xl||n instanceof Zl)throw n;if(kt("Replays",{_retryCount:t.count}),Gu&&r._experiments&&r._experiments.captureExceptions&&yt(n),t.count>=3){const e=new Error(`${ya} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await Ql(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const ed="__THROTTLED";function td(e,t,n){const r=new Map;let o=!1;return(...i)=>{const s=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(s),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":ed}o=!1;const a=r.get(s)||0;return r.set(s,a+1),e(...i)}}class nd{constructor({options:e,recordingOptions:t}){nd.prototype.__init.call(this),nd.prototype.__init2.call(this),nd.prototype.__init3.call(this),nd.prototype.__init4.call(this),nd.prototype.__init5.call(this),nd.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,i;const s=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==i&&clearTimeout(i),o=i=void 0}function u(){return o&&clearTimeout(o),o=setTimeout(a,t),s&&void 0===i&&(i=setTimeout(a,s)),r}return u.cancel=c,u.flush=function(){return void 0!==o||void 0!==i?a():r},u}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=td(((e,t)=>function(e,t,n){return vl(e,t)?gl(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new Au(this,o))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Xu(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Xu("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const e=hl({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Xu("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=hl({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Su({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:Jl(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Yu("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,sl(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Yu("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Yu("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Yu("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&dl(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${ma.location.pathname}${ma.location.hash}${ma.location.search}`,t=`${ma.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===ed){const e=ju({category:"replay.throttled"});this.addUpdate((()=>!ml(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||Ft().getTransaction(),t=(e&&Ne(e).data||{})[Wr];if(e&&t&&["route","custom"].includes(t))return Ne(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=ol({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){Gu&&P.error("[Replay]",e),Gu&&this._options._experiments&&this._options._experiments.captureExceptions&&yt(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=hl({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!fl(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{ma.document.addEventListener("visibilitychange",this._handleVisibilityChange),ma.addEventListener("blur",this._handleWindowBlur),ma.addEventListener("focus",this._handleWindowFocus),ma.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=Ft(),n=Nt();t.addScopeListener(Vl(e)),bi(Uu(e)),di(Il(e)),zl(e);const r=kl(e,!Kl(n));n&&n.addEventProcessor?n.addEventProcessor(r):Ar(r),Kl(n)&&(n.on("beforeSendEvent",Sl(e)),n.on("afterSendEvent",wl(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=Ku(this)}_removeListeners(){try{ma.document.removeEventListener("visibilitychange",this._handleVisibilityChange),ma.removeEventListener("blur",this._handleWindowBlur),ma.removeEventListener("focus",this._handleWindowFocus),ma.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===ma.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=ju({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=ju({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{Hu(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;pl(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Yu("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:Rc.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(qu).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(El(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(El(e,[Gl(ma.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Ql({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=Nt();t&&t.recordDroppedEvent("send_error","replay")}}else Gu&&P.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(Gu&&P.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return Yu(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const i=this.eventBuffer;if(i&&0===this.session.segmentId&&!i.hasCheckout&&Yu("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){Gu&&P.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&ul(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=ju({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function rd(e,t,n,r){const o=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&o.push(`.${n}`),A((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),o.join(",")}const od='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',id=["content-length","content-type","accept"];let sd=!1;const ad=e=>new cd(e);class cd{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:i=!0,workerUrl:s,_experiments:a={},sessionSampleRate:c,errorSampleRate:u,maskAllText:l=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:f=750,mutationLimit:h=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:v=[],networkDetailDenyUrls:y=[],networkCaptureBodies:_=!0,networkRequestHeaders:b=[],networkResponseHeaders:w=[],mask:S=[],maskAttributes:k=["title","placeholder"],unmask:E=[],block:I=[],unblock:x=[],ignore:T=[],maskFn:C,beforeAddRecordingEvent:D,beforeErrorSampling:O,blockClass:R,blockSelector:M,maskInputOptions:A,maskTextClass:P,maskTextSelector:L,ignoreClass:N}={}){this.name=cd.id;const j=function({mask:e,unmask:t,block:n,unblock:r,ignore:o,blockClass:i,blockSelector:s,maskTextClass:a,maskTextSelector:c,ignoreClass:u}){const l={maskTextSelector:rd(e,[".sentry-mask","[data-sentry-mask]"],a,c),unmaskTextSelector:rd(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:rd(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],i,s),unblockSelector:rd(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:rd(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return i instanceof RegExp&&(l.blockClass=i),a instanceof RegExp&&(l.maskTextClass=a),l}({mask:S,unmask:E,block:I,unblock:x,ignore:T,blockClass:R,blockSelector:M,maskTextClass:P,maskTextSelector:L,ignoreClass:N});if(this._recordingOptions={maskAllInputs:d,maskAllText:l,maskInputOptions:{...A||{},password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i:i}({maskAttributes:k,maskAllText:l,privacyOptions:j,key:e,value:t,el:n}),...j,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,Sa),stickySession:o,sessionSampleRate:c,errorSampleRate:u,useCompression:i,workerUrl:s,blockAllMedia:p,maskAllInputs:d,maskAllText:l,mutationBreadcrumbLimit:f,mutationLimit:h,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:v,networkDetailDenyUrls:y,networkCaptureBodies:_,networkRequestHeaders:ud(b),networkResponseHeaders:ud(w),beforeAddRecordingEvent:D,beforeErrorSampling:O,_experiments:a},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof u&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${u} })`),this._initialOptions.errorSampleRate=u),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${od}`:od),this._isInitialized&&ks())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return sd}set _isInitialized(e){sd=e}setupOnce(){ks()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=Nt(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...K(e)};if(!n)return A((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&A((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new nd({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=Nt().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function ud(e){return[...id,...e.map((e=>e.toLowerCase()))]}function ld(){const e=Nt();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")}cd.__initStatic();var dd;function pd(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:pd(e.parentNode,t,n,r+1):-1}function fd(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(dd||(dd={}));const hd="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let md,gd={map:{},getId(){return console.error(hd),-1},getNode(){return console.error(hd),null},removeNodeFromMap(){console.error(hd)},has(){return console.error(hd),!1},reset(){console.error(hd)}};function vd(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>vd(e,t,i||{},!0)}function yd(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function _d(e,t,n,r,o){if(!e)return!1;const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!i)return!1;const s=fd(t,n);if(!o){const e=r&&i.matches(r);return s(i)&&!e}const a=pd(i,s);let c=-1;return!(a<0)&&(r&&(c=pd(i,fd(null,r))),a>-1&&c<0||a<c)}function bd(...e){return function(){if(md)return md;const e=window.document;let t=window.requestAnimationFrame;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(t=r.requestAnimationFrame),e.head.removeChild(n)}catch(e){}return md=t.bind(window)}()(...e)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(gd=new Proxy(gd,{get(e,t,n){return"map"===t&&console.error(hd),Reflect.get(e,t,n)}})),/[1-9][0-9]{12}/.test(Date.now().toString());var wd=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(wd||{});let Sd;const kd=e=>{if(!Sd)return e;return(...t)=>{try{return e(...t)}catch(e){if(Sd&&!0===Sd(e))return()=>{};throw e}}};
/*
 * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>
 * Copyright (c) 2021 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */for(var Ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Id="undefined"==typeof Uint8Array?[]:new Uint8Array(256),xd=0;xd<64;xd++)Id[Ed.charCodeAt(xd)]=xd;const Td=new Map;const Cd=(e,t,n)=>{if(!e||!Rd(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=Td.get(e);return n||(n=new Map,Td.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function Dd(e,t,n){if(e instanceof Array)return e.map((e=>Dd(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=Ed[n[t]>>2],o+=Ed[(3&n[t])<<4|n[t+1]>>4],o+=Ed[(15&n[t+1])<<2|n[t+2]>>6],o+=Ed[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Dd(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Dd(e.data,t,n),e.width,e.height]}}if(Rd(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:Cd(e,t,n)}}return e}const Od=(e,t,n)=>e.map((e=>Dd(e,t,n))),Rd=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function Md(e,t,n,r,o){const i=[];try{const s=yd(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(i,...s){if(!_d(this,t,n,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(i);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(s[0]&&"object"==typeof s[0]){const e=s[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else s.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[i,...s])}}));i.push(s)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach((e=>e()))}}function Ad(e,t,n,r,o,i,s,a){const c=[],u=Object.getOwnPropertyNames(e);for(const s of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(s))try{if("function"!=typeof e[s])continue;const u=yd(e,s,(function(e){return function(...c){const u=e.apply(this,c);if(Cd(u,a,this),"tagName"in this.canvas&&!_d(this.canvas,r,o,i,!0)){const e=Od(c,a,this),r={type:t,property:s,args:e};n(this.canvas,r)}return u}}));c.push(u)}catch(r){const o=vd(e,s,{set(e){n(this.canvas,{type:t,property:s,args:[e],setter:!0})}});c.push(o)}return c}class Pd{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:i,maxCanvasSize:s,recordCanvas:a,dataURLOptions:c,errorHandler:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,u&&(Sd=u),e.enableManualSnapshot||kd((()=>{a&&"all"===t&&this.initCanvasMutationObserver(n,r,o,i),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,i,s,{dataURLOptions:c})}))()}initCanvasFPSObserver(e,t,n,r,o,i,s){const a=Md(t,n,r,o,!0),c=this.takeSnapshot(!1,e,t,n,r,o,i,s.dataURLOptions);this.resetObservers=()=>{a(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=Md(e,t,n,r,!1),i=function(e,t,n,r,o){const i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of s)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const s=yd(t.CanvasRenderingContext2D.prototype,a,(function(i){return function(...s){return _d(this.canvas,n,r,o,!0)||setTimeout((()=>{const n=Od(s,t,this);e(this.canvas,{type:wd["2D"],property:a,args:n})}),0),i.apply(this,s)}}));i.push(s)}catch(n){const r=vd(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:wd["2D"],property:a,args:[t],setter:!0})}});i.push(r)}return()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),s=function(e,t,n,r,o,i){const s=[];return s.push(...Ad(t.WebGLRenderingContext.prototype,wd.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&s.push(...Ad(t.WebGL2RenderingContext.prototype,wd.WebGL2,e,n,r,o,0,t)),()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{o(),i(),s()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,o,i,s,a,c){const u=new Map,l=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());l.onmessage=e=>{const t=e.data,{id:n}=t;if(u.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:i,height:s}=t;this.mutationCb({id:n,type:wd["2D"],commands:[{property:"clearRect",args:[0,0,i,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,i,s]}]})};const d=1e3/t;let p,f=0;const h=t=>{f&&t-f<d||(f=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{_d(e,r,o,i,!0)||t.push(e)})),t})(c).forEach((t=>{const n=this.mirror.getId(t);if(!u.get(n)&&t.width&&t.height){if(u.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===_s([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{l.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:a,maxCanvasSize:s},[e])})).catch((e=>{kd((()=>{throw e}))()}))}}))),p=bd(h)};return p=bd(h),p}startPendingCanvasMutationFlusher(){bd((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,bd(e)};bd(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),bd((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const Ld={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Nd="ReplayCanvas",jd=1280,Fd=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,jd):jd,n?Math.min(n,jd):jd]};let o;const i=new Promise((e=>o=e));return{name:Nd,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new Pd({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...Ld[e||"medium"]||Ld.medium}},async snapshot(e){(await i).snapshot(e)}}},Bd=Gt(Nd,Fd),$d=b,Ud="#ffffff",Wd="inherit",Hd="rgba(108, 95, 199, 1)",zd={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:Ud,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"12px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:Hd,submitBorder:Hd,submitOutlineFocus:"#29232f",submitForeground:Ud,submitForegroundHover:Ud,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Wd,inputForeground:Wd,inputBorder:"var(--border)",inputOutlineFocus:Hd,formBorderRadius:"20px",formContentBorderRadius:"6px"},qd=zd,Vd={...zd,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Kd="widget",Gd="api";async function Jd({feedback:{message:e,email:t,name:n,source:r,url:o}},{includeReplay:i=!0}={}){const s=Nt(),a=s&&s.getTransport(),c=s&&s.getDsn();if(!s||!a||!c)return;const u={contexts:{feedback:{contact_email:t,name:n,message:e,url:o,source:r}},type:"feedback"};return Dt((async e=>{e.clearBreadcrumbs(),[Gd,Kd].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const o=await ht(e.getOptions(),n,r,t,e,Qe());return null===o?(e.recordDroppedEvent("event_processor","feedback",n),null):(o.platform=o.platform||"javascript",o)}({scope:e,client:s,event:u});if(!t)return;s.emit&&s.emit("beforeSendFeedback",t,{includeReplay:Boolean(i)});const n=Tr(t,c,s.getOptions()._metadata,s.getOptions().tunnel);let o;try{o=await a.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(o){if("number"==typeof o.statusCode&&(o.statusCode<200||o.statusCode>=300))throw new Error("Unable to send Feedback");return o}}))}function Yd({name:e,email:t,message:n,source:r=Gd,url:o=T()},i={}){if(!n)throw new Error("Unable to submit feedback with empty message");return Jd({feedback:{name:e,email:t,message:n,url:o,source:r}},i)}const Xd="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Zd(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Qd(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function ep({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const o=$d.document,i=o.createElement("div");i.id=e;const s=i.attachShadow({mode:"open"});return s.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${Qd("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Qd(n.dark)}\n  }\n}`:""}\n}`,r}(o,t,{dark:n,light:r})),s.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(o)),{shadow:s,host:i}}catch(e){throw P.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function tp(e,t,n){if(!e)return;e.hideError();try{return await Yd({...t,source:Kd},n)}catch(t){Xd&&P.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function np(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const rp=20,op="http://www.w3.org/2000/svg";function ip(e,t,...n){const r=$d.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)sp(r,e);return r}function sp(e,t){const n=$d.document;if(null!=t)if(Array.isArray(t))for(const n of t)sp(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function ap({buttonLabel:e,onClick:t}){const n=ip("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>$d.document.createElementNS(op,e),t=np(e("svg"),{class:"feedback-icon",width:`${rp}`,height:`${rp}`,viewBox:`0 0 ${rp} ${rp}`,fill:"none"}),n=np(e("g"),{clipPath:"url(#clip0_57_80)"}),r=np(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),i=np(e("clipPath"),{id:"clip0_57_80"}),s=np(e("rect"),{width:`${rp}`,height:`${rp}`,fill:"white"});return i.appendChild(s),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(s),{get el(){return t}}}().el,e?ip("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function cp(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function up({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:o,messagePlaceholder:i,isRequiredLabel:s,cancelButtonLabel:a,submitButtonLabel:c,showName:u,showEmail:l,isNameRequired:d,isEmailRequired:p,defaultName:f,defaultEmail:h,onCancel:m,onSubmit:g}){const{el:v}=function({label:e}){return{el:ip("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:c});const y=ip("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const _=ip("input",{id:"name",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:f}),b=ip("input",{id:"email",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:h}),w=ip("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:i}),S=ip("button",{type:"button",className:"btn btn--default","aria-label":a,onClick:e=>{m&&m(e)}},a),k=ip("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(g){const t=new FormData(e.target),n={name:cp(t,"name"),email:cp(t,"email"),message:cp(t,"message")};g(n)}}catch(e){}}},[y,u&&ip("label",{htmlFor:"name",className:"form__label"},[ip("span",{className:"form__label__text"},e,d&&ip("span",{className:"form__label__text--required"},` ${s}`)),_]),!u&&_,l&&ip("label",{htmlFor:"email",className:"form__label"},[ip("span",{className:"form__label__text"},n,p&&ip("span",{className:"form__label__text--required"},` ${s}`)),b]),!l&&b,ip("label",{htmlFor:"message",className:"form__label"},[ip("span",{className:"form__label__text"},o,ip("span",{className:"form__label__text--required"},` ${s}`)),w]),ip("div",{className:"btn-group"},[v,S])]);return{get el(){return k},showError:function(e){y.textContent=e,y.classList.remove("form__error-container--hidden"),y.setAttribute("aria-hidden","false")},hideError:function(){y.textContent="",y.classList.add("form__error-container--hidden"),y.setAttribute("aria-hidden","true")}}}const lp="http://www.w3.org/2000/svg";function dp({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:o,isEmailRequired:i,colorScheme:s,defaultName:a,defaultEmail:c,onClosed:u,onCancel:l,onSubmit:d,...p}){let f=null;function h(){f&&(f.open=!1)}const{el:m,showError:g,hideError:v}=up({showEmail:r,showName:n,isEmailRequired:i,isNameRequired:o,defaultName:a,defaultEmail:c,onSubmit:d,onCancel:l,...p});return f=ip("dialog",{className:"dialog",open:!0,onClick:function(){h(),u&&u()}},ip("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},ip("h2",{className:"dialog__header"},e,t&&ip("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>$d.document.createElementNS(lp,e),n=np(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=np(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const o=t("defs"),i=t("style");return i.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(i.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),o.append(i),n.append(o),{get el(){return n}}}({colorScheme:s}).el)),m)),{get el(){return f},showError:g,hideError:v,open:function(){f&&(f.open=!0)},close:h,checkIsOpen:function(){return f&&!0===f.open||!1}}}const pp=16,fp=17,hp="http://www.w3.org/2000/svg";function mp({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=ip("div",{className:"success-message",onClick:n},function(){const e=e=>$d.document.createElementNS(hp,e),t=np(e("svg"),{class:"success-icon",width:`${pp}`,height:`${fp}`,viewBox:`0 0 ${pp} ${fp}`,fill:"none"}),n=np(e("g"),{clipPath:"url(#clip0_57_156)"}),r=np(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=np(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const i=e("defs"),s=np(e("clipPath"),{id:"clip0_57_156"}),a=np(e("rect"),{width:`${pp}`,height:`${pp}`,fill:"white",transform:"translate(0 0.5)"});return s.appendChild(a),i.appendChild(s),t.appendChild(i).appendChild(s).appendChild(a),{get el(){return t}}}().el,e);return{el:r,remove:n}}function gp({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let o,i,s=!1;async function a(t){if(!i)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void i.showError(`Please enter in the following required fields: ${r.join(", ")}`);await tp(i,t)?(f(),function(){if(e)try{const t=mp({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),u()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){P.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){const e=Nt(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{Xd&&P.error(e)}))}function u(){o&&o.show()}function l(){o&&o.hide()}function d(){try{if(i)return i.open(),s=!0,n.onFormOpen&&n.onFormOpen(),void c();const t=n.useSentryUser,r=Ft(),o=r&&r.getUser();if(i=dp({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&o&&o[t.name]||"",defaultEmail:t&&o&&o[t.email]||"",onClosed:()=>{u(),s=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),u()},onSubmit:a}),!i.el)throw new Error("Unable to open Feedback dialog");e.appendChild(i.el),l(),n.onFormOpen&&n.onFormOpen(),c()}catch(e){P.error(e)}}function p(){i&&(i.close(),s=!1,n.onFormClose&&n.onFormClose())}function f(){if(i){p();const e=i.el;e&&e.remove(),i=void 0}}function h(){s||d(),l()}return r?r.addEventListener("click",h):t&&(o=ap({buttonLabel:n.buttonLabel,onClick:h}),o.el&&e.appendChild(o.el)),{get actor(){return o},get dialog(){return i},showActor:u,hideActor:l,removeActor:function(){o&&o.el&&o.el.remove()},openDialog:d,closeDialog:p,removeDialog:f}}const vp=$d.document,yp=e=>new _p(e);class _p{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:o=!0,showEmail:i=!0,showName:s=!0,useSentryUser:a={email:"email",name:"username"},themeDark:c,themeLight:u,colorScheme:l="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:f="Send Bug Report",formTitle:h="Report a Bug",emailPlaceholder:m="your.email@example.org",emailLabel:g="Email",messagePlaceholder:v="What's the bug? What did you expect?",messageLabel:y="Description",namePlaceholder:_="Your Name",nameLabel:b="Name",isRequiredLabel:w="(required)",successMessageText:S="Thank you for your report!",onFormClose:k,onFormOpen:E,onSubmitError:I,onSubmitSuccess:x}={}){this.name=_p.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:o,id:t,isEmailRequired:n,isNameRequired:r,showEmail:i,showName:s,useSentryUser:a,colorScheme:l,themeDark:{...Vd,...c},themeLight:{...qd,...u},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:f,formTitle:h,emailLabel:g,emailPlaceholder:m,messageLabel:y,messagePlaceholder:v,nameLabel:b,namePlaceholder:_,isRequiredLabel:w,successMessageText:S,onFormClose:k,onFormOpen:E,onSubmitError:I,onSubmitSuccess:x}}setupOnce(){if(ks())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){Xd&&P.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=Zd(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?vp.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return Xd&&P.error("[Feedback] Unable to attach to target element"),null;const o=gp({shadow:t,options:n,attachTo:r});return this._widgets.add(o),this._widget||(this._widget=o),o}))}catch(e){return Xd&&P.error(e),null}}createWidget(e){try{return this._createWidget(Zd(this.options,e||{}))}catch(e){return Xd&&P.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){Xd&&P.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=vp.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=gp({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  line-height: 25px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 12px 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(vp)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:o,themeDark:i}=e,{shadow:s,host:a}=ep({id:t,colorScheme:r,themeLight:o,themeDark:i});this._shadow=s,this._host=a,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&vp.body.appendChild(this._host),r}}_p.__initStatic();const bp="SessionTiming",wp=()=>{const e=Date.now();return{name:bp,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};Gt(bp,wp);
// Copyright Joyent, Inc.and other Node contributors.
// distribute, sublicense, and/or sell copies of the Software, and to permit
// The above copyright notice and this permission notice shall be included
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
function Sp(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const kp=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Ep(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=kp.exec(t);return n?n.slice(1):[]}function Ip(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=Sp(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function xp(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}const Tp="RewriteFrames",Cp=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(e=>{if(!e.filename)return e;const r=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),o=/^\//.test(e.filename);if(r||o){const o=r?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,i=t?function(e,t){e=Ip(e).slice(1),t=Ip(t).slice(1);const n=xp(e.split("/")),r=xp(t.split("/")),o=Math.min(n.length,r.length);let i=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){i=e;break}let s=[];for(let e=i;e<n.length;e++)s.push("..");return s=s.concat(r.slice(i)),s.join("/")}(t,o):function(e,t){let n=Ep(e)[2];return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n}(o);e.filename=`${n}${i}`}return e});return{name:Tp,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>r(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}},Dp=(Gt(Tp,Cp),b),Op="ReportingObserver",Rp=new WeakMap,Mp=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(Rp.has(Nt()))for(const t of e)Dt((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}_t(`${n}: ${r}`)}))}return{name:Op,setupOnce(){if(!("ReportingObserver"in jo))return;new Dp.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){Rp.set(e,!0)}}},Ap=(Gt(Op,Mp),"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__),Pp="HttpClient",Lp=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:Pp,setupOnce(){},setup(e){!function(e,t){if(!$o())return;Ti((n=>{if(Nt()!==e)return;const{response:r,args:o}=n,[i,s]=o;r&&function(e,t,n,r){if(Fp(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,i,s,a;$p()&&([{headers:o,cookies:s},{headers:i,cookies:a}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=jp(t))}catch(t){Ap&&P.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:r}})));bt(Bp({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:i,requestCookies:s,responseCookies:a}))}}(t,i,r,s)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in b))return;Ii((n=>{if(Nt()!==e)return;const r=n.xhr,o=r[Ei];if(!o)return;const{method:i,request_headers:s}=o;try{!function(e,t,n,r){if(Fp(e,t.status,t.responseURL)){let e,o,i;if($p()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=jp(e))}catch(e){Ap&&P.log("Could not extract cookies from response headers")}try{i=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}(t)}catch(e){Ap&&P.log("Could not extract headers from response")}e=r}bt(Bp({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:i,responseCookies:o}))}}(t,r,i,s)}catch(e){Ap&&P.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};Gt(Pp,Lp);function Np(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function jp(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{})}function Fp(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!bs(n,Nt());var r,o}function Bp(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Np(e.responseHeaders)}}};return te(n,{type:"http.client",handled:!1}),n}function $p(){const e=Nt();return!!e&&Boolean(e.getOptions().sendDefaultPii)}const Up="CaptureConsole",Wp=(e={})=>{const t=e.levels||R;return{name:Up,setupOnce(){},setup(e){"console"in b&&fi((({args:n,level:r})=>{Nt()===e&&t.includes(r)&&function(e,t){const n={level:Mi(t),extra:{arguments:e}};Dt((r=>{if(r.addEventProcessor((e=>(e.logger="console",te(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${j(e.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",e.slice(1)),void _t(t,n)}const o=e.find((e=>e instanceof Error));if("error"===t&&o)return void yt(o,n);_t(j(e," "),n)}))}(n,r)}))}}};Gt(Up,Wp);const Hp=b,zp="ContextLines",qp=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:zp,setupOnce(){},processEvent(e){return function(e,t){const n=Hp.document,r=Hp.location&&(o=Hp.location.href,o.split(/[\?#]/,1)[0]);var o;if(!n||!r)return e;const i=e.exception&&e.exception.values;if(!i||!i.length)return e;const s=n.documentElement.innerHTML;if(!s)return e;const a=["<!DOCTYPE html>","<html>",...s.split("\n"),"</html>"];return i.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>N(e,0))),t.context_line=N(e[Math.min(r-1,o)],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>N(e,0)))}(t,e,r),e}(e,a,r,t))))})),e}(e,t)}}};Gt(zp,qp);const Vp="Debug",Kp=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:Vp,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,A((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}},Gp=(Gt(Vp,Kp),"Dedupe"),Jp=()=>{let e;return{name:Gp,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Xp(e,t))return!1;if(!Yp(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Zp(t),r=Zp(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Xp(e,t))return!1;if(!Yp(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Ap&&P.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};Gt(Gp,Jp);function Yp(e,t){let n=Qp(e),r=Qp(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function Xp(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Zp(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Qp(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const ef="ExtraErrorData",tf=(e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:ef,setupOnce(){},processEvent(e,r){return function(e,t={},n,r){if(!t.originalException||!s(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,i=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const o=e[t];r[t]=s(o)?o.toString():o}if(t&&void 0!==e.cause&&(r.cause=s(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=s(n)?n.toString():n}}return r}catch(e){Ap&&P.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r);if(i){const t={...e.contexts},r=dt(i,n);return f(r)&&(U(r,"__sentry_skip_normalization__",!0),t[o]=r),{...e,contexts:t}}return e}(e,r,t,n)}}};Gt(ef,tf);function nf(){xs.document?xs.document.addEventListener("visibilitychange",(()=>{const e=Mn();if(xs.document.hidden&&e){const t="cancelled",{op:n,status:r}=Ne(e);Es&&P.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):Es&&P.warn("[Tracing] Could not set up background tab detection due to lack of global document")}function rf(e){return[{type:"span"},e]}function of(e){return"number"==typeof e&&isFinite(e)}function sf(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const af=2147483647;function cf(e){return e/1e3}function uf(){return xs&&xs.addEventListener&&xs.performance}let lf,df,pf=0,ff={};function hf(){const e=uf();if(e&&ce){e.mark&&xs.performance.mark("sentry-tracing-init");const t=pa("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=cf(ce),r=cf(t.startTime);Es&&P.log("[Measurements] Adding FID"),ff.fid={value:e.value,unit:"millisecond"},ff["mark.fid"]={value:n+r,unit:"second"}}),ca,ea),n=function(e,t=!1){return pa("cls",e,aa,Qs,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Es&&P.log("[Measurements] Adding CLS"),ff.cls={value:e.value,unit:""},df=t)}),!0),r=oa((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Es&&P.log("[Measurements] Adding LCP"),ff.lcp={value:e.value,unit:"millisecond"},lf=t)}),!0),o=function(e){return pa("ttfb",e,la,na)}((({metric:e})=>{e.entries[e.entries.length-1]&&(Es&&P.log("[Measurements] Adding TTFB"),ff.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),o()}}return()=>{}}function mf(){ia("longtask",(({entries:e})=>{for(const t of e){const e=Mn();if(!e)return;const n=cf(ce+t.startTime),r=cf(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function gf(){ia("event",(({entries:e})=>{for(const t of e){const e=Mn();if(!e)return;if("click"===t.name){const n=cf(ce+t.startTime),r=cf(t.duration),o={description:I(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},i=D(t.target);i&&(o.attributes={"ui.component_name":i}),e.startChild(o)}}}))}function vf(e,t){if(uf()&&ce){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==yf[e.name])),o=Nt();if(!r||!o)return;const i=yf[r.name],s=o.getOptions(),a=cf(ce+r.startTime),c=cf(n.value),u=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===u)return;const{routeName:l,parentContext:d,activeTransaction:p,user:f,replayId:h}=u,m=void 0!==f?f.email||f.id||f.ip_address:void 0,g=void 0!==p?p.getProfileId():void 0,v=new so({startTimestamp:a,endTimestamp:a+c,op:`ui.interaction.${i}`,name:I(r.target),attributes:{release:s.release,environment:s.environment,transaction:l,...void 0!==m&&""!==m?{user:m}:{},...void 0!==g?{profile_id:g}:{},...void 0!==h?{replay_id:h}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),y=function(e,t,n){if(!vn(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:xs.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,ho(r)?!0===r?n:!1===r?0:r*n:(Es&&P.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,s,t);if(y&&Math.random()<y){const e=v?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=Fn(t)),Wn(n,e.map(rf))}([v],o.getDsn()):void 0,t=o&&o.getTransport();t&&e&&t.send(e).then(null,(e=>{Es&&P.error("Error while sending interaction:",e)}))}},pa("inp",n,da,ra);var n}(e,t);return()=>{n()}}return()=>{}}const yf={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function _f(e){const t=uf();if(!t||!xs.performance.getEntries||!ce)return;Es&&P.log("[Tracing] Adding & adjusting spans using Performance API");const n=cf(ce),r=t.getEntries(),{op:o,start_timestamp:i}=Ne(e);if(r.slice(pf).forEach((t=>{const r=cf(t.startTime),o=cf(t.duration);if(!("navigation"===e.op&&i&&n+r<i))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{bf(e,t,r,n)})),bf(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),bf(e,t,"fetch",n,"cache","domainLookupStart"),bf(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(sf(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+cf(t.requestStart),endTimestamp:n+cf(t.responseEnd)}),sf(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+cf(t.responseStart),endTimestamp:n+cf(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const i=o+n,s=i+r;sf(e,{description:t.name,endTimestamp:s,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i})}(e,t,r,o,n);const i=Ps(),s=t.startTime<i.firstHiddenTime;"first-paint"===t.name&&s&&(Es&&P.log("[Measurements] Adding FP"),ff.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&s&&(Es&&P.log("[Measurements] Adding FCP"),ff.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,i){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const s=Ai(n),a={};wf(a,t,"transferSize","http.response_transfer_size"),wf(a,t,"encodedBodySize","http.response_content_length"),wf(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus);s.protocol&&(a["url.scheme"]=s.protocol.split(":").pop());s.host&&(a["server.address"]=s.host);a["url.same_origin"]=n.includes(xs.location.origin);const c=i+r,u=c+o;sf(e,{description:n.replace(xs.location.origin,""),endTimestamp:u,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}(e,t,t.name,r,o,n)}})),pf=Math.max(r.length-1,0),function(e){const t=xs.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),of(n.rtt)&&(ff["connection.rtt"]={value:n.rtt,unit:"millisecond"}));of(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);of(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e){const t=Ts();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(Es&&P.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(ff),["fcp","fp","lcp"].forEach((e=>{if(!ff[e]||!i||n>=i)return;const t=ff[e].value,r=n+cf(t),o=Math.abs(1e3*(r-i)),s=o-t;Es&&P.log(`[Measurements] Normalized ${e} from ${t} to ${o} (${s})`),ff[e].value=o}));const t=ff["mark.fid"];t&&ff.fid&&(sf(e,{description:"first input delay",endTimestamp:t.value+cf(ff.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete ff["mark.fid"]),"fcp"in ff||delete ff.cls,Object.keys(ff).forEach((e=>{Pn(e,ff[e].value,ff[e].unit)})),function(e){lf&&(Es&&P.log("[Measurements] Adding LCP Data"),lf.element&&e.setTag("lcp.element",I(lf.element)),lf.id&&e.setTag("lcp.id",lf.id),lf.url&&e.setTag("lcp.url",lf.url.trim().slice(0,200)),e.setTag("lcp.size",lf.size));df&&df.sources&&(Es&&P.log("[Measurements] Adding CLS Data"),df.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,I(t.node)))))}(e)}lf=void 0,df=void 0,ff={}}function bf(e,t,n,r,o,i){const s=i?t[i]:t[`${n}End`],a=t[`${n}Start`];a&&s&&sf(e,{op:"browser",origin:"auto.browser.browser.metrics",description:o||n,startTimestamp:r+cf(a),endTimestamp:r+cf(s)})}function wf(e,t,n,r){const o=t[n];null!=o&&o<af&&(e[r]=o)}function Sf(e,t,n,r,o="auto.http.browser"){if(!vn()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){Rn(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const s=Ft(),a=Nt(),{method:c,url:u}=e.fetchData,l=function(e){try{return new URL(e).href}catch(e){return}}(u),d=l?Ai(l).host:void 0,p=i?wn({name:`${c} ${u}`,onlyIfParent:!0,attributes:{url:u,type:"fetch","http.method":c,"http.url":l,"server.address":d,[qr]:o},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(e.fetchData.url)&&a){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,o){const i=o||n.getSpan(),s=Qe(),{traceId:a,spanId:c,sampled:u,dsc:l}={...s.getPropagationContext(),...n.getPropagationContext()},d=i?Ae(i):Oe(a,c,u),p=Ie(l||(i?Be(i):Fe(a,t,n))),f=r.headers||("undefined"!=typeof Request&&v(e,Request)?e.headers:void 0);if(f){if("undefined"!=typeof Headers&&v(f,Headers)){const e=new Headers(f);return e.append("sentry-trace",d),p&&e.append(be,p),e}if(Array.isArray(f)){const e=[...f,["sentry-trace",d]];return p&&e.push([be,p]),e}{const e="baggage"in f?f.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...f,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,a,s,n,p)}return p}const kf=["localhost",/^\/(?!\/)/],Ef={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:kf,tracePropagationTargets:kf};function If(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:o,shouldCreateSpanForRequest:i,enableHTTPTimings:s}={traceFetch:Ef.traceFetch,traceXHR:Ef.traceXHR,...e},a="function"==typeof i?i:e=>!0,c=e=>function(e,t){return B(e,t||kf)}(e,r||o),u={};t&&Ti((e=>{const t=Sf(e,a,c,u);if(t){const n=Cf(e.fetchData.url),r=n?Ai(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}s&&t&&xf(t)})),n&&Ii((e=>{const t=function(e,t,n,r){const o=e.xhr,i=o&&o[Ei];if(!vn()||!o||o.__sentry_own_request__||!i)return;const s=t(i.url);if(e.endTimestamp&&s){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==i.status_code&&(Rn(t,i.status_code),t.end(),delete r[e]))}const a=Ft(),c=Qe(),u=Cf(i.url),l=u?Ai(u).host:void 0,d=s?wn({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,"http.url":u,url:i.url,"server.address":l,[qr]:"auto.http.browser"},op:"http.client"}):void 0;d&&(o.__sentry_xhr_span_id__=d.spanContext().spanId,r[o.__sentry_xhr_span_id__]=d);const p=Nt();if(o.setRequestHeader&&n(i.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:r}={...c.getPropagationContext(),...a.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(be,n)}catch(e){}}(o,d?Ae(d):Oe(e,t,n),Ie(r||(d?Be(d):Fe(e,p,a))))}return d}(e,a,c,u);s&&t&&xf(t)}))}function xf(e){const{url:t}=Ne(e).data||{};if(!t||"string"!=typeof t)return;const n=ia("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!ce)return r;return[...r,["http.request.redirect_start",Tf(e.redirectStart)],["http.request.fetch_start",Tf(e.fetchStart)],["http.request.domain_lookup_start",Tf(e.domainLookupStart)],["http.request.domain_lookup_end",Tf(e.domainLookupEnd)],["http.request.connect_start",Tf(e.connectStart)],["http.request.secure_connection_start",Tf(e.secureConnectionStart)],["http.request.connection_end",Tf(e.connectEnd)],["http.request.request_start",Tf(e.requestStart)],["http.request.response_start",Tf(e.responseStart)],["http.request.response_end",Tf(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function Tf(e=0){return((ce||performance.timeOrigin)+e)/1e3}function Cf(e){try{return new URL(e,xs.location.origin).href}catch(e){return}}const Df={...co,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Ef},Of=(e={})=>{const t=!!Es&&!(!e.tracePropagationTargets&&!e.tracingOrigins);yo(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...Df,...e},r=hf(),o={};n.enableInp&&vf(o,n.interactionsSampleRate),n.enableLongTask&&mf(),n._experiments.enableInteractions&&gf();const i={name:void 0,context:void 0};function s(e){const t=Ze(),{beforeStartSpan:o,idleTimeout:s,finalTimeout:a,heartbeatInterval:c}=n,u="pageload"===e.op;let l;if(u){const t=u?Af("sentry-trace"):"",n=u?Af("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:i,sampled:s}=De(t,n);l={traceId:r,parentSpanId:i,parentSampled:s,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else l={trimEnd:!0,...e};const d=o?o(l):l;d.metadata=d.name!==l.name?{...d.metadata,source:"custom"}:d.metadata,i.name=d.name,i.context=d,!1===d.sampled&&Es&&P.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),Es&&P.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=xs,f=vo(t,d,s,a,!0,{location:p},c,u);return u&&xs.document&&(xs.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(xs.document.readyState)&&f.sendAutoFinishSignal()})),["interactive","complete"].includes(xs.document.readyState)&&f.sendAutoFinishSignal()),f.registerBeforeFinishCallback((e=>{r(),_f(e)})),f}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:a,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:l,enableHTTPTimings:d,_experiments:p}=n,f=r&&r.tracePropagationTargets,h=f||n.tracePropagationTargets;let m;Es&&t&&f&&P.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let g=xs.location&&xs.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{m&&(Es&&P.log(`[Tracing] Finishing current transaction with op: ${Ne(m).op}`),m.end()),m=s({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{m&&(Es&&P.log(`[Tracing] Finishing current transaction with op: ${Ne(m).op}`),m.end()),m=s({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&xs.location){const t={name:xs.location.pathname,startTimestamp:ce?ce/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Wr]:"url"}};Rf(e,t)}n.instrumentNavigation&&e.emit&&xs.location&&di((({to:t,from:n})=>{if(void 0===n&&g&&-1!==g.indexOf(t))g=void 0;else if(n!==t){g=void 0;const t={name:xs.location.pathname,origin:"auto.navigation.browser",attributes:{[Wr]:"url"}};Mf(e,t)}})),a&&nf(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:o,heartbeatInterval:i}=e,s="ui.action.click",a=Mn();if(a&&a.op&&["navigation","pageload"].includes(a.op))return void(Es&&P.warn(`[Tracing] Did not create ${s} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(Es&&P.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`));const{location:c}=xs,u={name:t.name,op:s,trimEnd:!0,data:{[Wr]:t.context?Lf(t.context):"url"}};n=vo(Ze(),u,r,o,!0,{location:c},i)};["click"].forEach((e=>{xs.document&&addEventListener(e,r,{once:!1,capture:!0})}))}(n,i),n.enableInp&&function(e,t){const n=({entries:n})=>{const r=Nt(),o=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,i=void 0!==o?o.getReplayId():void 0,s=Mn(),a=Ft(),c=void 0!==a?a.getUser():void 0;n.forEach((n=>{if(function(e){return"duration"in e}(n)){const r=n.interactionId;if(void 0===r)return;const o=e[r],a=n.duration,u=n.startTime,l=Object.keys(e),d=l.length>0?l.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if("first-input"===n.entryType){if(l.map((t=>e[t])).some((e=>e.duration===a&&e.startTime===u)))return}if(!r)return;if(o)o.duration=Math.max(o.duration,a);else if(l.length<Pf||void 0===d||a>e[d].duration){const n=t.name,o=t.context;n&&o&&(d&&Object.keys(e).length>=Pf&&delete e[d],e[r]={routeName:n,duration:a,parentContext:o,user:c,activeTransaction:s,replayId:i,startTime:u})}}}))};ia("event",n),ia("first-input",n)}(o,i),If({traceFetch:c,traceXHR:u,tracePropagationTargets:h,shouldCreateSpanForRequest:l,enableHTTPTimings:d})},options:n}};function Rf(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=Sn();return"pageload"===(n&&Ne(n).op)?n:void 0}function Mf(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=Sn();return"navigation"===(n&&Ne(n).op)?n:void 0}function Af(e){const t=C(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const Pf=10;function Lf(e){const t=e.attributes&&e.attributes[Wr],n=e.data&&e.data[Wr],r=e.metadata&&e.metadata.source;return t||n||r}const Nf={...co,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!xs||!xs.location)return void(Es&&P.warn("Could not initialize routing instrumentation due to invalid location"));let r,o=xs.location.href;t&&(r=e({name:xs.location.pathname,startTimestamp:ce?ce/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&di((({to:t,from:n})=>{void 0===n&&o&&-1!==o.indexOf(t)?o=void 0:n!==t&&(o=void 0,r&&(Es&&P.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:xs.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Ef};class jf{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,yo(),Es&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...Nf,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=hf(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&vf(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&mf(),this.options._experiments.enableInteractions&&gf(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:i,startTransactionOnPageLoad:s,markBackgroundTransactions:a,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:l,enableHTTPTimings:d,_experiments:p}=this.options,f=r&&r.tracePropagationTargets,h=f||this.options.tracePropagationTargets;Es&&this._hasSetTracePropagationTargets&&f&&P.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),s,i),a&&nf(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),If({traceFetch:c,traceXHR:u,tracePropagationTargets:h,shouldCreateSpanForRequest:l,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(Es&&P.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:o,heartbeatInterval:i}=this.options,s="pageload"===e.op;let a;if(s){const t=s?Ff("sentry-trace"):"",n=s?Ff("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:i,sampled:c}=De(t,n);a={traceId:r,parentSpanId:i,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else a={trimEnd:!0,...e};const c="function"==typeof n?n(a):a,u=void 0===c?{...a,sampled:!1}:c;u.metadata=u.name!==a.name?{...u.metadata,source:"custom"}:u.metadata,this._latestRoute.name=u.name,this._latestRoute.context=u,!1===u.sampled&&Es&&P.log(`[Tracing] Will not send ${u.op} transaction because of beforeNavigate.`),Es&&P.log(`[Tracing] Starting ${u.op} transaction on scope`);const{location:l}=xs,d=vo(t,u,r,o,!0,{location:l},i,s);return s&&xs.document&&(xs.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(xs.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(xs.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),_f(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,o="ui.action.click",i=Mn();if(i&&i.op&&["navigation","pageload"].includes(i.op))return void(Es&&P.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(Es&&P.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(Es&&P.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const s=this._getCurrentHub(),{location:a}=xs,c={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[Wr]:this._latestRoute.context?Bf(this._latestRoute.context):"url"}};e=vo(s,c,t,n,!0,{location:a},r)};["click"].forEach((e=>{xs.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=Nt(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,o=Mn(),i=Ft(),s=void 0!==i?i.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],i=e.duration,a=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),u=c.length>0?c.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(c.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===i&&e.startTime===a)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,i);else if(c.length<10||void 0===u||i>this._interactionIdToRouteNameMapping[u].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(u&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[u],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:i,parentContext:n,user:s,activeTransaction:o,replayId:r,startTime:a})}}}))};ia("event",e),ia("first-input",e)}}function Ff(e){const t=C(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function Bf(e){const t=e.attributes&&e.attributes[Wr],n=e.data&&e.data[Wr],r=e.metadata&&e.metadata.source;return t||n||r}const $f=100,Uf=5e3,Wf=36e5;function Hf(e,t){Y&&P.info(`[Offline]: ${e}`,t)}function zf(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let o,i=Uf;function s(e,n,r){return o=["replay_event","replay_recording","client_report"],!zn(e,((e,t)=>o.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var o}function a(e){r&&(o&&clearTimeout(o),o=setTimeout((async()=>{o=void 0;const e=await r.pop();e&&(Hf("Attempting to send previously queued event"),u(e).catch((e=>{Hf("Failed to retry sending",e)})))}),e),"number"!=typeof o&&o.unref&&o.unref())}function c(){o||(a(i),i=Math.min(2*i,Wf))}async function u(e){try{const t=await n.send(e);let r=$f;if(t)if(t.headers&&t.headers["retry-after"])r=Nr(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return a(r),i=Uf,t}catch(t){if(r&&await s(e,t,i))return await r.insert(e),c(),Hf("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&c(),{send:u,flush:e=>n.flush(e)}}}
// Copyright 2016, Jake Archibald
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//   http://www.apache.org/licenses/LICENSE-2.0
// distributed under the License is distributed on an "AS IS" BASIS,
// See the License for the specific language governing permissions and
// limitations under the License.
function qf(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function Vf(e){return qf(e.getAllKeys())}function Kf(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=qf(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await Vn(t,e.textEncoder);await function(e,t,n){return e((e=>Vf(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),qf(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>Vf(e).then((t=>{if(0!==t.length)return qf(e.get(t[0])).then((n=>(e.delete(t[0]),qf(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function o(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function i(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(o(e)))}const s=i(),a=[];for(;r.length;){const e=i(),t="number"==typeof e.length?e.length:void 0;a.push([e,t?o(t):i()])}return[s,a]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}function Gf(e){return function(e){return t=>e({...t,createStore:Kf})}(zf(e))}const Jf=1e6,Yf=String(0),Xf="main";let Zf="",Qf="",eh="",th=_o.navigator&&_o.navigator.userAgent||"",nh="";const rh=_o.navigator&&_o.navigator.language||_o.navigator&&_o.navigator.languages&&_o.navigator.languages[0]||"";const oh=_o.navigator&&_o.navigator.userAgentData;var ih;function sh(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Yf]:{name:Xf}}};if(!e.samples.length)return r;const o=e.samples[0].timestamp,i="number"==typeof performance.timeOrigin?performance.timeOrigin:ce||0,s=i-(ce||i);for(let i=0;i<e.samples.length;i++){const a=e.samples[i];if(void 0===a.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[i]={elapsed_since_start_ns:((a.timestamp+s-o)*Jf).toFixed(0),stack_id:t,thread_id:Yf};continue}let c=e.stacks[a.stackId];const u=[];for(;c;){u.push(c.frameId);const t=e.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const l={elapsed_since_start_ns:((a.timestamp+s-o)*Jf).toFixed(0),stack_id:n,thread_id:Yf};r.stacks[n]=u,r.samples[i]=l,n++}return r}(e):e}function ah(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&Eo&&P.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),i=sh(n),s=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),a="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||J,runtime:{name:"javascript",version:_o.navigator.userAgent},os:{name:Zf,version:Qf,build_number:th},device:{locale:rh,model:nh,manufacturer:th,architecture:eh,is_emulator:!1},debug_meta:{images:lh(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||X(),trace_id:o,active_thread_id:Yf,relative_start_ns:"0",relative_end_ns:(1e6*(a-s)).toFixed(0)}]}}function ch(e){return"pageload"===e.op}"object"==typeof(ih=oh)&&null!==ih&&"getHighEntropyValues"in ih&&oh.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(Zf=e.platform||"",eh=e.architecture||"",nh=e.model||"",Qf=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];th=`${t.brand} ${t.version}`}})).catch((e=>{}));const uh=new WeakMap;function lh(e){const t=b._sentryDebugIds;if(!t)return[];const n=Nt(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let i;const s=uh.get(o);s?i=s:(i=new Map,uh.set(o,i));const a=Object.keys(t).reduce(((e,n)=>{let r;const s=i.get(n);s?r=s:(r=o(n),i.set(n,r));for(let o=r.length-1;o>=0;o--){const i=r[o],s=i&&i.filename;if(i&&s){e[s]=t[n];break}}return e}),{}),c=[];for(const t of e)t&&a[t]&&c.push({type:"sourcemap",code_file:t,debug_id:a[t]});return c}let dh=!1;const ph=3e4;function fh(e){if(dh)return Eo&&P.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Eo&&P.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=Nt(),n=t&&t.getOptions();if(!n)return Eo&&P.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(Eo&&P.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(Eo&&P.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return Eo&&P.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return Eo&&P.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(Eo&&P.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function hh(e,t,n,r){return function(e){return e.samples.length<2?(Eo&&P.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(Eo&&P.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?ah(e,t,n,r):null}const mh=new Map;function gh(e){const t=mh.get(e);return t&&mh.delete(e),t}function vh(e){return e?fh(e)?yh(e):e:(Eo&&P.log("[Profiling] Transaction is undefined, skipping profiling"),e)}function yh(e){let t;ch(e)&&(t=1e3*se());const n=function(){const e=_o.Profiler;if("function"!=typeof e)return void(Eo&&P.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(ph/10);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){Eo&&(P.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),P.log("[Profiling] Disabling profiling for current user session.")),dh=!0}}();if(!n)return e;Eo&&P.log(`[Profiling] started profiling transaction: ${Ne(e).description}`);const r=X();async function o(){return e&&n?n.stop().then((t=>(i&&(_o.clearTimeout(i),i=void 0),Eo&&P.log(`[Profiling] stopped profiling of transaction: ${Ne(e).description}`),t?(function(e,t){if(mh.set(e,t),mh.size>30){const e=mh.keys().next().value;mh.delete(e)}}(r,t),null):(Eo&&P.log(`[Profiling] profiler returned null profile for: ${Ne(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(Eo&&P.log("[Profiling] error while stopping profiler:",e),null))):null}let i=_o.setTimeout((()=>{Eo&&P.log("[Profiling] max profile duration elapsed, stopping profiling for:",Ne(e).description),o()}),ph);const s=e.end.bind(e);return e.end=function(){return e?(o().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),s()}),(()=>{s()})),e):s()},e}const _h="BrowserProfiling",bh=()=>({name:_h,setupOnce(){},setup(e){const t=Ft().getTransaction();t&&ch(t)&&fh(t)&&yh(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{fh(e)&&yh(e)})),e.on("beforeEnvelope",(e=>{if(!mh.size)return;const t=function(e){const t=[];return zn(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){Eo&&P.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){Eo&&P.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const i=gh(r);if(!i){Eo&&P.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const s=hh(r,o,i,e);s&&n.push(s)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):P.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),wh=Gt(_h,bh);let Sh={};_o.Sentry&&_o.Sentry.Integrations&&(Sh=_o.Sentry.Integrations);const kh={...Sh,...mn,...o}},8341:function(e,t,n){function r(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function o(){return"npm"}n.d(t,{Z:function(){return r},e:function(){return o}})},6284:function(e,t,n){n.d(t,{wD:function(){return o}});var r=n(8341);function o(){return!(0,r.Z)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}e=n.hmd(e)},5577:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(6199);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.registerVersion("firebase","10.11.1","app"),Object.keys(r).forEach((function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}))},1140:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(9790);Object.keys(r).forEach((function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}))},4316:function(e,t){t.__esModule=!0;var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.Guid=n},417:function(e,t){function n(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function r(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const o=n(r);return(e,n)=>o.then((r=>n(r.transaction(t,e).objectStore(t))))}let o;function i(){return o||(o=r("keyval-store","keyval")),o}function s(e,t){return e("readonly",(e=>(e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},n(e.transaction))))}Object.defineProperty(t,"__esModule",{value:!0}),t.clear=function(e=i()){return e("readwrite",(e=>(e.clear(),n(e.transaction))))},t.createStore=r,t.del=function(e,t=i()){return t("readwrite",(t=>(t.delete(e),n(t.transaction))))},t.entries=function(e=i()){const t=[];return s(e,(e=>t.push([e.key,e.value]))).then((()=>t))},t.get=function(e,t=i()){return t("readonly",(t=>n(t.get(e))))},t.getMany=function(e,t=i()){return t("readonly",(t=>Promise.all(e.map((e=>n(t.get(e)))))))},t.keys=function(e=i()){const t=[];return s(e,(e=>t.push(e.key))).then((()=>t))},t.promisifyRequest=n,t.set=function(e,t,r=i()){return r("readwrite",(r=>(r.put(t,e),n(r.transaction))))},t.setMany=function(e,t=i()){return t("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),n(t.transaction))))},t.update=function(e,t,r=i()){return r("readwrite",(r=>new Promise(((o,i)=>{r.get(e).onsuccess=function(){try{r.put(t(this.result),e),o(n(r.transaction))}catch(e){i(e)}}}))))},t.values=function(e=i()){const t=[];return s(e,(e=>t.push(e.value))).then((()=>t))}},1436:function(e,t,n){n.r(t),n.d(t,{deleteDB:function(){return v},openDB:function(){return g},unwrap:function(){return m},wrap:function(){return h}});const r=(e,t)=>t.some((t=>e instanceof t));let o,i;const s=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),h(s.get(this))}:function(...t){return h(e.apply(m(this),t))}:function(t,...n){const r=e.call(m(this),t,...n);return c.set(r,t.sort?t.sort():[t]),h(r)}}function f(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));a.set(e,t)}(e),r(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(h(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),l.set(t,e)),t}const m=e=>l.get(e);function g(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=h(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(h(s.result),e.oldVersion,e.newVersion,h(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),a}function v(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),h(n).then((()=>{}))}const y=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!y.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&i.done]))[0]};return b.set(t,i),i}d=(e=>({...e,get:(t,n,r)=>w(t,n)||e.get(t,n,r),has:(t,n)=>!!w(t,n)||e.has(t,n)}))(d)},4304:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var r=n(1616),o=function(){function e(e){var t=this;if(this.logExceptionInternal=function(e,n){t.logger.trackException(e,n)},this.logAndThrowExceptionInternal=function(e,n){throw t.logger.trackException(e,n),e},this.logEvent=function(e,n,r){t.logger.trackEvent(e,n,r)},null==e)throw new Error("'logger' cannot be null");this.logger=e}return e.create=function(t){if(null==t)throw new Error("'loggerProvider' cannot be null");self.LogManager=new e(t())},e.LogException=function(t,n){e.getOrCreateInstance().logExceptionInternal(t,n)},e.LogAndThrowException=function(t,n){e.getOrCreateInstance().logAndThrowExceptionInternal(t,n)},e.LogEvent=function(t,n,r){e.getOrCreateInstance().logEvent(t,n,r)},e.selectProvider=function(){return new r.LoggerStub},e.getOrCreateInstance=function(){var t=self;return null==t.LogManager&&(console.warn("LogManager was not instantiated before (in entry file). Using dummy."),t.LogManager=new e(e.selectProvider())),t.LogManager},e}();t.Logger=o},1616:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStub=void 0;var n=function(){function e(){}return e.prototype.trackException=function(e){},e.prototype.trackEvent=function(e){},e}();t.LoggerStub=n},6683:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SentryLogger=void 0;var r=n(1635),o=n(1797),i=n(1616),s=function(){function e(e){this.sentryHub=e}return e.initialize=function(){var t="https://d58a6b9c96364635b562983c2df90da8@autobugs-external.mindbox.ru/1354";if(t.indexOf("sentryDsnDefinedByDeployment")>-1)return new i.LoggerStub;var n=new o.BrowserClient({dsn:t,transport:o.makeFetchTransport,integrations:[(0,o.dedupeIntegration)(),(0,o.functionToStringIntegration)(),(0,o.globalHandlersIntegration)(),(0,o.httpContextIntegration)(),(0,o.linkedErrorsIntegration)()],stackParser:o.defaultStackParser,sampleRate:.8});return new e(new o.Hub(n))},e.prototype.trackException=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){return this.sentryHub.captureException(e,{captureContext:t}),[2]}))}))},e.prototype.trackEvent=function(e,t){return r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(n){return this.sentryHub.captureEvent(e,{captureContext:t}),[2]}))}))},e}();t.SentryLogger=s},7900:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isHostHash=void 0;var r=n(7061);t.isHostHash=function(e){try{var t=(null===self||void 0===self?void 0:self.location)||location;return e.indexOf((0,r.getHash)(t.host))>-1}catch(e){return!1}}},7061:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getHash=t.sleep=void 0;t.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))};t.getHash=function(e){e.length%32>0&&(e+=Array(33-e.length%32).join("z"));var t="",n=[],r=0,o=0,i=0,s=0,a=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","1","2","3","4","5","6","7","8","9"];for(r=0;r<e.length;r++){var c=e.charCodeAt(r);n[o++]=c<127?255&c:127}var u=Math.ceil(n.length/32);for(r=0;r<n.length;r++)o+=n[r],++i!=u&&r!=n.length-1||(t+=(s=Math.floor(o/i))<32?"0":s>126?"z":a[Math.floor((s-32)/2.76)],o=i=0);return t}},4191:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebpushApiIntegrationController=void 0;var r=n(1635),o=n(5126),i=n(6454),s=n(7838),a=n(1744),c=n(9049),u=function(){function e(e){var t=e.settingsRepository,n=e.getFetch,r=e.moduleInfo,o=void 0===r?s.webpushV2ModuleInfo:r,a=e.version,c=void 0===a?i.version:a,u=e.firebaseJsSdkVersion;this.getHeaders=function(){return{Accept:"application/json","Content-Type":"application/json"}},this.buildUri=function(e,t){return t.apiUri+e},this.settingsRepository=t,this.getFetch=n,this.moduleInfo=o,this.version=c,this.firebaseJsSdkVersion=u}return e.prototype.trackClick=function(e){return r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(t){return[2,this.sendOperation(o.WebPushOperation.TrackClick,e)]}))}))},e.prototype.trackDelivery=function(e){return r.__awaiter(this,void 0,Promise,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,this.settingsRepository.getSettings()];case 1:return t=r.sent(),[4,this.getFetch()(this.buildUri("/web-push/track-delivery?fbJsSdkVersion=".concat(this.firebaseJsSdkVersion),t),this.makeApiPostRequest(e,t))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),c.webpushLoggerProvider.logger.LogAndThrowException({error:n,type:a.WebpushLoggingType.Error}),[3,4];case 4:return[2]}}))}))},e.prototype.trackApplicationInstall=function(e){return this.sendOperation(o.WebPushOperation.ApplicationInstalled,e)},e.prototype.trackApplicationDataUpdate=function(e){return this.sendOperation(o.WebPushOperation.ApplicationDataUpdated,e)},e.prototype.sendOperation=function(e,t){return r.__awaiter(this,void 0,Promise,(function(){var n,o,i,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,this.settingsRepository.getSettings()];case 1:return n=r.sent(),(o=new FormData).append("operation",e),o.append("deviceUUID",n.deviceUUID),o.append("originDomain",n.originDomain),o.append("data",JSON.stringify(t)),n.endpointId&&o.append("endpointId",n.endpointId),i=["version=".concat(this.version),"moduleVersion=".concat(this.moduleInfo.version),"operation=".concat(e),"deviceUUID=".concat(n.deviceUUID),"originDomain=".concat(n.originDomain)],n.endpointId&&i.push("endpointId=".concat(n.endpointId)),[4,this.getFetch()(this.buildUri("/v3/js/operations/async?"+i.join("&"),n),{method:"POST",body:o})];case 2:return(s=r.sent()).ok?[2]:(c.webpushLoggerProvider.logger.LogAndThrowException({error:new Error("Status: ".concat(s.status,", ").concat(s.statusText)),type:a.WebpushLoggingType.Error}),[3,4]);case 3:return u=r.sent(),c.webpushLoggerProvider.logger.LogAndThrowException({error:u,type:a.WebpushLoggingType.Error}),[3,4];case 4:return[2]}}))}))},e.prototype.makeApiPostRequest=function(e,t){var n=r.__assign({originDomain:t.originDomain,endpointId:t.endpointId},e);return{method:"POST",headers:this.getHeaders(),body:JSON.stringify(n)}},e}();t.WebpushApiIntegrationController=u},5126:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerActionCreationType=t.WebPushPermissionState=t.WebPushOperation=void 0,function(e){e.ApplicationInstalled="WebPush.ApplicationInstalled",e.ApplicationDataUpdated="WebPush.ApplicationDataUpdated",e.TrackClick="WebPush.TrackClick"}(t.WebPushOperation||(t.WebPushOperation={})),function(e){e.Default="Default",e.Denied="Denied",e.Granted="Granted"}(t.WebPushPermissionState||(t.WebPushPermissionState={})),function(e){e.Subscribe="Subscribe",e.RestoreSubscription="RestoreSubscription"}(t.CustomerActionCreationType||(t.CustomerActionCreationType={}))},7285:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationDataUpdateService=void 0;var r=n(1635),o=n(5126),i=n(4316),s=n(281),a=n(7838),c=n(2574),u=n(5577),l=n(5474),d=n(7037),p=function(){function e(e){var t=e.integrationController,n=e.applicationDataStateRepository,r=e.notificationApi,o=void 0===r?l.NotificationPermissionManager:r,i=e.timezoneProvider,s=e.getFirebaseToken;this.integrationController=t,this.notificationApi=o,this.applicationDataStateRepository=n,this.timezoneProvider=i,this.firebaseJsSdkVersion=u.SDK_VERSION,this.getFirebaseToken=s}return e.prototype.tryUpdateApplicationData=function(e){return void 0===e&&(e=!0),r.__awaiter(this,void 0,void 0,(function(){var t,n,o,i,a,c,u,l,d=this;return r.__generator(this,(function(r){switch(r.label){case 0:return console.debug("[Mindbox.SDK] <webpush> track application data update."),t=this.notificationApi.getPermissionState(),this.notificationApi.isPermissionGranted()?[4,this.getFirebaseToken()]:[3,2];case 1:return o=r.sent(),[3,3];case 2:o=null,r.label=3;case 3:return n=o,[4,this.tryUpdateApplicationDataState({firebaseToken:n,permission:t})];case 4:if(!(i=r.sent())||i.backend.isSynced||!i.firebaseToken||!i.moduleVersion)return[2];if(a={installationId:i.installationId,applicationDataVersion:i.applicationDataVersion},this.trackingPromise){if(this.trackingPromise.isOfVersion(a))return[2];this.cancelTrackingPromise()}c=0===i.applicationDataVersion,u=c?function(){return d.getApplicationInstalledTrackingPromise(i,e)}:function(){return d.getApplicationDataUpdatedTrackingPromise(i)},this.trackingPromise=new s.TrackingPromise(a,u),r.label=5;case 5:return r.trys.push([5,8,,9]),[4,this.trackingPromise.execute()];case 6:return r.sent(),[4,this.confirmApplicationDataSync(i.installationId,i.applicationDataVersion)];case 7:return r.sent(),this.cancelTrackingPromise(),[3,9];case 8:throw l=r.sent(),this.cancelTrackingPromise(),l;case 9:return[2]}}))}))},e.prototype.getApplicationInstalledTrackingPromise=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.buildApplicationInstalledData(e,t)];case 1:return n=r.sent(),console.debug("[Mindbox.SDK] <webpush> send application data install.",n),[2,this.integrationController.trackApplicationInstall(n)]}}))}))},e.prototype.getApplicationDataUpdatedTrackingPromise=function(e){var t=this.buildApplicationDataUpdatedData(e);return console.debug("[Mindbox.SDK] <webpush> send application data update.",t),this.integrationController.trackApplicationDataUpdate(t)},e.prototype.buildApplicationDataUpdatedData=function(t){return{installationId:t.installationId,applicationDataVersion:t.applicationDataVersion,permissionState:e.requestPermissionStateMap[t.permission],token:(0,d.getTokenValue)(t.firebaseToken),dateTimeOffset:t.backend.lastRequestTs?+Date.now()-t.backend.lastRequestTs:0,ianaTimeZone:this.timezoneProvider.tryGetTimeZone(),firebaseJsSdkVersion:t.firebaseJsSdkVersion}},e.prototype.buildApplicationInstalledData=function(e,t){return r.__awaiter(this,void 0,Promise,(function(){var n;return r.__generator(this,(function(i){return n=this.buildApplicationDataUpdatedData(e),[2,r.__assign(r.__assign({},n),{customerActionCreationType:t?o.CustomerActionCreationType.RestoreSubscription:o.CustomerActionCreationType.Subscribe})]}))}))},e.prototype.tryUpdateApplicationDataState=function(e){var t=this,n=e.firebaseToken,o=e.permission;return this.applicationDataStateRepository.updateApplicationDataState((function(e){var s=a.webpushV2ModuleInfo.version,u=e&&(0,d.getTokenValue)(e.firebaseToken),l={firebaseToken:n||u,permission:o,moduleVersion:s,firebaseJsSdkVersion:t.firebaseJsSdkVersion},p=l.firebaseToken&&"granted"===o,f=!(null==e?void 0:e.permission)||"default"===e.permission||"denied"===e.permission,h=Boolean(null==e?void 0:e.moduleVersion)&&(0,c.versionGt)(e.moduleVersion,"1.19.19");if(p&&(f||!h))return r.__assign(r.__assign({},l),{installationId:i.Guid.create().toString(),applicationDataVersion:0,backend:{isSynced:!1,lastRequestTs:+Date.now()}});if(!e)return e;var m=!(0,c.versionGt)(e.moduleVersion,"1.19.69");return"granted"===e.permission&&(m||e.permission!==o||n&&u!==n)?r.__assign(r.__assign(r.__assign({},e),l),{applicationDataVersion:e.applicationDataVersion+1,backend:{isSynced:!1,lastRequestTs:+Date.now()}}):r.__assign(r.__assign({},e),l)}))},e.prototype.confirmApplicationDataSync=function(e,t){return this.applicationDataStateRepository.updateApplicationDataState((function(n){return n.installationId===e&&n.applicationDataVersion===t?r.__assign(r.__assign({},n),{backend:{lastRequestTs:null,isSynced:!0}}):n}))},e.prototype.cancelTrackingPromise=function(){this.trackingPromise&&(this.trackingPromise.cancel(),this.trackingPromise=null)},e.requestPermissionStateMap={default:o.WebPushPermissionState.Default,denied:o.WebPushPermissionState.Denied,granted:o.WebPushPermissionState.Granted},e}();t.ApplicationDataUpdateService=p},281:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingPromise=void 0;var r=n(3652),o=function(){function e(e,t){this.version=e,this.current=new r.PromiseWithRetries(t,{delayRate:2})}return e.prototype.execute=function(){return this.current.execute()},e.prototype.cancel=function(){this.current.cancel()},e.prototype.isOfVersion=function(e){return this.version.installationId===e.installationId&&this.version.applicationDataVersion===e.applicationDataVersion},e}();t.TrackingPromise=o},7037:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getTokenValue=void 0;t.getTokenValue=function(e){return e?"string"==typeof e?e:e.value:null}},6883:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationDataUpdateService=void 0;var r=n(7285);Object.defineProperty(t,"ApplicationDataUpdateService",{enumerable:!0,get:function(){return r.ApplicationDataUpdateService}})},9339:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDbRepository=void 0;var r=n(1635),o=n(417),i=function(){function e(e,t){this.store=e,this.key=t}return e.prototype.save=function(e){return r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,(0,o.set)(this.key,e,this.store)];case 1:return t.sent(),[2]}}))}))},e.prototype.tryGet=function(){return r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,(0,o.get)(this.key,this.store)];case 1:return[2,e.sent()]}}))}))},e.prototype.update=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,(0,o.update)(this.key,e,this.store)];case 1:return[2,t.sent()]}}))}))},e.prototype.get=function(){return r.__awaiter(this,void 0,Promise,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,(0,o.get)(this.key,this.store)];case 1:if(null==(e=t.sent()))throw new Error("could not find value for key '".concat(this.key,"'"));return[2,e]}}))}))},e}();t.IndexedDbRepository=i},8692:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MindboxStore=void 0;var r=n(417),o=function(){function e(t){if(null==t)throw new Error("'storeName' cannot be null");this.store=(0,r.createStore)(e.dbName,t)}return e.dbName="mindbox",e}();t.MindboxStore=o},2168:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceWorkerStore=void 0;var r=n(1635),o=function(e){function t(){return e.call(this,t.storeName)||this}return r.__extends(t,e),t.storeName="service-worker",t}(n(8692).MindboxStore);t.ServiceWorkerStore=(new o).store},7192:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceWorkerStore=t.IndexedDbRepository=void 0;var r=n(9339);Object.defineProperty(t,"IndexedDbRepository",{enumerable:!0,get:function(){return r.IndexedDbRepository}});var o=n(2168);Object.defineProperty(t,"ServiceWorkerStore",{enumerable:!0,get:function(){return o.ServiceWorkerStore}})},2346:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebpushV2Module=void 0;var r=n(1635),o=n(7628),i=n(286),s=n(6552),a=n(4885),c=n(6212),u=n(2947),l=n(9642),d=n(5186),p=n(885),f=new l.IntegrationDoctor({logger:l.ConsoleLogger,serviceWorkerContainer:d.webpushSWContainer,firebaseDatabaseDoctor:new l.FirebaseDatabaseDoctor(l.ConsoleLogger,(function(e){return new l.FirebaseDatabaseFacade(e,l.ConsoleLogger)}))}),h={create:o.create,migrate:i.migrate,checkPermission:s.checkPermission,requestPermission:a.requestPermission,subscribe:c.subscribe,getDiagnosticsInfo:u.getDiagnosticsInfo,__tryRepairIntegration:function(e,t,n){return f.tryRepairIntegration(e,n)}};t.WebpushV2Module=r.__assign(r.__assign({},h),{commands:h,hooks:{onLoad:p.onLoad}})},7838:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.addDebugHelper=t.webpushV2ModuleInfo=void 0;t.webpushV2ModuleInfo={name:"webpush_v2",src:"webpush_v2.js",modernSrc:"webpush_v2.js",version:"1.19.83",isSupportedByBrowser:function(){return navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")&&("https:"==window.location.protocol||["localhost","127.0.0.1",""].some((function(e){return e===window.location.hostname})))},requiresSdkInitialization:function(){return!0}};t.addDebugHelper=function(e,t){var n="__mindboxDebugHelpers",r=window[n];null==r&&(window[n]=r={});var o="webpush_v2",i=r[o];null==i&&(r[o]=i={}),null!=i[e]||(i[e]=t)}},1359:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},1993:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationPermissionManager=void 0;var n=function(){function e(){this.browserApi=Notification}return e.prototype.getPermissionState=function(){return this.browserApi.permission},e.prototype.isPermissionGranted=function(){return"granted"==this.getPermissionState()},e.prototype.isPermissionDefault=function(){return"default"==this.getPermissionState()},e.prototype.requestPermission=function(){return this.browserApi.requestPermission()},e}();t.NotificationPermissionManager=new n},5418:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationsController=void 0;var r=n(1635),o=n(1744),i=n(9049),s=function(){function e(e,t){this.createNotification=function(e){var t=JSON.parse(e.actions),n=t.map((function(e){return{action:e.buttonGuid,title:e.title}})),r=t.map((function(e){return{guid:e.buttonGuid,url:e.url}})),o={transactionalId:e.transactionalId,bodyGuid:e.bodyGuid,clickAction:e.clickAction,actions:r};return{body:e.body,icon:e.icon,tag:e.tag,image:e.image,badge:e.badge,requireInteraction:e.shouldRequireInteraction,data:o,actions:n}},this.notificationRendererProvider=e,this.trackingService=t}return e.prototype.showNotification=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:return null==e&&i.webpushLoggerProvider.logger.LogAndThrowException({error:new Error("'notificationData' cannot be null"),type:o.WebpushLoggingType.Error}),t=e.data,n=t.title,s=this.createNotification(t),[4,this.notificationRendererProvider()];case 1:return a=r.sent(),this.trackingService.trackDelivery(s.data.transactionalId),[4,a.showNotification(n,s)];case 2:return r.sent(),[2]}}))}))},e}();t.NotificationsController=s},3266:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WindowNotificationsController=void 0;var r=n(1635),o=function(e){function t(t,n){return e.call(this,t,n)||this}return r.__extends(t,e),t}(n(5418).NotificationsController);t.WindowNotificationsController=o},5474:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationPermissionManager=t.WindowNotificationsController=t.NotificationsController=void 0;var r=n(1635),o=n(5418);Object.defineProperty(t,"NotificationsController",{enumerable:!0,get:function(){return o.NotificationsController}});var i=n(3266);Object.defineProperty(t,"WindowNotificationsController",{enumerable:!0,get:function(){return i.WindowNotificationsController}});var s=n(1993);Object.defineProperty(t,"NotificationPermissionManager",{enumerable:!0,get:function(){return s.NotificationPermissionManager}}),r.__exportStar(n(1359),t)},5787:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsRepository=void 0;var r=n(1635),o=n(7192),i=function(e){function t(){return e.call(this,o.ServiceWorkerStore,t.settingsKey)||this}return r.__extends(t,e),t.prototype.saveSettings=function(e){return r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.save(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.getSettings=function(){return r.__awaiter(this,void 0,Promise,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this.get()];case 1:return e=n.sent(),t.validateSettings(e),[2,e]}}))}))},t.settingsKey="service-worker-settings",t.validateSettings=function(e){if(null==e)throw new Error("'settings' cannot be null");if(null==e.apiUri)throw new Error("'apiUri' cannot be null");if(null==e.originDomain)throw new Error("'originDomain' cannot be null");if(null==e.deviceUUID)throw new Error("'deviceUUID' cannot be null")},t}(o.IndexedDbRepository);t.SettingsRepository=new i},1868:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsRepository=void 0;var r=n(5787);Object.defineProperty(t,"SettingsRepository",{enumerable:!0,get:function(){return r.SettingsRepository}})},6909:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StateRepository=void 0;var r=n(1635),o=n(7192),i=function(e){function t(n){return e.call(this,o.ServiceWorkerStore,"".concat(t.statePrefix,"-").concat(n))||this}return r.__extends(t,e),t.statePrefix="webpush",t}(o.IndexedDbRepository);t.StateRepository=i},2712:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingService=void 0;var r=n(1635),o=n(3652),i=n(1744),s=n(9049),a=function(){function e(e){this.integrationController=e}return e.prototype.trackClick=function(e,t,n,a){return r.__awaiter(this,void 0,Promise,(function(){var c,u,l=this;return r.__generator(this,(function(r){switch(r.label){case 0:null==e&&s.webpushLoggerProvider.logger.LogAndThrowException({error:new Error("'transactionalId' cannot be null"),type:i.WebpushLoggingType.Error}),console.debug("[Mindbox.SDK] <webpush> tracked click for '".concat(e,"@").concat(t,"'")),r.label=1;case 1:return r.trys.push([1,3,,4]),c={messageTransactionalId:e,clickId:a,clickUrl:n},[4,new o.PromiseWithRetries((function(){return l.integrationController.trackClick(c)})).execute()];case 2:return[2,r.sent()];case 3:return u=r.sent(),s.webpushLoggerProvider.logger.LogAndThrowException({error:u,type:i.WebpushLoggingType.Error}),[3,4];case 4:return[2]}}))}))},e.prototype.trackDelivery=function(e){return r.__awaiter(this,void 0,Promise,(function(){var t,n,a=this;return r.__generator(this,(function(r){switch(r.label){case 0:null==e&&s.webpushLoggerProvider.logger.LogAndThrowException({error:new Error("'transactionalId' cannot be null"),type:i.WebpushLoggingType.Error}),console.debug("[Mindbox.SDK] <webpush> tracked delivery for '".concat(e,"'")),r.label=1;case 1:return r.trys.push([1,3,,4]),t={message:{transactionalId:e}},[4,new o.PromiseWithRetries((function(){return a.integrationController.trackDelivery(t)})).execute()];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),s.webpushLoggerProvider.logger.LogAndThrowException({error:n,type:i.WebpushLoggingType.Error}),[3,4];case 4:return[2]}}))}))},e}();t.TrackingService=a},4823:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.webpushSWContainer=t.WebpushSWContainer=void 0;var r=n(1635),o=n(8986),i=n(3217),s=function(){function e(e){void 0===e&&(e=navigator.serviceWorker),this.pathHelper=o.workerPathHelper,this.serviceWorker=e}return e.prototype.getServiceWorkerFromRegistration=function(e){return e.installing||e.waiting||e.active},e.prototype.waitRegistrationActivation=function(e){var t=this.getServiceWorkerFromRegistration(e);return new Promise((function(n){if(t)if("activated"!==t.state)if("redundant"!==t.state){var r=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;n(null)}t.removeEventListener("statechange",r)};t.addEventListener("statechange",r)}else n(null);else n(e);else n(null)}))},e.prototype.register=function(t){var n=t.scope,o=void 0===n?e.defaultScope:n,s=t.path,a=t.firebaseMessagingSettings,c=t.workerVersionsStateRepository,u=t.moduleInfo,l=t.features;return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,d;return r.__generator(this,(function(r){switch(r.label){case 0:return e=this.pathHelper.getFullPath({path:s,moduleVersion:u.version,firebaseMessagingSettings:a,features:l}),[4,c.isWorkerModuleVersionGtOrEq(u.version)];case 1:return t=r.sent(),[4,this.getRegistration()];case 2:return n=r.sent(),console.debug("[Mindbox.SDK] <".concat(u.name,"> try to register service-worker: ")+'url="'.concat(e,'", scope: "').concat(o,'"')),[4,this.serviceWorker.register("".concat(e,"&").concat(i.WEBPUSH_V2_PREFIX,"=1"),{scope:o,updateViaCache:t?"imports":"none"})];case 3:return d=r.sent(),n&&d.scope!==n.scope&&n.unregister(),[2,d]}}))}))},e.prototype.getRegistration=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this.serviceWorker.getRegistrations()];case 1:return e=n.sent(),[2,e.find((function(e){var n=t.getServiceWorkerFromRegistration(e);return t.pathHelper.isPathMatched(null==n?void 0:n.scriptURL)}))||null]}}))}))},e.prototype.getActiveServiceWorkerRegistration=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.getRegistration()];case 1:return(e=t.sent())?[4,this.waitRegistrationActivation(e)]:[2,null];case 2:return[2,t.sent()]}}))}))},e.prototype.getServiceWorker=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.getRegistration()];case 1:return(e=t.sent())?[2,this.getServiceWorkerFromRegistration(e)]:[2,null]}}))}))},e.defaultScope="/",e}();t.WebpushSWContainer=s,t.webpushSWContainer=new s},5186:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebpushSWContainer=t.webpushSWContainer=void 0;var r=n(4823);Object.defineProperty(t,"webpushSWContainer",{enumerable:!0,get:function(){return r.webpushSWContainer}}),Object.defineProperty(t,"WebpushSWContainer",{enumerable:!0,get:function(){return r.WebpushSWContainer}})},9574:function(e,t,n){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.featuresShortName=void 0;var o=n(2573);t.featuresShortName=((r={})[o.Feature.UseWebpushErrorLogging]="f_el",r[o.Feature.UseWebpushFirebaseInitializationLogging]="f_fil",r)},8986:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.workerPathHelper=void 0;var r=n(3049);Object.defineProperty(t,"workerPathHelper",{enumerable:!0,get:function(){return r.workerPathHelper}})},3049:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.workerPathHelper=void 0;var r=n(2573),o=n(9574),i=function(){function e(){}return e.prototype.checkVersion=function(t){if(new RegExp(e.versionRegExpString).test(t))return!0;throw new Error("incorrect module version: ".concat(t,', should be like "1.1.1"'))},e.prototype.getFullPath=function(t){var n=t.path,i=void 0===n?e.defaultServiceWorkerPath:n,s=t.moduleVersion,a=t.firebaseMessagingSettings,c=t.features;this.checkVersion(s);var u="".concat(e.versionParamName,"=").concat(s);return i+"?"+[new URLSearchParams(a).toString(),"".concat(o.featuresShortName[r.Feature.UseWebpushErrorLogging],"=").concat(Boolean(c.useWebpushErrorLogging)),"".concat(o.featuresShortName[r.Feature.UseWebpushFirebaseInitializationLogging],"=").concat(Boolean(c.useWebpushFirebaseInitializationLogging)),u].join("&")},e.prototype.isPathMatched=function(t){return new RegExp(".+?".concat(e.messagingSenderIdParamName,"=.+&").concat(e.versionParamName,"=").concat(e.versionRegExpString)).test(t)},e.messagingSenderIdParamName="messagingSenderId",e.versionParamName="version",e.defaultServiceWorkerPath="/mindbox-services-worker.js",e.versionRegExpString="\\d+\\.\\d+\\.\\d+",e}();t.workerPathHelper=new i},7835:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.applicationDataStateRepository=void 0;var r=n(1635),o=function(e){function t(){var n=e.call(this,t.applicationDataStateKey)||this;return n.tryGetApplicationDataState=n.tryGet,n}return r.__extends(t,e),t.prototype.updateApplicationDataState=function(e){return r.__awaiter(this,void 0,Promise,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this.update((function(n){return t=e(n)}))];case 1:return n.sent(),[2,t]}}))}))},t.applicationDataStateKey="application",t}(n(6909).StateRepository);t.applicationDataStateRepository=new o},9718:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.applicationDataStateRepository=void 0;var r=n(7835);Object.defineProperty(t,"applicationDataStateRepository",{enumerable:!0,get:function(){return r.applicationDataStateRepository}})},6552:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.checkPermission=void 0;var r=n(5474),o=n(8212);t.checkPermission=function(e,t,n){if(!o.pushMessaging.initialization)return Promise.reject(new Error("[Mindbox.SDK] <webpush> Module is not initialized."));if(null==n)throw new Error('[Mindbox.SDK] <webpush> params for command "checkPermission" not set.');if("function"!=typeof n.onGranted)throw new Error('[Mindbox.SDK] <webpush> onGranted for command "checkPermission" not set.');if("function"!=typeof n.onDenied)throw new Error('[Mindbox.SDK] <webpush> onDenied for command "checkPermission" not set.');if("function"!=typeof n.onDefault)throw new Error('[Mindbox.SDK] <webpush> onDefault for command "checkPermission" not set.');return new Promise((function(e,t){switch(r.NotificationPermissionManager.getPermissionState()){case"granted":n.onGranted();break;case"denied":n.onDenied();break;case"default":n.onDefault()}e()}))}},7070:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.getCreateRequestsCount=void 0;var r=n(1635),o=n(7838),i=n(5186),s=n(1140),a=n(8212),c=0;t.getCreateRequestsCount=function(){return c};t.create=function(e,t){return r.__awaiter(void 0,void 0,Promise,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return console.debug("[Mindbox.SDK] <webpush> moduleVersion=".concat(o.webpushV2ModuleInfo.version)),++c,[4,(0,s.isSupported)()];case 1:return n.sent()?a.pushMessaging.initialization?[2,Promise.reject(new Error("[Mindbox.SDK] <webpush> Module is already initialized."))]:(console.debug("[Mindbox.SDK] <webpush> update application data state on create."),[4,a.pushMessaging.initialize({settings:e,deviceUUID:t,webpushSWContainer:i.webpushSWContainer})]):[2,Promise.reject(new Error("[Mindbox.SDK] <webpush> Module is not supported by current browser."))];case 2:return n.sent().subscribe(!0),[2]}}))}))}},7628:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getCreateRequestsCount=t.create=void 0;var r=n(7070);Object.defineProperty(t,"create",{enumerable:!0,get:function(){return r.create}}),Object.defineProperty(t,"getCreateRequestsCount",{enumerable:!0,get:function(){return r.getCreateRequestsCount}})},2947:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getDiagnosticsInfo=void 0;var r=n(1635),o=n(7628);t.getDiagnosticsInfo=function(e,t,n){return r.__awaiter(void 0,void 0,Promise,(function(){var t;return r.__generator(this,(function(r){return n({createRequestsCount:(0,o.getCreateRequestsCount)(),firebaseMessagingSettings:null===(t=null==e?void 0:e.endpointSettings)||void 0===t?void 0:t.firebaseMessagingSettings,serviceWorkerPath:e.serviceWorkerPath,serviceWorkerScope:e.serviceWorkerScope}),[2]}))}))}},286:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.migrate=void 0;var r=n(1635);t.migrate=function(){return r.__awaiter(void 0,void 0,Promise,(function(){return r.__generator(this,(function(e){return console.debug("[Mindbox.SDK] <webpush> \"mindbox('webpush.migrate', ...)\" is no longer required"),[2]}))}))}},4885:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.requestPermission=void 0;var r=n(1635),o=n(5474),i=n(8212);t.requestPermission=function(e,t,n){return r.__awaiter(void 0,void 0,Promise,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:if(!i.pushMessaging.initialization)throw new Error("[Mindbox.SDK] <webpush> Module is not initialized.");if(null==n)throw new Error('[Mindbox.SDK] <webpush> params for command "requestPermission" not set.');if("function"!=typeof n.onGranted)throw new Error('[Mindbox.SDK] <webpush> onGranted for command "requestPermission" not set.');if("function"!=typeof n.onDenied)throw new Error('[Mindbox.SDK] <webpush> onDenied for command "requestPermission" not set.');return[4,o.NotificationPermissionManager.requestPermission()];case 1:switch(e.sent()){case"granted":n.onGranted();break;case"denied":n.onDenied();break;case"default":null!=n.onDefault&&"function"==typeof n.onDefault&&n.onDefault()}return[2]}}))}))}},6212:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.subscribe=void 0;var r=n(2896);Object.defineProperty(t,"subscribe",{enumerable:!0,get:function(){return r.subscribe}})},2896:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.subscribe=void 0;var r=n(1635),o=n(5474),i=n(8212);t.subscribe=function(e,t,n){return r.__awaiter(void 0,void 0,Promise,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:if(!i.pushMessaging.initialization)return[2,Promise.reject(new Error("[Mindbox.SDK] <webpush> Module is not initialized."))];if(null==n)throw new Error('[Mindbox.SDK] <webpush> params for command "subscribe" not set.');if("function"!=typeof n.onGranted)throw new Error('[Mindbox.SDK] <webpush> onGranted for command "subscribe" not set.');if("function"!=typeof n.onDenied)throw new Error('[Mindbox.SDK] <webpush> onDenied for command "subscribe" not set.');return[4,o.NotificationPermissionManager.requestPermission()];case 1:switch(e=t.sent(),i.pushMessaging.initialization.subscribe(!1),e){case"granted":return n.onGranted(),[2];case"denied":return n.onDenied(),[2]}return[2]}}))}))}},9879:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseDatabaseDoctor=void 0;var r=n(1635),o=n(470),i=function(){function e(e,t){this.logger=e,this.firebaseDatabaseFacadeFactory=t}return e.prototype.checkFirebaseDatabases=function(e){return r.__awaiter(this,void 0,Promise,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return this.debug("checking firebase databases"),[4,this.checkDatabase({databaseName:"fcm_token_details_db",storeName:"fcm_token_object_Store"},(function(t){return(null==t?void 0:t.fcmSenderId)===e.firebaseSenderId}))];case 1:return t=r.sent(),[4,this.checkDatabase({databaseName:"fcm_vapid_details_db",storeName:"fcm_vapid_object_Store"},(function(e){return null!=e}))];case 2:return n=r.sent(),t===o.DatabaseCheckResult.OK&&n===o.DatabaseCheckResult.OK?[2,o.DatabaseCheckResult.OK]:t===o.DatabaseCheckResult.Broken||n===o.DatabaseCheckResult.Broken?[2,o.DatabaseCheckResult.Broken]:[2,o.DatabaseCheckResult.Unknown]}}))}))},e.prototype.tryRepairDatabase=function(){return r.__awaiter(this,void 0,Promise,(function(){var e,t,n,o;return r.__generator(this,(function(r){switch(r.label){case 0:return this.debug("trying to repair firebase databases"),e=this.firebaseDatabaseFacadeFactory({databaseName:"fcm_token_details_db",storeName:"fcm_token_object_Store"}),t=this.firebaseDatabaseFacadeFactory({databaseName:"fcm_vapid_details_db",storeName:"fcm_vapid_object_Store"}),[4,e.drop()];case 1:return n=r.sent(),[4,t.drop()];case 2:return o=r.sent(),[2,n&&o]}}))}))},e.prototype.checkDatabase=function(e,t){return r.__awaiter(this,void 0,Promise,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return this.debug("checking ".concat(e.databaseName)),[4,this.firebaseDatabaseFacadeFactory(e).checkScopeData(t)];case 1:return n=r.sent(),this.debug("check result: ".concat(n)),[2,n]}}))}))},e.prototype.debug=function(e){this.logger.debug("[Mindbox.SDK] <FirebaseDatabaseDoctor> ".concat(e))},e}();t.FirebaseDatabaseDoctor=i},470:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseDatabaseFacade=t.DatabaseCheckResult=void 0;var r,o=n(1635),i=n(1436),s=n(7061);!function(e){e.OK="OK",e.Broken="BROKEN",e.Unknown="UNKNOWN"}(r||(r={})),t.DatabaseCheckResult=r;var a=function(){function e(e,t){this.getKeyAkaScope=function(){return location.origin+"/"},this.databaseNames=e,this.logger=t}return e.prototype.checkScopeData=function(e){return o.__awaiter(this,void 0,Promise,(function(){var t,n,s,a;return o.__generator(this,(function(o){switch(o.label){case 0:t=null,o.label=1;case 1:return o.trys.push([1,4,5,6]),this.debug("opening IDB"),[4,(0,i.openDB)(this.databaseNames.databaseName)];case 2:return t=o.sent(),t.objectStoreNames.contains(this.databaseNames.storeName)?(this.debug("checking scope data"),[4,t.get(this.databaseNames.storeName,this.getKeyAkaScope())]):(this.logger.debug("object store not found"),[2,r.Broken]);case 3:return n=o.sent(),s=e(n),this.debug("scope data is valid: ".concat(s)),[2,s?r.OK:r.Broken];case 4:return a=o.sent(),this.debug("failed to check database"),this.logger.debug(a),[2,r.Unknown];case 5:return null==t||t.close(),[7];case 6:return[2]}}))}))},e.prototype.drop=function(){return o.__awaiter(this,void 0,Promise,(function(){var e,t,n,r=this;return o.__generator(this,(function(o){switch(o.label){case 0:return this.debug("deleting IDB"),e=!1,t=!1,n=(0,i.deleteDB)(this.databaseNames.databaseName,{blocked:function(){r.debug("failed to deleted blocked database"),t=!0}}).then((function(){r.debug("database deleted successfully: ".concat(!t)),e=!t})),[4,Promise.race([(0,s.sleep)(1313),n])];case 1:return o.sent(),this.debug("database deleted successfully: ".concat(e)),[2,e]}}))}))},e.prototype.debug=function(e){this.logger.debug("[Mindbox.SDK] <FirebaseDatabaseFacade> [".concat(this.databaseNames.databaseName,"] ").concat(e))},e}();t.FirebaseDatabaseFacade=a},3755:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IntegrationDoctor=void 0;var r=n(1635),o=n(470),i=function(){function e(e){var t=e.logger,n=e.serviceWorkerContainer,r=e.firebaseDatabaseDoctor;this.logger=t,this.serviceWorkerContainer=n,this.firebaseDatabaseDoctor=r}return e.prototype.tryRepairIntegration=function(e,t){var n,i;return r.__awaiter(this,void 0,Promise,(function(){var s,a;return r.__generator(this,(function(r){switch(r.label){case 0:return this.debug("checking repair required"),[4,this.firebaseDatabaseDoctor.checkFirebaseDatabases({firebaseSenderId:"".concat(e.firebaseMessagingSettings.messagingSenderId)})];case 1:switch(s=r.sent(),s){case o.DatabaseCheckResult.OK:return[3,2];case o.DatabaseCheckResult.Broken:return[3,3];case o.DatabaseCheckResult.Unknown:return[3,6]}return[3,7];case 2:return this.debug("databases are OK, repair not required"),a=!0,[3,8];case 3:return this.debug("databases are BROKEN, repair required"),[4,this.unregisterServiceWorker()];case 4:return r.sent(),[4,this.firebaseDatabaseDoctor.tryRepairDatabase()];case 5:return a=r.sent(),[3,8];case 6:return this.debug("databases unchecked, assuming failed repair process"),a=!1,[3,8];case 7:throw new Error('Unknown database check result "'.concat(s,'"'));case 8:return a?(this.debug('calling "success"-callback'),null===(n=null==t?void 0:t.onSuccess)||void 0===n||n.call(t)):(this.debug('calling "fail"-callback'),null===(i=null==t?void 0:t.onFail)||void 0===i||i.call(t,"FAILED_TO_REPAIR_FIREBASE_DATABASES")),[2]}}))}))},e.prototype.unregisterServiceWorker=function(){return r.__awaiter(this,void 0,Promise,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this.debug("unregistering service worker"),[4,this.serviceWorkerContainer.getRegistration()];case 1:return null==(e=t.sent())?[3,3]:(this.debug("found sw, unregistering"),[4,e.unregister()]);case 2:return t.sent(),this.debug("sw unregistered"),[3,4];case 3:this.debug("no service workers found"),t.label=4;case 4:return[2]}}))}))},e.prototype.debug=function(e){this.logger.debug("[Mindbox.SDK] <IntegrationDoctor> ".concat(e))},e}();t.IntegrationDoctor=i},344:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=void 0,t.ConsoleLogger={debug:console.debug}},9642:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseDatabaseFacade=t.FirebaseDatabaseDoctor=t.IntegrationDoctor=t.ConsoleLogger=void 0;var r=n(344);Object.defineProperty(t,"ConsoleLogger",{enumerable:!0,get:function(){return r.ConsoleLogger}});var o=n(3755);Object.defineProperty(t,"IntegrationDoctor",{enumerable:!0,get:function(){return o.IntegrationDoctor}});var i=n(9879);Object.defineProperty(t,"FirebaseDatabaseDoctor",{enumerable:!0,get:function(){return i.FirebaseDatabaseDoctor}});var s=n(470);Object.defineProperty(t,"FirebaseDatabaseFacade",{enumerable:!0,get:function(){return s.FirebaseDatabaseFacade}})},3217:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WEBPUSH_V2_PREFIX=void 0,t.WEBPUSH_V2_PREFIX="webpushV2"},885:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.onLoad=void 0;var r=n(9049),o=n(4954),i=n(5577),s=n(7838);t.onLoad=function(e){return r.webpushLoggerProvider.logger=new o.WebpushLogger({baseTags:{firebaseJsSdk:i.SDK_VERSION,version:s.webpushV2ModuleInfo.version},features:e.endpointSettings.features}),Promise.resolve()}},8212:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.pushMessaging=void 0;var r=n(1635),o=n(6e3),i=n(7838),s=n(2712),a=n(1868),c=n(5474),u=n(3975),l=n(4191),d=n(5577),p=n(1140),f=n(213),h=n(6883),m=n(3908),g=n(9718),v=n(1744),y=n(9049),_=n(6029),b=function(e){var t=e.settings,n=e.webpushSWContainer,s=e.originDomain,c=e.deviceUUID,l=e.integrationController;return r.__awaiter(void 0,void 0,void 0,(function(){var e,h,m,g,b,k,E,I,x,T,C,D,O,R,M;return r.__generator(this,(function(A){switch(A.label){case 0:return e=t.firebaseMessagingSettings,h=t.endpointId,m=t.endpointSettings,b=(g=void 0===m?{}:m).features,k=g.firebaseMessagingSettings,(E=e||k)?[3,2]:[4,n.getServiceWorker()];case 1:if(!(I=A.sent()))throw y.webpushLoggerProvider.logger.LogAndThrowException({error:new Error("Need firebase settings"),type:v.WebpushLoggingType.Error});x=new URL(I.scriptURL),E=(0,_.getFirebaseMessagingSettingsBySearchParams)(x.searchParams),A.label=2;case 2:try{T=(0,d.initializeApp)(E)}catch(e){y.webpushLoggerProvider.logger.LogAndThrowException({error:e,type:v.WebpushLoggingType.FirebaseInitialization})}(0,i.addDebugHelper)("firebaseApp",T);try{C=(0,p.getMessaging)(T)}catch(e){y.webpushLoggerProvider.logger.LogAndThrowException({error:e,type:v.WebpushLoggingType.FirebaseInitialization})}return(0,i.addDebugHelper)("firebaseMessaging",C),D=(0,o.getEffectiveApiUri)(t),O={apiUri:D,deviceUUID:c,endpointId:h,originDomain:s,features:b},[4,a.SettingsRepository.saveSettings(O)];case 3:return A.sent(),S({firebaseApp:T,webpushSWContainer:n,integrationController:l}),[4,w({settings:t,versionsStateRepository:u.workerVersionsStateRepository,webpushSWContainer:n,firebaseMessagingSettings:E})];case 4:return A.sent(),(0,i.addDebugHelper)("trackerSettings",t),R=function(){return r.__awaiter(void 0,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,n.getActiveServiceWorkerRegistration()];case 1:return e=t.sent(),[2,(0,p.getToken)(C,{serviceWorkerRegistration:e}).catch((function(e){return y.webpushLoggerProvider.logger.LogException({error:e,type:v.WebpushLoggingType.FirebaseInitialization}),null}))]}}))}))},M=new f.SharedPromise(R),[2,{getFirebaseToken:function(){return M.execute()}}]}}))}))},w=function(e){var t=e.versionsStateRepository,n=e.settings,o=e.webpushSWContainer,s=e.firebaseMessagingSettings;return r.__awaiter(void 0,void 0,void 0,(function(){var e,a;return r.__generator(this,(function(r){e=n.serviceWorkerScope,a=n.serviceWorkerPath;try{return[2,o.register({path:a,firebaseMessagingSettings:s,scope:e||"/",workerVersionsStateRepository:t,moduleInfo:i.webpushV2ModuleInfo,features:n.endpointSettings.features})]}catch(e){throw y.webpushLoggerProvider.logger.LogException({error:e,type:v.WebpushLoggingType.Error}),e}return[2]}))}))},S=function(e){var t=e.firebaseApp,n=e.webpushSWContainer,o=e.integrationController,a=new s.TrackingService(o),u=new c.WindowNotificationsController((function(){return n.getActiveServiceWorkerRegistration()}),a);(0,i.addDebugHelper)("services",{integrationController:o,trackingService:a,notificationsController:u});var l=(0,p.getMessaging)(t);(0,p.onMessage)(l,(function(e){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return console.debug("[Mindbox.SDK] <webpush> received foreground message ",e),[4,u.showNotification(e)];case 1:return t.sent(),[2]}}))}))}))},k=function(){function e(){}return e.prototype.initialize=function(e){var t=e.settings,n=e.deviceUUID,o=e.webpushSWContainer;return r.__awaiter(this,void 0,void 0,(function(){var e,i,s,c;return r.__generator(this,(function(r){switch(r.label){case 0:return this._initialization?[3,2]:(e=new l.WebpushApiIntegrationController({settingsRepository:a.SettingsRepository,getFetch:function(){return fetch},firebaseJsSdkVersion:d.SDK_VERSION}),[4,b({settings:t,originDomain:location.host,deviceUUID:n,webpushSWContainer:o,integrationController:e})]);case 1:i=r.sent().getFirebaseToken,s=new m.IanaTimeZoneProvider,c=new h.ApplicationDataUpdateService({integrationController:e,applicationDataStateRepository:g.applicationDataStateRepository,timezoneProvider:s,getFirebaseToken:i}),this._initialization={subscribe:function(e){return c.tryUpdateApplicationData(e)}},r.label=2;case 2:return[2,this._initialization]}}))}))},Object.defineProperty(e.prototype,"initialization",{get:function(){return this._initialization},enumerable:!1,configurable:!0}),e}();t.pushMessaging=new k},4954:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebpushLogger=void 0;var r=n(1635),o=n(3975),i=n(9718),s=n(1868),a=n(4304),c=n(5474),u=n(7900),l=n(1744),d=n(6683),p=function(){function e(e){var t=e.baseTags,n=e.features;this.baseTags=t,this.features=n,a.Logger.create((function(){return d.SentryLogger.initialize()})),this.logger=a.Logger}return e.isLegacyDebuggingHost=function(){return(0,u.isHostHash)(e.fullLoggingHashedHosts)},e.prototype.getCaptureContext=function(e){var t,n=e.tags,a=void 0===n?{}:n,u=e.type;return r.__awaiter(this,void 0,Promise,(function(){var e,n,l,d,p;return r.__generator(this,(function(f){switch(f.label){case 0:e={webpushLoggingType:u},f.label=1;case 1:f.trys.push([1,12,,13]),n=function(e){try{if(e)return JSON.stringify(e)}catch(e){}return""},l=null,d=null,p=null,f.label=2;case 2:return f.trys.push([2,4,,5]),[4,o.workerVersionsStateRepository.tryGet()];case 3:return l=f.sent(),[3,5];case 4:return f.sent(),[3,5];case 5:return f.trys.push([5,7,,8]),[4,i.applicationDataStateRepository.tryGetApplicationDataState()];case 6:return d=f.sent(),[3,8];case 7:return f.sent(),[3,8];case 8:return f.trys.push([8,10,,11]),[4,s.SettingsRepository.getSettings()];case 9:return p=f.sent(),[3,11];case 10:return f.sent(),[3,11];case 11:return[2,{tags:r.__assign(r.__assign(r.__assign(r.__assign({},this.baseTags),{deviceUUID:null==p?void 0:p.deviceUUID,endpointId:null==p?void 0:p.endpointId,token:null===(t=null==d?void 0:d.firebaseToken)||void 0===t?void 0:t.value,permission:c.NotificationPermissionManager.getPermissionState()}),e),a),extra:{applicationData:n(d),serviceWorkerSettings:n(p),workerVersions:n(l)}}];case 12:return f.sent(),[2,r.__assign({tags:this.baseTags},e)];case 13:return[2]}}))}))},e.prototype.canLog=function(t){return!(t!==l.WebpushLoggingType.Error||!this.features.useWebpushErrorLogging&&!e.isLegacyDebuggingHost())||!!(t===l.WebpushLoggingType.FirebaseInitialization&&(this.features.useWebpushFirebaseInitializationLogging||e.isLegacyDebuggingHost())&&Math.random()<e.firebaseInitializationLoggingRate)},e.prototype.LogException=function(e){var t=e.error,n=e.tags,o=e.type;return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(r){switch(r.label){case 0:return this.canLog(o)?[4,this.getCaptureContext({tags:n,type:o})]:[2];case 1:return e=r.sent(),this.logger.LogException(t,e),[2]}}))}))},e.prototype.LogAndThrowException=function(e){var t=e.error,n=e.tags,o=e.type;return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this.canLog(o))throw t;return[4,this.getCaptureContext({tags:n,type:o})];case 1:return e=r.sent(),this.logger.LogAndThrowException(t,e),[2]}}))}))},e.prototype.LogEvent=function(e){var t=e.name,n=e.event,o=e.tags,i=e.type;return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(r){switch(r.label){case 0:return this.canLog(i)?[4,this.getCaptureContext({tags:o,type:i})]:[2];case 1:return e=r.sent(),this.logger.LogEvent(t,n,e),[2]}}))}))},e.fullLoggingHashedHosts=["z77f623xe3x4yf568888888888888888","z5x713x6xf5688888888888888888888","z77fy226x2e1454yf568888888888888","z77fx443741yf5688888888888888888"],e.firebaseInitializationLoggingRate=.05,e}();t.WebpushLogger=p},1744:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WebpushLoggingType=void 0,function(e){e.Error="Error",e.FirebaseInitialization="FirebaseInitialization"}(t.WebpushLoggingType||(t.WebpushLoggingType={}))},6029:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getFirebaseMessagingSettingsBySearchParams=void 0;t.getFirebaseMessagingSettingsBySearchParams=function(e){return{apiKey:e.get("apiKey"),appId:e.get("appId"),authDomain:e.get("authDomain"),databaseURL:e.get("databaseURL"),messagingSenderId:e.get("messagingSenderId"),storageBucket:e.get("storageBucket"),projectId:e.get("projectId")}}},2574:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.versionGt=void 0;var r=n(1537);Object.defineProperty(t,"versionGt",{enumerable:!0,get:function(){return r.versionGt}})},1537:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.versionGt=void 0;t.versionGt=function(e,t){for(var n=e.split("."),r=t.split("."),o=!1,i=0;!o&&n.length>i;)o=Number(n[i])>Number(r[i]),i++;return o}},9049:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.webpushLoggerProvider=void 0,t.webpushLoggerProvider={logger:{LogException:function(){},LogEvent:function(){},LogAndThrowException:function(){}}}},3975:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.workerVersionsStateRepository=void 0;var r=n(939);Object.defineProperty(t,"workerVersionsStateRepository",{enumerable:!0,get:function(){return r.workerVersionsStateRepository}})},939:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.workerVersionsStateRepository=void 0;var r=n(1635),o=n(6909),i=n(2574),s=function(e){function t(){var n=e.call(this,t.workerVersionsStateKey)||this;return n.saveState=n.save,n.tryGet=n.tryGet,n}return r.__extends(t,e),t.prototype.isWorkerModuleVersionGtOrEq=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.tryGet()];case 1:return t=r.sent(),(n=null==t?void 0:t.module)&&!(0,i.versionGt)(e,n)?[2,!0]:[2,!1]}}))}))},t.workerVersionsStateKey="worker-versions",t}(o.StateRepository);t.workerVersionsStateRepository=new s},213:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SharedPromise=void 0;var n=function(){function e(e){this.getPromise=e,this.execute=this.execute.bind(this)}return e.prototype.execute=function(){var e=this;return this.promise||(this.promise=this.getPromise(),this.promise.then((function(){e.promise=null})).catch((function(){e.promise=null}))),this.promise},e}();t.SharedPromise=n},9495:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseWithRetries=void 0;var r=n(1635),o={retries:2,startDelay:100,delayRate:1},i=function(){function e(e,t){void 0===t&&(t={}),this.isCancelled=!1,this.getPromise=e,this.options=r.__assign(r.__assign({},o),t)}return e.prototype.execute=function(){return r.__awaiter(this,void 0,Promise,(function(){var e=this;return r.__generator(this,(function(t){return[2,new Promise((function(t,n){return r.__awaiter(e,void 0,void 0,(function(){var e,o,i,s=this;return r.__generator(this,(function(a){return e=this.options.retries,o=null,i=function(a){return r.__awaiter(s,void 0,void 0,(function(){var s,c,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(this.isCancelled)return t(null),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.getPromise()];case 2:return s=r.sent(),t(s),[2];case 3:return c=r.sent(),o=c,0===e?(n(o),[2]):(e--,[3,4]);case 4:return setTimeout((function(){var e=a*u.options.delayRate;i(e)}),a),[2]}}))}))},[2,i(this.options.startDelay)]}))}))}))]}))}))},e.prototype.cancel=function(){this.isCancelled=!0},e}();t.PromiseWithRetries=i},3652:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseWithRetries=void 0;var r=n(9495);Object.defineProperty(t,"PromiseWithRetries",{enumerable:!0,get:function(){return r.PromiseWithRetries}})},6454:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultServiceDomain=t.getStaticAssetsDomain=t.targetModern=t.version=void 0,t.version="1.0.668",t.targetModern=!1;var n="{serviceDomainDefinedByDeployment}",r="{staticAssetsDomainDefinedByDeployment}";t.getStaticAssetsDomain=function(){return-1!=r.indexOf("staticAssetsDomainDefinedByDeployment")?"web-static.mindbox.ru":r};t.getDefaultServiceDomain=function(){return-1!=n.indexOf("serviceDomainDefinedByDeployment")?"api.mindbox.ru":n}},2573:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Feature=void 0,function(e){e.UseWebpushErrorLogging="useWebpushErrorLogging",e.UseWebpushFirebaseInitializationLogging="useWebpushFirebaseInitializationLogging"}(t.Feature||(t.Feature={}))},3908:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IanaTimeZoneProvider=void 0;var n=function(){function e(){}return e.prototype.tryGetTimeZone=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return null}},e}();t.IanaTimeZoneProvider=n},6e3:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.compareSettings=t.getScriptsRoot=t.getStaticAssetsRoot=t.getEffectiveApiUri=void 0;var r=n(1635);t.compareSettings=function(e,t){var n,i,s=new Array;try{for(var a=r.__values(Object.keys(e)),c=a.next();!c.done;c=a.next()){var u=c.value,l=o(u,e,t);null!=l&&s.push(l)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return 0===s.length?null:s};var o=function(e,t,n){var r;switch(e){case"serviceDomain":case"staticAssetsDomain":r=null;break;case"redirectedFrom":r=i(t[e],n[e])?null:"redirectedFrom objects are different";break;default:r=t[e]===n[e]?null:"".concat(t[e]," !== ").concat(n[e])}return null==r?null:{key:e,message:r}},i=function(e,t){return e.requestUrl===t.requestUrl&&e.referrerUrl===t.referrerUrl},s=function(e){if(null==e)throw new Error("'settings' cannot be null");var t=e.useHttp?"http":"https",n=null!=e.serviceDomain?e.serviceDomain:"api.mindbox.ru";return"".concat(t,"://").concat(n)};t.getEffectiveApiUri=s;t.getStaticAssetsRoot=function(e){if(null==e)throw new Error("'settings' cannot be null");var t=e.useHttp?"http":"https",n=null!=e.staticAssetsDomain?e.staticAssetsDomain:"web-static.mindbox.ru";return"".concat(t,"://").concat(n)};t.getScriptsRoot=function(e){return s(e)}},6513:function(e,t,n){n.r(t),n.d(t,{deleteDB:function(){return v},openDB:function(){return g},unwrap:function(){return m},wrap:function(){return h}});const r=(e,t)=>t.some((t=>e instanceof t));let o,i;const s=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),h(s.get(this))}:function(...t){return h(e.apply(m(this),t))}:function(t,...n){const r=e.call(m(this),t,...n);return c.set(r,t.sort?t.sort():[t]),h(r)}}function f(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));a.set(e,t)}(e),r(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(h(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),l.set(t,e)),t}const m=e=>l.get(e);function g(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=h(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(h(s.result),e.oldVersion,e.newVersion,h(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function v(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),h(n).then((()=>{}))}const y=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!y.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&i.done]))[0]};return b.set(t,i),i}d=(e=>({...e,get:(t,n,r)=>w(t,n)||e.get(t,n,r),has:(t,n)=>!!w(t,n)||e.has(t,n)}))(d)},2463:function(e,t,n){n.r(t),n.d(t,{deleteDB:function(){return v},openDB:function(){return g},unwrap:function(){return m},wrap:function(){return h}});const r=(e,t)=>t.some((t=>e instanceof t));let o,i;const s=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),h(s.get(this))}:function(...t){return h(e.apply(m(this),t))}:function(t,...n){const r=e.call(m(this),t,...n);return c.set(r,t.sort?t.sort():[t]),h(r)}}function f(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));a.set(e,t)}(e),r(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(h(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),l.set(t,e)),t}const m=e=>l.get(e);function g(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=h(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(h(s.result),e.oldVersion,e.newVersion,h(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function v(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),h(n).then((()=>{}))}const y=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!y.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&i.done]))[0]};return b.set(t,i),i}d=(e=>({...e,get:(t,n,r)=>w(t,n)||e.get(t,n,r),has:(t,n)=>!!w(t,n)||e.has(t,n)}))(d)},4718:function(e,t,n){n.r(t),n.d(t,{deleteDB:function(){return v},openDB:function(){return g},unwrap:function(){return m},wrap:function(){return h}});const r=(e,t)=>t.some((t=>e instanceof t));let o,i;const s=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),h(s.get(this))}:function(...t){return h(e.apply(m(this),t))}:function(t,...n){const r=e.call(m(this),t,...n);return c.set(r,t.sort?t.sort():[t]),h(r)}}function f(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));a.set(e,t)}(e),r(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(h(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),l.set(t,e)),t}const m=e=>l.get(e);function g(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=h(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(h(s.result),e.oldVersion,e.newVersion,h(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function v(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),h(n).then((()=>{}))}const y=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!y.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&i.done]))[0]};return b.set(t,i),i}d=(e=>({...e,get:(t,n,r)=>w(t,n)||e.get(t,n,r),has:(t,n)=>!!w(t,n)||e.has(t,n)}))(d)},1635:function(e,t,n){n.r(t),n.d(t,{__addDisposableResource:function(){return P},__assign:function(){return i},__asyncDelegator:function(){return I},__asyncGenerator:function(){return E},__asyncValues:function(){return x},__await:function(){return k},__awaiter:function(){return h},__classPrivateFieldGet:function(){return R},__classPrivateFieldIn:function(){return A},__classPrivateFieldSet:function(){return M},__createBinding:function(){return g},__decorate:function(){return a},__disposeResources:function(){return N},__esDecorate:function(){return u},__exportStar:function(){return v},__extends:function(){return o},__generator:function(){return m},__importDefault:function(){return O},__importStar:function(){return D},__makeTemplateObject:function(){return T},__metadata:function(){return f},__param:function(){return c},__propKey:function(){return d},__read:function(){return _},__rest:function(){return s},__runInitializers:function(){return l},__setFunctionName:function(){return p},__spread:function(){return b},__spreadArray:function(){return S},__spreadArrays:function(){return w},__values:function(){return y}});
/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function a(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t,n,r,o,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=r.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!t&&e?r.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),p=!1,f=n.length-1;f>=0;f--){var h={};for(var m in r)h[m]="access"===m?{}:r[m];for(var m in r.access)h.access[m]=r.access[m];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var g=(0,n[f])("accessor"===c?{get:d.get,set:d.set}:d[u],h);if("accessor"===c){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(a=s(g.get))&&(d.get=a),(a=s(g.set))&&(d.set=a),(a=s(g.init))&&o.unshift(a)}else(a=s(g))&&("field"===c?o.unshift(a):d[u]=a)}l&&Object.defineProperty(l,r.name,d),p=!0}function l(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function m(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var g=Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function v(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function S(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function E(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=o[e](t)).value instanceof k?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function I(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:k(e[r](t)),done:!1}:o?o(t):t}:o}}function x(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var C=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function D(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&g(t,e,n);return C(t,e),t}function O(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function M(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}function A(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function P(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if("function"!=typeof r)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var L="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function N(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function n(){for(;e.stack.length;){var r=e.stack.pop();try{var o=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(o).then(n,(function(e){return t(e),n()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()}t.default={__extends:o,__assign:i,__rest:s,__decorate:a,__param:c,__metadata:f,__awaiter:h,__generator:m,__createBinding:g,__exportStar:v,__values:y,__read:_,__spread:b,__spreadArrays:w,__spreadArray:S,__await:k,__asyncGenerator:E,__asyncDelegator:I,__asyncValues:x,__makeTemplateObject:T,__importStar:D,__importDefault:O,__classPrivateFieldGet:R,__classPrivateFieldSet:M,__classPrivateFieldIn:A,__addDisposableResource:P,__disposeResources:N}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,n),i.loaded=!0,i.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,o;r=n(2346),o=n(7838),n(2573),window.mindbox[o.webpushV2ModuleInfo.name]=r.WebpushV2Module}();